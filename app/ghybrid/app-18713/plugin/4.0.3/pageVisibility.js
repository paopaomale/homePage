(function(e){var i=function(e){if(e._preRegAPI&&!e._isReady){e._preRegAPI("plugin.pageVisibility.watch");e._preRegAPI("plugin.pageVisibility.clearWatch")}e.reg("plugin.pageVisibility",function(e){var i;var n;if(typeof document.hidden!=="undefined"){i="hidden";n="visibilitychange"}else if(typeof document.mozHidden!=="undefined"){i="mozHidden";n="mozvisibilitychange"}else if(typeof document.msHidden!=="undefined"){i="msHidden";n="msvisibilitychange"}else if(typeof document.webkitHidden!=="undefined"){i="webkitHidden";n="webkitvisibilitychange"}return{watch:function(t){var o;if(e.isTmall&&parseFloat(e.appinfo.ver)>=4.4){var l="watchVisibilitychange"+e._getCUID();var r=function(){t({errorCode:3})};TMM.APP.call("PageVisibility.watchVisibilitychange",[l],function(e){if(e&&!e.code&&e.data){t({visible:!!e.data.visible})}else{r()}},r);return l}else if(window.WindVane){o=function(e){t({visible:e.type==="WV.Event.APP.Active"})};document.addEventListener("WV.Event.APP.Background",o,false);document.addEventListener("WV.Event.APP.Active",o,false);return e._store.set(o)}else if(typeof document[i]!=="undefined"){o=function(){t({visible:!document[i]})};document.addEventListener(n,o,false);return e._store.set(o)}else{o=function(e){t({visible:e.type==="focus"})};window.addEventListener("focus",o,false);window.addEventListener("blur",o,false);return e._store.set(o)}},clearWatch:function(t,o){var l;if(e.isTmall&&parseFloat(e.appinfo.ver)>=4.4){TMM.APP.call("PageVisibility.clearWatch",[t],function(){o&&o({})},function(){o&&o({errorCode:3})})}else if(window.WindVane){l=e._store.get(t);e._store.remove(t);document.removeEventListener("WV.Event.APP.Background",l,false);document.removeEventListener("WV.Event.APP.Active",l,false);o&&o({})}else if(typeof document[i]!=="undefined"){l=e._store.get(t);document.removeEventListener(n,l,false)}else{l=e._store.get(t);window.removeEventListener("focus",l,false);window.removeEventListener("blur",l,false)}}}})};if("function"===typeof define){define("hybrid/plugin/pageVisibility",function(n,t,o){i(e.Ali);o.exports=e.Ali;return e.Ali})}else if(e.KISSY&&KISSY.add){KISSY.add("hybrid/plugin/pageVisibility",function(e,n){i(n);return n},{requires:["mui/hybrid/index"]})}else{i(e.Ali)}})(this);