Ali.reg("plugin.pageVisibility",function(e){return{watch:function(i){if(e.isTmall&&parseFloat(e.appinfo.ver)>=4.4){var t="watchVisibilitychange"+e._getCUID(),n=function(){i({errorCode:3})};return TMM.APP.call("PageVisibility.watchVisibilitychange",[t],function(e){e&&!e.code&&e.data?i({visible:!!e.data.visible}):n()},n),t}if(window.WindVane){var a=function(e){i({visible:"WV.Event.APP.Active"===e.type})};return document.addEventListener("WV.Event.APP.Background",a,!1),document.addEventListener("WV.Event.APP.Active",a,!1),e._store.set(a)}e._noSuchApi(i)},clearWatch:function(i,t){if(e.isTmall&&parseFloat(e.appinfo.ver)>=4.4)TMM.APP.call("PageVisibility.clearWatch",[i],function(){t&&t({})},function(){t&&t({errorCode:3})});else if(window.WindVane){var n=e._store.get(i);e._store.remove(i),document.removeEventListener("WV.Event.APP.Background",n,!1),document.removeEventListener("WV.Event.APP.Active",n,!1),t&&t({})}else e._noSuchApi(t)}}});