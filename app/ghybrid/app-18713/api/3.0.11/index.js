(function(e){var t=e.Ali=e.Ali||{};if(t.event&&t.callAfterReady&&t.version&&t.reg){if(e.KISSY&&KISSY.add){KISSY.add("mui/hybrid/index",function(){return t})}else if("function"===typeof define){define(function(){return t})}return}t.ua=navigator.userAgent;t.isTmall=false;t.isTmallPad=false;t.isTaobao=false;t.isAlipay=false;t.isAlitrip=false;t.isWeb=true;t.isIOS=/iphone|ipad|ipod/i.test(t.ua);t.version="3.0.11";t._noSuchApi=function(e){e&&e({errorCode:1,errorMessage:"\u63a5\u53e3\u4e0d\u5b58\u5728"})};var n=function(e,t){for(var i in t){if(e[i]===null||e[i]===undefined){e[i]=t[i]}else if(typeof t[i]==="object"){n(e[i],t[i])}}};var i=function(e,i){var r={};if(e){var o=r;e=e.split(".");for(var a=0;a<e.length-1;a+=1){o=o[e[a]]={}}o[e[a]]=i(t)}else{r=i(t)}n(t,r)};t.reg=function(e,n){if(typeof e==="function"){n=e;e=""}if(t._isInit){i(e,n)}else{t.event.add("init",function(){i(e,n)})}};t.event=t.event||{_events:{},add:function(e,t){this._events[e]=this._events[e]||[];this._events[e].push(t)},remove:function(e,t){var n=this._events[e];if(!n||n.length===0){return}if(!t){this._events[e]=[];return}for(var i=n.length-1;i>=0;i-=1){if(t===n[i]){n.splice(i,1)}}},trigger:function(e){var n=this._events[e];if(!n||n.length<1){return}for(var i=0,r;r=n[i];i+=1){r(t)}}};t._getCUID=t._getCUID||function(){var e=0;return function(){e+=1;return e}}();t.callAfterReady=function(e){var n=[].slice.call(arguments,1);t.ready(function(t){e=String(e).split(".");var i=t;for(var r=0;r<e.length-1;r+=1){i=i[e[r]];if(!i){break}}if(i&&i[e[r]]){i[e[r]].apply(i,n)}else{console.warn("Has No Api Named "+e.join("."));if(typeof n[n.length-1]==="function"){t._noSuchApi(n[n.length-1])}}})};t.loadPlugins=function(e,n){t._loadScripts([e],function(){t.ready(n)})};t._config=t._config||{};var r=e._ALI_HYBRID_PLATFORM_BASEPATH||"//g.alicdn.com/hybrid/api/3.0.11/platform/";t._config.platform={alipay:{detect:function(e){return/AlipayClient/.test(e)}},tmallPad:{detect:function(e){return/AliApp\(TM-PD\/([\d\.]+)\)/i.test(e)}},tmall:{detect:function(e){return/AliApp\(TM\/([\d\.]+)\)/i.test(e)||/T-UA=/i.test(e)}},taobao:{detect:function(e){return/AliApp\(TB\/([\d\.]+)\)/i.test(e)}}};var o=e._ALI_HYBRID_PLATFORM_CONFIG||{};for(var a in t._config.platform){var c=t._config.platform[a];if(o[a]){c.res=o[a].res;c.detect=o[a].detect||c.detect}if(!c.res){c.res=[r+a+"-bridge.js"]}}var u=t._store=t._store||{};var f={};u.get=function(e){return f[e]};u.set=function(e,n){if(typeof n==="undefined"){n=e;e=t._getCUID()}f[e]=n;return e};u.remove=function(e){delete f[e]};t.event.add("init",function(e){e.appinfo=e.appinfo||{};e.appinfo.name=e.appinfo.name||"web";e.appinfo.ver=e.appinfo.ver||"1.0.0";e.appinfo.engine=e.appinfo.engine||e.appinfo.name;e.appinfo.engineVer=e.appinfo.engineVer||e.appinfo.ver});t.reg("call",function(e){return function(t,n,i){e._noSuchApi(i)}});t.reg("photo",function(t){var n=function(t,n,i){n=n||{};var r=e.innerWidth;var o=e.innerHeight;n.maxWidth=n.maxWidth||r;n.maxHeight=n.maxHeight||o;var a=document.createElement("video");var c=document.createElement("canvas");a.setAttribute("width",r);a.setAttribute("height",o);a.setAttribute("autoplay","autoplay");a.style.cssText="position:absolute;"+"top:0;left:0;z-index:999;"+"width:"+r+"px;"+"height:"+o+"px;";document.body.appendChild(a);c.setAttribute("width",n.maxWidth);c.setAttribute("height",n.maxHeight);if(navigator.mozGetUserMedia){a.mozSrcObject=t}else{var u=e.URL||e.webkitURL;a.src=u.createObjectURL(t)}var f=function(e){t.stop();document.body.removeChild(a);a.onclick=null;a=null;i(e)};a.onerror=function(e){f({errorCode:3,errorMessage:e.message})};a.onclick=function(){var e,t,i,r;if(a.videoWidth/a.videoHeight>n.maxWidth/n.maxHeight){t=a.videoHeight;e=Math.ceil(t*n.maxWidth/n.maxHeight);i=Math.ceil((a.videoWidth-e)/2);r=0}else{e=a.videoWidth;t=Math.ceil(e*n.maxHeight/n.maxWidth);r=Math.ceil((a.videoHeight-t)/2);i=0}c.getContext("2d").drawImage(a,i,r,e,t,0,0,n.maxWidth,n.maxHeight);f({photo:c.toDataURL("image/"+(n.format||"png"))})}};return function(i,r){navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(!navigator.getMedia||!e.HTMLVideoElement||!e.HTMLCanvasElement){t._noSuchApi(r);return}navigator.getMedia({video:true,audio:false},function(e){setTimeout(function(){n(e,i,r)},1e3)},function(e){r({errorCode:3,errorMessage:e.message})})}});t.reg("pushWindow",function(){return function(e,t){if(typeof e==="string"){e={url:e}}if(e&&e.url){location.href=e.url}t&&t({})}});t.reg("h5TradePay",function(){return function(t,n){var i=location.host.match(/waptest|wapa/i);i=i&&i[0]||"m";var r="http://d."+i+".taobao.com/goAlipay.htm?simplepay=1&needpop=1";for(var o in t){r+="&"+o+"="+encodeURIComponent(t[o])}e.open(r);n&&n({})}});t.reg(function(){return{toast:function(e,n){t._noSuchApi(n)},showTitle:t._noSuchApi,hideTitle:t._noSuchApi,showLoading:function(e,n){t._noSuchApi(n)},hideLoading:t._noSuchApi,popWindow:function(e){t._noSuchApi(e)},popTo:function(e,n){t._noSuchApi(n)},login:t._noSuchApi,tradePay:function(e,n){t._noSuchApi(n)},share:function(e,n){t._noSuchApi(n)},scanCode:function(e,n){if(t.scan){e=e||{};e.type=e.type||"qr";t.scan(e,function(e){e=e||{};e.code=e.code||e.qrCode||e.barCode||e.cardNumber;n(e)})}else{t._noSuchApi({},n)}}}});t.reg("setTitle",function(){return function(e,t){if(typeof e==="string"){e={text:e}}if(e&&e.text){document.title=e.text}t&&t({})}});t.reg("share.type",function(){return{AUTO:-1,WEIXIN:1,WEIBO:2,SMS:4,LAIWANG:8,LAIWANG_TIMELINE:16,WEIXIN_TIMELINE:32,COPY:64}});t.reg("calendar.add",function(e){return function(t,n){e._noSuchApi(n)}});t.reg("contacts.get",function(e){return function(t,n){e._noSuchApi(n)}});t.reg("network",function(e){var t=e._store;var n=function(e){var t=e!=="none";var n=e==="wifi";return{type:e,networkAvailable:t,isOnline:t,isWifi:n,is3G:false,is2G:false,isG:false,isH:false,isE:false}};var i=navigator.connection||navigator.webkitConnection||navigator.mozConnection||navigator.msConnection;return{getType:function(t){if(i&&i.type){t(n(i.type))}else{e._noSuchApi(t)}},watch:function(r){var o=0;if(i){var a=function(){r(n(i.type))};o=t.set(a);i.addEventListener("typechange",a)}else{e._noSuchApi(r)}return o},clearWatch:function(e,n){var r=t.get(e);if(i&&r){i.removeEventListener("typechange",r);t.remove(e)}n&&n({})}}});t.reg("vibration.vibrate",function(t){navigator.vibrate=navigator.vibrate||navigator.weblibkitVibrate||navigator.mozVibrate||navigator.msVibrate;if(!navigator.vibrate){if(e.Notification&&Notification.vibrate){navigator.vibrate=Notification.vibrate}else if(navigator.notification&&navigator.notification.vibrate){navigator.vibrate=navigator.notification.vibrate}}return function(e,n){var i={};if(navigator.vibrate){navigator.vibrate(e.duration||e)}else{t._noSuchApi(n)}n&&n(i)}});t.reg("geolocation",function(e){return{getCurrentPosition:function(t,n){t=t||{};t.timeout=t.timeout||1e3;if(navigator.geolocation&&navigator.geolocation.getCurrentPosition){navigator.geolocation.getCurrentPosition(function(e){if(e&&e.coords){n(e)}else{n({errorCode:3,errorMessage:"\u83b7\u53d6gps\u9519\u8bef"})}},function(e){n({errorCode:3,errorMessage:e.message})},t)}else{e._noSuchApi(n)}},watchPosition:function(t,n){t=t||{};t.timeout=t.timeout||1e3;if(navigator.geolocation&&navigator.geolocation.watchPosition){return navigator.geolocation.watchPosition(function(e){if(e&&e.coords){n(e)}else{n({errorCode:3,errorMessage:"\u83b7\u53d6gps\u9519\u8bef"})}},function(e){n({errorCode:3,errorMessage:e.message})},t)}else{e._noSuchApi(n);return 0}},clearWatch:function(t,n){var i={};if(navigator.geolocation&&navigator.geolocation.clearWatch){navigator.geolocation.clearWatch(t)}else{e._noSuchApi(n)}n&&n(i)}}});t.reg("audio",function(e){var t=e._store;return{play:function n(e,i){if(typeof e==="string"){e={url:e}}var r=document.createElement("audio");r.src=e.url;r.loop=!!e.loop;r.load();r.play();var o=t.set(r);i&&i({soundId:o});return o},pause:function(e,n){var i=t.get(e);if(!i){n&&n({errorCode:1,errorMessage:"\u63a5\u53e3\u4e0d\u5b58\u5728"})}else{i.pause();n&&n({})}},resume:function(e,n){var i=t.get(e);if(!i){n&&n({errorCode:1,errorMessage:"\u63a5\u53e3\u4e0d\u5b58\u5728"})}else{i.play();n&&n({})}},stop:function(e,n){var i=t.get(e);if(i){i.pause&&i.pause();t.remove(e)}n&&n({})}}});t.reg("motion",function(t){var n=t._store;var i=.8;return{watch:function(r,o){var a=0;if(e.DeviceMotionEvent){var c=function(e){var t={acceleration:e.acceleration,accelerationIncludingGravity:e.accelerationIncludingGravity};var n=t.accelerationIncludingGravity;if(n.x===null||n.y===null||n.z===null){n=t.accelerationIncludingGravity={x:0,y:0,z:0}}if(n&&(!t.acceleration||typeof t.acceleration.x!=="number")){var r=[0,0,9.81];r[0]=i*r[0]+(1-i)*n.x;r[1]=i*r[1]+(1-i)*n.y;r[2]=i*r[2]+(1-i)*n.z;t.acceleration={x:n.x-r[0],y:n.y-r[1],z:n.z-r[2]}}o(t)};a=n.set(c);e.addEventListener("devicemotion",c)}else{t._noSuchApi(o)}return a},clearWatch:function(t,i){var r=n.get(t);if(e.DeviceMotionEvent&&r){e.removeEventListener("devicemotion",r);n.remove(t)}i&&i({})}}});t.reg("orientation",function(t){var n=t._store;return{watch:function(i,r){var o=0;if(e.DeviceOrientationEvent&&"ondeviceorientation"in e){o=n.set(function(e){var t={alpha:e.alpha||0,gamma:e.gamma||0,beta:e.beta||0,absolute:!!e.absolute};r(t)});e.addEventListener("deviceorientation",n.get(o))}else{t._noSuchApi(r)}return o},clearWatch:function(t,i){var r=n.get(t);if(e.DeviceOrientationEvent&&r){e.removeEventListener("deviceorientation",r);n.remove(t)}i&&i({})}}});t.reg("shake",function(e){var t=e._store;var n=e.motion;var i=function(e,i){e=e||{};e.sensitivity=e.sensitivity||20;e.frequency=e.frequency||150;e.callbackDelay=e.callbackDelay||3e3;var o={};var a=t.set(o);var c,u;var f=function(){if(!c){c=u}var t=Math.abs(u.x-c.x+u.y-c.y+u.z-c.z);if(t>e.sensitivity){c=null;o.timeoutId=setTimeout(f,e.callbackDelay);i&&i({})}else{o.timeoutId=setTimeout(f,e.frequency)}};var s=false;o.motionWatchId=n.watch(e,function(t){if(t.errorCode){i(t);r(a)}else{u=t.accelerationIncludingGravity;if(!s){s=true;setTimeout(f,e.frequency)}}});return a};var r=function(e,i){var r=t.get(e);if(r){n.clearWatch(r.motionWatchId);clearTimeout(r.timeoutId);t.remove(e)}i&&i({})};return{watch:i,clearWatch:r,watchByMotion:i,clearMotionWatch:r}});t.reg("autoPushWindow",function(){var n=false;var i=false;var r=function(e,t){t=String(t).toLowerCase();while(e&&e.tagName.toLowerCase()!==t){e=e.parentElement}return e};var o=function(e){if(/detail(?:\.m)?\.tmall\.com/.test(e)){return false}if(t.isTaobao&&t.ua.indexOf("iPhone")>-1&&t.appinfo.ver<"5.2.8"){return false}return true};var a=function(e){var n=r(e.target,"a");if(!n||!n.href||n.getAttribute("target")!=="_blank"){return}e.preventDefault();var a=n.href;if(!o(a)){location.href=a;return false}if(!i){i=true;t.pushWindow(a,function(e){if(e.errorCode){location.href=a}})}setTimeout(function(){i=false},1e3);return false};if(e._ALI_HYBRID_AUTO_PUSH_WINDOW){t.callAfterReady("autoPushWindow.open")}return{open:function(){if(!n){if(!document.body){setTimeout(t.autoPushWindow.open,50);return}n=true;document.body.addEventListener("click",a,false)}},close:function(){if(n){n=false;document.body.removeEventListener("click",a,false)}}}});t.event.add("start",function(t){t._isReady=false;t._isInit=false;t.ready=function(e){if(t._isReady){e&&e(t)}else{t.event.add("ready",e)}};var n=document;var i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;var r=i.getElementsByTagName("base")[0];var o;var a=function(e,t,a){var c=n.createElement("script");a=a||"utf-8";c.charset=a;var u=function(e){c.onload=c.onerror=c.onreadystatechange=null;i.removeChild(c);c=null;t(e)};if("onload"in c){c.onload=u;c.onerror=function(){u(true)}}else{c.onreadystatechange=function(){if(/loaded|complete/.test(c.readyState)){u()}}}c.src=e;o=c;r?i.insertBefore(c,r):i.appendChild(c);o=null};var c=function(e,t){var n=e.splice(0,1)[0];if(!n){t&&t()}else{a(n,function(){c(e,t)})}};var u=function(){t._isReady=true;t.event.trigger("ready");t.event.remove("ready")};var f=function(){t.event.trigger("init");t.event.remove("init");t._isInit=true;if(t._ready){t._ready(u)}else{u()}};var s=function(){if(e._ALI_HYBRID_LOAD_SYNC){f();return}var n=t._config.platform;for(var i in n){var r=n[i];if(r.detect(t.ua)){t["is"+i.slice(0,1).toUpperCase()+i.slice(1)]=true;t.isWeb=false;c(r.res,f);return}}f()};t._loadScripts=c;s()});t.event.trigger("start");t.event.remove("start");if(e.KISSY&&KISSY.add){KISSY.add("mui/hybrid/index",function(){return t})}else if("function"===typeof define){define(function(){return t})}})(this);