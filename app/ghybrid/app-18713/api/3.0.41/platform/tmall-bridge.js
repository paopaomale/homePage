~function(win){if(win.TMM){return}if(typeof DeviceInfo!="object"){DeviceInfo={}}var PhoneGap={queue:{ready:true,commands:[],timer:null}};PhoneGap.Channel=function(e){this.type=e;this.handlers={};this.guid=0;this.fired=false;this.enabled=true};PhoneGap.Channel.prototype.subscribe=function(e,t,n){if(e==null){return}var i=e;if(typeof t=="object"&&e instanceof Function){i=PhoneGap.close(t,e)}n=n||i.observer_guid||e.observer_guid||this.guid++;i.observer_guid=n;e.observer_guid=n;this.handlers[n]=i;return n};PhoneGap.Channel.prototype.subscribeOnce=function(e,t){var n=null;var i=this;var a=function(){e.apply(t||null,arguments);i.unsubscribe(n)};if(this.fired){if(typeof t=="object"&&e instanceof Function){e=PhoneGap.close(t,e)}e.apply(this,this.fireArgs)}else{n=this.subscribe(a)}return n};PhoneGap.Channel.prototype.unsubscribe=function(e){if(e instanceof Function){e=e.observer_guid}this.handlers[e]=null;delete this.handlers[e]};PhoneGap.Channel.prototype.fire=function(e){if(this.enabled){var t=false;for(var n in this.handlers){var i=this.handlers[n];if(i instanceof Function){var a=i.apply(this,arguments)==false;t=t||a}}this.fired=true;this.fireArgs=arguments;return!t}return true};PhoneGap.Channel.join=function(e,t){var n=t.length;var i=function(){if(!--n){e()}};for(var a=0;a<n;a++){!t[a].fired?t[a].subscribeOnce(i):n--}if(!n){e()}};PhoneGap.available=DeviceInfo.uuid!=undefined;PhoneGap.addConstructor=function(e){PhoneGap.onPhoneGapInit.subscribeOnce(function(){try{e()}catch(t){if(typeof debug.log=="function"){debug.log("Failed to run constructor: "+debug.processMessage(t))}else{alert("Failed to run constructor: "+t.message)}}})};PhoneGap.addPlugin=function(e,t){if(!window.plugins){window.plugins={}}if(!window.plugins[e]){window.plugins[e]=t}};PhoneGap.onDOMContentLoaded=new PhoneGap.Channel("onDOMContentLoaded");PhoneGap.onNativeReady=new PhoneGap.Channel("onNativeReady");PhoneGap.onPhoneGapInit=new PhoneGap.Channel("onPhoneGapInit");PhoneGap.onPhoneGapReady=new PhoneGap.Channel("onPhoneGapReady");PhoneGap.onPhoneGapInfoReady=new PhoneGap.Channel("onPhoneGapInfoReady");PhoneGap.onResume=new PhoneGap.Channel("onResume");PhoneGap.onPause=new PhoneGap.Channel("onPause");if(typeof _nativeReady!=="undefined"){PhoneGap.onNativeReady.fire()}PhoneGap.onDeviceReady=new PhoneGap.Channel("onDeviceReady");PhoneGap.Channel.join(function(){setTimeout(function(){try{if(CallbackServer.usePolling()){PhoneGap.JSCallbackPolling()}else{PhoneGap.JSCallback()}}catch(e){console.log("Error in PhoneGap.Channel.join setTimeout")}},1);PhoneGap.onPhoneGapInit.fire();PhoneGap.onPhoneGapReady.fire()},[PhoneGap.onDOMContentLoaded,PhoneGap.onNativeReady]);PhoneGap.Channel.join(function(){navigator.notification.activityStop();PhoneGap.onDeviceReady.fire();PhoneGap.onResume.fire()},[PhoneGap.onPhoneGapReady,PhoneGap.onPhoneGapInfoReady]);document.addEventListener("DOMContentLoaded",function(){PhoneGap.onDOMContentLoaded.fire()},false);PhoneGap.m_document_addEventListener=document.addEventListener;document.addEventListener=function(e,t,n){var i=e.toLowerCase();if(i=="deviceready"){PhoneGap.onDeviceReady.subscribeOnce(t)}else{if(i=="resume"){PhoneGap.onResume.subscribe(t)}else{if(i=="pause"){PhoneGap.onPause.subscribe(t)}else{PhoneGap.m_document_addEventListener.call(document,e,t)}}}};PhoneGap.stringify=function(e){if(typeof JSON=="undefined"){var t="[";for(var n=0;n<e.length;n++){if(n>0){t=t+","}var i=typeof e[n];if(i=="number"||i=="boolean"){t=t+e[n]}else{if(e[n]instanceof Array){t=t+"["+e[n]+"]"}else{if(e[n]instanceof Object){var a=true;t=t+"{";for(var r in e[n]){if(!a){t=t+","}t=t+'"'+r+'":';var o=typeof e[n][r];if(o=="number"||o=="boolean"){t=t+e[n][r]}else{t=t+'"'+e[n][r]+'"'}a=false}t=t+"}"}else{var s=e[n].replace(/\\/g,"\\\\");s=s.replace(/"/g,'\\"');t=t+'"'+s+'"'}}}}t=t+"]";return t}else{return JSON.stringify(e)}};PhoneGap.clone=function(e){if(!e){return e}if(e instanceof Array){var t=new Array;for(var n=0;n<e.length;++n){t.push(PhoneGap.clone(e[n]))}return t}if(e instanceof Function){return e}if(!(e instanceof Object)){return e}t=new Object;for(n in e){if(!(n in t)||t[n]!=e[n]){t[n]=PhoneGap.clone(e[n])}}return t};PhoneGap.callbackId=0;PhoneGap.callbacks={};PhoneGap.callbackStatus={NO_RESULT:0,OK:1,CLASS_NOT_FOUND_EXCEPTION:2,ILLEGAL_ACCESS_EXCEPTION:3,INSTANTIATION_EXCEPTION:4,MALFORMED_URL_EXCEPTION:5,IO_EXCEPTION:6,INVALID_ACTION:7,JSON_EXCEPTION:8,ERROR:9};PhoneGap.exec=function(success,fail,service,action,args){try{var callbackId=service+PhoneGap.callbackId++;if(success||fail){PhoneGap.callbacks[callbackId]={success:success,fail:fail}}var r=""+PluginManager.exec(service,action,callbackId,this.stringify(args),true);if(r.length>0){eval("var v="+r+";");if(v.status==PhoneGap.callbackStatus.OK){if(success){try{success(v.message)}catch(e){console.log("Error in success callback: "+callbackId+" = "+e)}if(!v.keepCallback){delete PhoneGap.callbacks[callbackId]}}return v.message}else{if(v.status==PhoneGap.callbackStatus.NO_RESULT){if(!v.keepCallback){delete PhoneGap.callbacks[callbackId]}}else{console.log("Error: Status="+r.status+" Message="+v.message);if(fail){try{fail(v.message)}catch(e){console.log("Error in error callback: "+callbackId+" = "+e)}if(!v.keepCallback){delete PhoneGap.callbacks[callbackId]}}return null}}}}catch(e){console.log("Error: "+e)}};PhoneGap.callbackSuccess=function(e,t){if(PhoneGap.callbacks[e]){if(t.status==PhoneGap.callbackStatus.OK){try{if(PhoneGap.callbacks[e].success){PhoneGap.callbacks[e].success(t.message)}}catch(n){console.log("Error in success callback: "+e+" = "+n)}}if(!t.keepCallback){delete PhoneGap.callbacks[e]}}};PhoneGap.callbackError=function(e,t){if(PhoneGap.callbacks[e]){try{if(PhoneGap.callbacks[e].fail){PhoneGap.callbacks[e].fail(t.message)}}catch(n){console.log("Error in error callback: "+e+" = "+n)}if(!t.keepCallback){delete PhoneGap.callbacks[e]}}};PhoneGap.run_command=function(){if(!PhoneGap.available||!PhoneGap.queue.ready){return}PhoneGap.queue.ready=false;var e=PhoneGap.queue.commands.shift();if(PhoneGap.queue.commands.length==0){clearInterval(PhoneGap.queue.timer);PhoneGap.queue.timer=null}var t=[];var n=null;for(var i=1;i<e.length;i++){var a=e[i];if(a==undefined||a==null){a=""}if(typeof a=="object"){n=a}else{t.push(encodeURIComponent(a))}}var r="gap://"+e[0]+"/"+t.join("/");if(n!=null){var o=[];for(var s in n){if(typeof s!="string"){continue}o.push(encodeURIComponent(s)+"="+encodeURIComponent(n[s]))}if(o.length>0){r+="?"+o.join("&")}}document.location=r};PhoneGap.JSCallback=function(){var xmlhttp=new XMLHttpRequest;PhoneGap.JSCallbackPort=CallbackServer.getPort();PhoneGap.JSCallbackToken=CallbackServer.getToken();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){var msg=xmlhttp.responseText;setTimeout(function(){try{var t=eval(msg)}catch(e){console.log("Message from Server: "+msg);console.log("JSCallback Error: "+e)}},1);setTimeout(PhoneGap.JSCallback,1)}else{if(xmlhttp.status==404){setTimeout(PhoneGap.JSCallback,10)}else{console.log("The status is: "+xmlhttp.status);console.log("JSCallback Error: Request failed.");CallbackServer.restartServer();setTimeout(PhoneGap.JSCallback,100)}}}};xmlhttp.open("GET","http://127.0.0.1:"+PhoneGap.JSCallbackPort+"/"+PhoneGap.JSCallbackToken,true);xmlhttp.send()};PhoneGap.JSCallbackPollingPeriod=50;PhoneGap.JSCallbackPolling=function(){var msg=CallbackServer.getJavascript();if(msg){setTimeout(function(){try{var t=eval(""+msg)}catch(e){console.log("JSCallbackPolling Error: "+e)}},1);setTimeout(PhoneGap.JSCallbackPolling,1)}else{setTimeout(PhoneGap.JSCallbackPolling,PhoneGap.JSCallbackPollingPeriod)}};PhoneGap.createUUID=function(){return PhoneGap.UUIDcreatePart(4)+"-"+PhoneGap.UUIDcreatePart(2)+"-"+PhoneGap.UUIDcreatePart(2)+"-"+PhoneGap.UUIDcreatePart(2)+"-"+PhoneGap.UUIDcreatePart(6)};PhoneGap.UUIDcreatePart=function(e){var t="";for(var n=0;n<e;n++){var i=parseInt(Math.random()*256).toString(16);if(i.length==1){i="0"+i}t+=i}return t};PhoneGap.close=function(e,t,n){if(typeof n==="undefined"){return function(){return t.apply(e,arguments)}}else{return function(){return t.apply(e,n)}}};PhoneGap.onDOMContentLoaded.fire();PhoneGap.onNativeReady.fire();var TMM=TMM||{};TMM.getRandom=function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1);case 2:return parseInt(Math.random()*(t-e+1)+e);default:return 0}};TMM.getPara=function(e,t){t=t||location.toString();if(t.indexOf("?")==-1||t.indexOf(e+"=")==-1){return""}t=t.split("#")[0];var n=t.substring(location.href.indexOf("?")+1);var i=n.split("&");var a,r,o;for(var s=0;s<i.length;s++){a=i[s].indexOf("=");if(a==-1){continue}r=i[s].substring(0,a);o=i[s].substring(a+1);if(r==e){return unescape(o.replace(/\+/g," "))}}return""};var parseJSON=function(e){if(typeof e!=="string"){return e}try{return JSON.parse(String(e).replace(/\"\{/g,"{").replace(/\}\"/g,"}"))}catch(t){return{}}};TMM._parseJSON=parseJSON;TMM.cookie=function(e,t,n){if(typeof t!="undefined"){n=n||{};if(t===null){t="";n.expires=-1}var i="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var a;if(typeof n.expires=="number"){a=new Date;a.setTime(a.getTime()+n.expires*24*60*60*1e3)}else{a=n.expires}i="; expires="+a.toUTCString()}var r=n.path?"; path="+n.path:"";var o=n.domain?"; domain="+n.domain:"";var s=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),i,r,o,s].join("")}else{var l=null;if(document.cookie&&document.cookie!=""){var c=document.cookie.split(";");for(var u=0;u<c.length;u++){var f=c[u].trim();if(f.substring(0,e.length+1)==e+"="){l=decodeURIComponent(f.substring(e.length+1));break}}}return l}};TMM.UA={os:function(){var e=navigator.userAgent;var t=["iPhone OS ","Android ","Android/"];var n={iphone:false,android:false};var i="";var a=[];for(var r=0;r<t.length;r++){var o=e.indexOf(t[r]);if(o>-1){switch(r){case 0:n["iphone"]=true;break;case 1:n["android"]=true;break;case 2:n["android"]=true;break}var s=t[r].length;i=e.substr(o+s,6);a=i.split(/_|\./)}}var l={iphone:n["iphone"],android:n["android"],version:a,tmallApp:""};if(/AliApp\(TM\/([\d\.]+)\)/i.test(e)){l.tmallApp=RegExp.$1}else if(!/AliApp\(TM-PD/i.test(e)&&/T-UA=[^_]+_([\d\.]+)_/i.test(e)){l.tmallApp=RegExp.$1}return l}(),WindVane:function(){var e=navigator.userAgent;var t="WindVane/";var n=e.indexOf(t);if(n==-1)return null;return e.substr(n+t.length,5)}(),taobaoApp:function(){var e=navigator.userAgent;var t="AliApp(TB/";var n=e.indexOf(t);if(n==-1)return null;return e.substr(n+t.length,5)}()};TMM.APP={call:function(funName,param,success,fail,isDebug){param=param||[];if(funName=="Stats.trace"&&param.length<3){param.push("")}if(isDebug===true){success=fail=function(e){alert(typeof e=="object"?JSON.stringify([e]):e)}}if(typeof arguments[arguments.length-1]==="number"){var timeout=arguments[arguments.length-1];var noTimeout=function(e){var t=["Share.share","Application.login","Application.addShakeListener","Lottery.shake","Share.point"];return t.indexOf(e)>-1};var timeoutTimer=setTimeout(function(e){if(noTimeout(e)){return}success&&success({errorCode:5,errorMessage:"\u8c03\u7528\u8d85\u65f6"})},timeout,funName);if(typeof success=="function"){var suc=success;success=function(e){suc(e);clearTimeout(timeoutTimer);timeoutTimer=null}}if(typeof fail=="function"){var tempFail=fail;fail=function(e){tempFail(e);clearTimeout(timeoutTimer);timeoutTimer=null}}}var noHandlerCallback=function(){var e={code:1,errorCode:1,errorMessage:"You Are Not In TMALL!",ret:{retCod:1,retMsg:"You Are Not In TMALL!"}};if(fail){fail(e)}else if(success){success(e)}};if(!TMM.UA.os.tmallApp&&TMM.UA.WindVane&&window.WindVane){if(funName=="Stats.trace"||funName=="Server.HybridServer"){var mtopParam=null;if(param[1]){try{eval("mtopParam = "+param[1])}catch(e){}}else{mtopParam={}}if(TMM.UA.taobaoApp&&parseInt(TMM.UA.taobaoApp.replace(/\./g,""))>=501){window.WindVane.call("MtopWVPlugin","send",{api:"mtop.tmw."+param[0],v:"1.0",post:"1",ecode:"1",isSec:"1",param:mtopParam},success,fail)}else{window.WindVane.call("WVServer","send",{api:"mtop.tmw."+param[0],v:"1.0",post:"1",ecode:"1",isSec:"1",param:mtopParam},success,fail)}}else{noHandlerCallback()}return}else if(!TMM.UA.os.tmallApp){noHandlerCallback();return}if(TMM.UA.os.android){if(TMM.UA.os.tmallApp){if(parseFloat(TMM.UA.os.tmallApp)>=4.4){var callbackId=funName.split(".")[0]+PhoneGap.callbackId++;var successName="",failName="";PhoneGap.callbacks[callbackId]={success:function(e){success&&success(parseJSON(e&&e.message))},fail:function(e){fail&&fail(parseJSON(e&&e.message))}};successName="PhoneGap.callbacks."+callbackId+".success";failName="PhoneGap.callbacks."+callbackId+".fail";window.prompt("js-appcall.html?"+funName+":"+encodeURIComponent(PhoneGap.stringify(param))+":"+successName+":"+failName)}else if(typeof PluginManager!=="undefined"){funName=funName.split(".");var suc=null;if(!isDebug){if(success){suc=function(data){try{eval("var json="+data);success(json)}catch(e){console.log("TmmError:"+e);if(fail)fail()}}}}else{suc=success}PhoneGap.exec(suc,fail,funName[0],funName[1],param)}else{success&&success({errorCode:403,errorMesage:"low version app or PluginManager is undefined"})}}else{success&&success({errorCode:404,errorMesage:"not support app"})}}else{var iframe=document.createElement("iframe");var callbackId=funName.split(".")[0]+PhoneGap.callbackId++;var successName="",failName="";if(success||fail){PhoneGap.callbacks[callbackId]={success:function(e){success&&success(e);try{iframe.parentNode.removeChild(iframe)}catch(t){}},fail:function(e){fail&&fail(e);try{iframe.parentNode.removeChild(iframe)}catch(t){}}};successName="PhoneGap.callbacks."+callbackId+".success";failName="PhoneGap.callbacks."+callbackId+".fail"}iframe.setAttribute("src","js-appcall.html?"+funName+":"+encodeURIComponent(PhoneGap.stringify(param))+":"+successName+":"+failName);iframe.style.display="none";document.body.appendChild(iframe);iframe.onload=function(){try{var json=iframe.contentDocument.body.innerText||iframe.contentDocument.body.textContent;eval("json = "+json)}catch(e){json={errorCode:3,errorMessage:"invalid data"}}if(successName)eval(successName+"(json)")}}},update:function(){if(TMM.UA.os.iphone){self.location="http://itunes.apple.com/cn/app/id518966501?mt=8"}else{TMM.APP.call("Application.update",[false])}}};TMM.Device={motion:function(e,t){if(!window.DeviceMotionEvent)return;var n={last_update:0,x:null,y:null,z:null,last_x:null,last_y:null,last_z:null};window.addEventListener("devicemotion",function(i){var a=i.accelerationIncludingGravity;var r=(new Date).getTime();if(r-n.last_update>100){var o=r-n.last_update;n.last_update=r;n.x=a.x;n.y=a.y;n.z=a.z;var s=(Math.abs(n.x-n.last_x)+Math.abs(n.y-n.last_y)+Math.abs(n.z-n.last_z))/o*1e4;if(s>e){t()}n.last_x=n.x;n.last_y=n.y;n.last_z=n.z}},false)},vibrate:function(e,t){if(t){TMM.APP.call("Notification.vibrate",[500])}else if(navigator.vibrate){navigator.vibrate(500)}}};TMM.Log={sprefer:function(e){var t="log_"+(new Date).getTime();var n=window[t]=new Image;n.onload=n.onerror=function(){window[t]=null};n.src="http://m.tmall.com/web_channel.htm?url=/act/tmm-blank.php&sprefer="+e+"&t="+(new Date).valueOf();n=null}};win.PhoneGap=PhoneGap;win.TMM=TMM}(window);
!function(e,t){function n(e,t){e=e.toString().split("."),t=t.toString().split(".");for(var n=0;n<e.length||n<t.length;n++){var i=parseInt(e[n],10),a=parseInt(t[n],10);if(window.isNaN(i)&&(i=0),window.isNaN(a)&&(a=0),a>i)return-1;if(i>a)return 1}return 0}var i=e.Promise,a=e.document,r=e.navigator.userAgent,o=/Windows\sPhone\s(?:OS\s)?[\d\.]+/i.test(r)||/Windows\sNT\s[\d\.]+/i.test(r),s=o&&e.WindVane_Win_Private&&e.WindVane_Win_Private.call,c=/iPhone|iPad|iPod/i.test(r),l=/Android/i.test(r),u=r.match(/WindVane[\/\s](\d+[._]\d+[._]\d+)/),f=Object.prototype.hasOwnProperty,d=t.windvane=e.WindVane||(e.WindVane={}),p=(e.WindVane_Native,1),h=[],m=3,g="hybrid",v="wv_hybrid",w="iframe_",b="suc_",y="err_",_="defer_",P="param_",C="chunk_",A=6e5,k=6e5,S=6e4;u=u?(u[1]||"0.0.0").replace(/\_/g,"."):"0.0.0";var W={isAvailable:1===n(u,"0"),call:function(e,t,n,a,r,o){var s,c;return"number"==typeof arguments[arguments.length-1]&&(o=arguments[arguments.length-1]),"function"!=typeof a&&(a=null),"function"!=typeof r&&(r=null),i&&(c={},c.promise=new i(function(e,t){c.resolve=e,c.reject=t})),s=o>0?setTimeout(function(){W.onFailure(s,{ret:"HY_TIMEOUT"})},o):T.getSid(),T.registerCall(s,a,r,c),T.registerGC(s,o),T.callMethod(e,t,n,s),c?c.promise:void 0},fireEvent:function(e,t,n){var i=a.createEvent("HTMLEvents");i.initEvent(e,!1,!0),i.param=T.parseData(t||T.getData(n)),a.dispatchEvent(i)},getParam:function(e){return T.getParam(e)},setData:function(e,t){T.setData(e,t)},onSuccess:function(e,t){T.onComplete(e,t,"success")},onFailure:function(e,t){T.onComplete(e,t,"failure")}},T={params:{},chunks:{},calls:{},getSid:function(){return Math.floor(Math.random()*(1<<50))+""+p++},buildParam:function(e){return e&&"object"==typeof e?JSON.stringify(e):e||""},getParam:function(e){return this.params[P+e]||""},setParam:function(e,t){this.params[P+e]=t},parseData:function(e){var t;if(e&&"string"==typeof e)try{t=JSON.parse(e)}catch(n){t={ret:["WV_ERR::PARAM_PARSE_ERROR"]}}else t=e||{};return t},setData:function(){this.chunks[C+sid]=this.chunks[C+sid]||[],this.chunks[C+sid].push(chunk)},getData:function(e){return this.chunks[C+e]?this.chunks[C+e].join(""):""},registerCall:function(e,t,n,i){t&&(this.calls[b+e]=t),n&&(this.calls[y+e]=n),i&&(this.calls[_+e]=i)},unregisterCall:function(e){var t=b+e,n=y+e,i=_+e,a={};return this.calls[t]&&(a.success=this.calls[t],delete this.calls[t]),this.calls[n]&&(a.failure=this.calls[n],delete this.calls[n]),this.calls[i]&&(a.deferred=this.calls[i],delete this.calls[i]),a},useIframe:function(e,t){var n=w+e,i=h.pop();i||(i=a.createElement("iframe"),i.setAttribute("frameborder","0"),i.style.cssText="width:0;height:0;border:0;display:none;"),i.setAttribute("id",n),i.setAttribute("src",t),i.parentNode||setTimeout(function(){a.body.appendChild(i)},5)},retrieveIframe:function(e){var t=w+e,n=a.querySelector("#"+t);h.length>=m?a.body.removeChild(n):h.push(n)},callMethod:function(t,n,i,a){if(i=T.buildParam(i),o)s?e.WindVane_Win_Private.call(t,n,a,i):this.onComplete(a,{ret:"HY_NO_HANDLER_ON_WP"},"failure");else{var r=g+"://"+t+":"+a+"/"+n+"?"+i;if(c)this.setParam(a,i),this.useIframe(a,r);else if(l){var u=v+":";window.prompt(r,u)}else this.onComplete(a,{ret:"HY_NOT_SUPPORT_DEVICE"},"failure")}},registerGC:function(e,t){var n=this,i=Math.max(t||0,A),a=Math.max(t||0,S),r=Math.max(t||0,k);setTimeout(function(){n.unregisterCall(e)},i),c?setTimeout(function(){n.params[P+e]&&delete n.params[P+e]},a):l&&setTimeout(function(){n.chunks[C+e]&&delete n.chunks[C+e]},r)},onComplete:function(e,t,n){clearTimeout(e);var i=this.unregisterCall(e),a=i.success,r=i.failure,o=i.deferred;t=t?t:this.getData(e),t=this.parseData(t);var s=t.ret;"string"==typeof s&&(t=t.value||t,t.ret||(t.ret=[s])),"success"===n?(a&&a(t),o&&o.resolve(t)):"failure"===n&&(r&&r(t),o&&o.reject(t)),c?(this.retrieveIframe(e),this.params[P+e]&&delete this.params[P+e]):l&&this.chunks[C+e]&&delete this.chunks[C+e]}};for(var I in W)f.call(d,I)||(d[I]=W[I])}(window,window.lib||(window.lib={}));
!function e(t,n,i){function a(o,s){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return a(n?n:e)},l,l.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(e,t,n){function i(e){return"string"==typeof e}function a(e){return"number"==typeof e}function r(e){return"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return e&&function(n){n=n||{},n.errorCode=0,n.errorMessage="",t&&(n=t(n)),e(n)}}function s(e){return e&&function(t){var n=6,a=i(t)?t:t.ret;t&&d[a]>0&&(n=d[a]);var o=r(t)?t:{};o.errorCode=n,o.errorMessage=a,e(o)}}function c(e,t){return e&&function(n){if("string"==typeof n)try{n=JSON.parse(n)}catch(i){}d[String(n.ret)]?s(e)(n):o(e,t)(n)}}function l(e){return function(t,n){Ali.callWindVane(e,t,n)}}function u(e){var t=e.createWatchAPI=function(t){var n=[],i=function(e){for(var i,a=t.resultProcessor?t.resultProcessor(e):e,r=0;i=n[r];r+=1)i(a)};return{watch:function(a,r){return 0===n.length&&(e.callWindVane(t.watchAPI,t.optProcessor(a),function(e){e.errorCode&&r(e)}),document.addEventListener(t.evtName,i,!1)),n.push(r),t.name+"#"+(n.length-1)},clearWatch:function(i,a){if(i=String(i).split("#"),2===i.length&&(i=parseInt(i[1],10)),"number"==typeof i&&n.splice(i,1),0===n.length){var r=t.clearWatchAPI||t.watchAPI;e.callWindVane(r,{on:!1},a)}else a({errorCode:0})}}};e.toast=function(t,n){var a=i(t)?t:t&&t.text,r={message:a,duration:Number(t.duration)/1e3||.8};e.callWindVane("WVUIToast.toast",r,n)},e.showLoading=function(t,n){e.callWindVane("WVUI.showLoadingBox",{},n)},e.hideLoading=function(t){e.callWindVane("WVUI.hideLoadingBox",{},t)},e.photo=function(t,n){t=t||{},t.mode=t.src,"gallary"===t.mode&&(t.mode="photo"),t.type=t.type||"1",t.mask&&(t.maskImg=t.mask.src||t.maskImg||"",t.maskWidth=t.mask.width||t.maskWidth||640,t.maskHeight=t.mask.height||t.maskHeight||640),e.callWindVane("WVCamera.takePhoto",t,n,function(e){return e.photo=e.resourceURL,e})},e.contacts={askAuth:function(t){e.callWindVane("WVContacts.askAuth",{},t)},getAuthStatus:function(t){e.callWindVane("WVContacts.authStatus",{},t)},get:function(t,n){e.callWindVane("WVContacts.choose",{},n,function(e){var t=[{name:e.name,phoneNumber:e.phone,phone:e.phone,email:e.email}];return e.results=t,e})},find:function(t,n){e.callWindVane("WVContacts.find",t,n,function(e){return e.results=e.contacts,e})}},e.geolocation={getCurrentPosition:function(t,n){t=t||{},t.enableHighAcuracy=!!t.enableHighAcuracy,t.address=!!t.address,e.callWindVane("WVLocation.getLocation",t,n,function(e){var t=e.address,n=e.coords;return t&&"object"==typeof t&&(e.city=t.city,e.cityCode=t.cityCode,e.province=t.province,e.address=t.addressLine),n&&(n.longitude=parseFloat(n.longitude),n.latitude=parseFloat(n.latitude),n.accuracy=parseFloat(n.accuracy)),e})},searchLocation:function(t,n){e.callWindVane("WVLocation.searchLocation",t,n)}},e.network={getType:function(t){e.callWindVane("WVNetwork.getNetworkType","",t,function(e){var t=e.network||e.type||"",n={errorCode:0,type:t,isWifi:!1,is2G:!1,is3G:!1,isOnline:!/^(?:none|\s*)$/i.test(t)};return/WIFI/i.test(t)?n.isWifi=!0:/GPRS|EDGE|CDMA/i.test(t)?n.is2G=!0:/UMTS|HSDPA|EVDO/i.test(t)&&(n.is3G=!0),n.isE=n.isG=n.isH=!1,n["is"+n.type.toUpperCase()]=!0,n})}},e.shake=t({name:"shake",watchAPI:"WVMotion.listeningShake",evtName:"motion.shake",optProcessor:function(e){return e=e||{},e.on=!0,e}}),e.blow=t({name:"blow",watchAPI:"WVMotion.listenBlow",clearWatchAPI:"WVMotion.stopListenBlow",evtName:"motion.blow",optProcessor:function(e){return e=e||{},e.on=!0,e}}),e.vibration={vibrate:function(t,n){t=a(t)?{duration:t}:t,e.callWindVane("WVMotion.vibrate",t,n)}},e.pushWindow=function(t,n){i(t)&&(t={url:t}),/^[\/\.]/.test(t.url)&&(t.url=f(t.url)),e.callWindVane("Base.openWindow",t,n)},e.captureScreen=function(t,n){t=t||{},t.inAlbum=t.inAlbum?"true":"false",e.callWindVane("WVScreen.capture",t,n)},e.writeFile=l("WVFile.write"),e.readFile=l("WVFile.read"),e.beep=l("WVNotification.beep");var n=/:\s*"(0|false|true|[1-9]\d*)"/g;e.mtop=function(t,i){t.timer=t.timer||t.timeout,t.param=t.param||t.data;var a=t.isFormatString?function(e){try{var t=JSON.stringify(e).replace(n,":$1");e=JSON.parse(t)}catch(i){}return e}:null;e.callWindVane("MtopWVPlugin.send",t,i,a)}}var d={HY_SUCCESS:0,HY_NO_HANDLER:1,HY_PARAM_ERR:2,HY_UNKNOWN_ERR:3,HY_NO_PERMISSION:4,HY_TIMEOUT:5,HY_FAILED:6,HY_CLOSED:7},f=function(e){var t=document.createElement("a");return t.href=e,e=t.href,t=null,e};t.exports={mixin:u,wrapSuccess:o,wrapError:s,wrapResult:c,createNormalAPI:l}},{}],2:[function(e,t,n){!function(t,n,i){if(t&&t.navigator&&/WindVane[\/\s]([\d\.\_]+)/i.test(t.navigator.userAgent)){var a=e("./base");a.mixin(i),i.callWindVane=function(e,t,n,i,r){e=e.split("."),WindVane.call(e[0],e[1],t,a.wrapSuccess(n,i),a.wrapError(n),r)}}}(window,window.lib||(window.lib={}),window.Ali||(window.Ali={}))},{"./base":1}]},{},[2]);
(function(e){var t=navigator.userAgent;if(!/T-UA/i.test(t)||/AliApp\(TM-PD\/([\d\.]+)\)/i.test(t)){return}var n=location.host.match(/waptest|wapa/i);n=n&&n[0]||"m";function i(e){return typeof e==="string"}function a(e){return typeof e==="number"}function r(e){return Object.prototype.toString.call(e)==="[object Array]"}function o(e,t,n,i,a){if(typeof TMM!="undefined"&&TMM&&TMM.APP&&TMM.APP.call){TMM.APP.call(e,t,s(n,a),c(i,n))}else{n&&n({errorCode:3,errorMessage:"FAILED"})}}function s(e,t){return(e||t)&&function(n){n=t&&t(n)||n;n.errorCode=n.errorCode||0;n.errorMessage=n.errorMessage||"\u8c03\u7528\u6210\u529f";e&&e(n)}}function c(e,t){return function(n){var i={};if(n&&n.ret){i.errorCode=n.ret.retCod||n.ret.retCode;i.errorMessage=n.ret.retMsg;if(i.errorCode==-1&&i.errorMessage=="Unimplemented method"){i.errorCode=1;i.errorMessage="\u63a5\u53e3\u4e0d\u5b58\u5728"}}else{i.errorCode=1;i.errorMessage="\u63a5\u53e3\u4e0d\u5b58\u5728";if(typeof n=="object"){i.errorCode=n.code||3;i.errorMessage=n.errorMessage||"\u672a\u77e5\u9519\u8bef"}}if(e){e(i)}else if(t){t(i)}}}var l=0;function u(){l++;return l}var f=e.Ali=e.Ali||{};f.ua=navigator.userAgent;f.appinfo=function(){var e=/AliApp\(TM\/([\d\.]+)\)/i.exec(f.ua);return{engine:"tmm",name:"tmall",engineVer:e[1],ver:e[1]}}();f.call=o;f.toast=function(e,t){if(!e){return}var n=i(e)?{text:e}:e;n.duration=n.duration||2e3;if(parseFloat(TMM.UA.os.tmallApp)>4.3){o("Window.toast",[n],t,t)}else{var a='<div id="Ali-toast" style="position:absolute;top:0;left:0;width:100%;height:100%;text-align:center;z-index:99;" ontouchstart="event.preventDefault()">            <div style="margin:50% 10px;background:#000;-webkit-border-radius:8px;display:inline-block;min-width:80px;">                <div style="font-size:16px;color:#fff;word-break:break-all;padding:8px;">'+n.text+"</div>            </div>        </div>";var r=document.querySelector("#Ali-toast");if(r){r.parentNode.removeChild(r)}document.body.insertAdjacentHTML("beforeEnd",a);r=document.querySelector("#Ali-toast");r.style.top=window.scrollY+"px";setTimeout(function(){try{r.parentNode.removeChild(r);r=null}catch(e){}},e.duration||2e3);t&&t({})}};f.setTitle=function(e,t){var n=i(e)?e:e&&e.text;o("Window.setTitle",[n]);t&&t({})};f.showTitle=function(e){var t=!TMM.UA.os.iphone?e:function(t){if(window.Event&&window.dispatchEvent){window.dispatchEvent(new Event("resize"))}e(t)};o("Window.showTitle",[],t,e)};f.hideTitle=function(e){var t=!TMM.UA.os.iphone?e:function(t){if(window.Event&&window.dispatchEvent){window.dispatchEvent(new Event("resize"))}e(t)};o("Window.hideTitle",[],t,e)};f.showLoading=function(e,t){if(TMM.UA.os.android&&!e){e="\u52a0\u8f7d\u4e2d..."}o("Window.showProgress",[e]);t&&t({})};f.hideLoading=function(e){o("Window.hideProgress",[]);e&&e({})};f.pushWindow=function(e,t){var n=i(e)?e:e&&e.url;if(!n){t&&t({errorCode:2,errorMessage:"\u53c2\u6570\u65e0\u6548"})}var a=document.createElement("a");a.href=n;n=a.href;a=null;o("Logic.triggerAction",["link:url="+n]);t&&t({})};f.popWindow=function(e){o("Window.back",[],e);e&&e({})};f.popTo=function(e){o("Window.back",[]);e&&e({})};f.login=function(e){o("Application.forceLogin",[true],e)};f.h5TradePay=function(e,t){var i="http://d."+n+".taobao.com/goAlipay.htm?simplepay=1&needpop=1";for(var a in e){i+="&"+a+"="+encodeURIComponent(e[a])}f.pushWindow(i);t&&t({})};f.tradePay=function(e,t){if(e.orderStr){if(e.useSimple){o("Application.alipaySimplePurchase",[e.orderStr],t)}else{o("Application.checkPayPasswordAction",[e.orderStr],t)}}else if(e.tradeNO){o("Application.alipayPurchase",[e.tradeNO,e.bizType||""],t)}else{t({errorCode:2,errorMessage:"\u5fc5\u987b\u4f20\u5165 tradeNO \u6216 orderStr \u53c2\u6570"})}};f.orientation={watch:function(e,t){var n=u();var i=a(e)?e:e?e.duration:100;o("Orientation.watchOrientation",["orientation-"+n,i],t,null,function(e){try{var t=e.data;if(TMM.UA.os.iphone&&parseFloat(TMM.UA.os.tmallApp)<4.3){var n=t.alpha;t.alpha=t.gamma;t.gamma=n}else if(TMM.UA.os.android&&typeof t["beta "]!="undefined"){t.beta=t["beta "];delete t["beta "]}if(TMM.UA.os.iphone){t.alpha=t.alpha>0?t.alpha:360+t.alpha}return t}catch(i){return{errorCode:3,errorMessage:"\u53d1\u751f\u672a\u77e5\u9519\u8bef"}}});return n},clearWatch:function(e,t){o("Orientation.clearWatch",["orientation-"+e]);t&&t({})}};f.vibration={vibrate:function(e,t){e=a(e)?{duration:e}:e;o("Notification.vibrate",[e.duration||500]);t&&t({})}};f.blow={watch:function(e){o("Blow.watchBlow",[],e,e);return u()},clearWatch:function(e){o("Blow.clearWatch",[],e,e)}};f.network={getType:function(e){var t=function(e){var t=e.type;return{type:t,isOnline:!/^(?:none|\s*)$/i.test(t),isWifi:t==="WIFI",is3G:t==="3G",is2G:t==="2G",isG:t==="G",isH:t==="H",isE:t==="E"}};var n=function(){o("Application.networkType",[],e,null,t)};if(window.WindVane){WindVane.call("WVNetwork","getNetworkType",{},function(n){e(t(n))},function(e){n()})}else{n()}},watch:function(e){var t=u();o("Network.watch",["network-"+t],e);return t},clearWatch:function(e,t){o("Network.clearWatch",["network-"+e],t)}};f.motion={watch:function(e,t){var n=u();o("Motion.watchAcceleration",["motion-"+n],t,null,function(e){var t={errorCode:e.ret&&e.ret.retCod||e.code||0,errorMessage:e.ret&&e.ret.retMsg||""};t.accelerationIncludingGravity=t.acceleration=e.data||{};return t});return n},clearWatch:function(e,t){o("Motion.clearWatch",["motion-"+e]);t&&t({})}};f.audio={play:function(e,t){var n=e.soundId||u();var a=i(e)?e:e&&e.url;o("Audio.play",["audio-"+n,a,!!e.loop]);t&&t({});return n},pause:function(e,t){o("Audio.pause",["audio-"+e],t)},resume:function(e,t){o("Audio.resume",["audio-"+e],t)},stop:function(e,t){o("Audio.stop",["audio-"+e]);t&&t({})}};var d=function(e){if(!e||typeof e==="number"){return e}var t=Date.parse(e);if(!t){var n=String(e).split(/[- :]/);t=new Date(n[0],parseInt(n[1],10)-1,n[2],n[3],n[4],n[5]).getTime()}return t};var p=function(e){e={title:e.title,url:e.link||e.url||location.href,startDate:d(e.startDate),endDate:d(e.endDate),invokeInterval:e.alarmOffset,biz_name:e.biz_name,biz_type:e.biz_type,biz_id:e.biz_id,logoImage:e.logoImage,subscribed:true,resource:e.biz_name,sourceId:e.biz_id,sourceType:e.biz_type};if(!e.endDate||e.endDate===e.startDate){e.endDate=e.startDate+1e3}return e};f.calendar={add:function(e,t){e=p(e);f.callWindVane("TMMageBridge.addNotification",e,t)},remove:function(e,t){e=p(e);f.callWindVane("TMMageBridge.removeNotification",e,t)},check:function(e,t){var n=false;if(r(e)){n=true;for(var i=0;i<e.length;i++){e[i]=p(e[i])}}else{e=[p(e)]}f.mtop({api:"mtop.tmall.mage.batchQuery",v:"1.0",ecode:1,data:{dataJson:JSON.stringify(e)}},function(i){if(i.errorCode||!i.data){t(i);return}var a=i.data.list;if(e.length===1&&!a.length){i.errorCode=6;i.errorMessage="calendar is not exist";i.success=false;t(i);return}var r={result:[]};for(var o=0;o<e.length;o++){var s=false;for(var c=0;c<a.length;c++){if(String(e[o].sourceId)===String(a[c].sourceId)){s=true;break}}r.result.push({success:s})}t(n?r:r.result[0])})}};f.photo=function(e,t){e=e||{};if(e.src==="gallary"){e.src="photo"}else if(e.src==="camera"){e.src="backCamera"}if(e.mask){e.url=e.mask.src||e.url||"";e.width=e.mask.width||e.width||640;e.height=e.mask.height||e.height||640}var n=[e.url||"",e.width||0,e.height||0,!!e.addFilter,e.src||""];o("Application.getCameraPic",n,t,function(e){if(e===""){t&&t({errorCode:6,errorMessage:"\u7528\u6237\u53d6\u6d88"})}else{if(typeof e=="object"&&e.code){e.errorCode=e.code}t&&t(e)}},function(e){var t=e;if(e.data){t={errorCode:e.ret.retCod,errorMessage:e.ret.retMsg,photo:e.data.image}}return t})};f.contacts=f.contacts||{};f.contacts.get=function(e,t){o("Contact.getContact",[],t,t,function(e){try{if(TMM.UA.os.iphone){e.results=[{name:e.data.name,phoneNumber:r(e.data.phone)?e.data.phone[0]:e.data.phone}]}else{e.results=[{name:e.name,phoneNumber:e.number}]}}catch(t){console.warn("format result error",t)}return e})};var h={"-1":-1,1:0,2:1,8:3,16:4,32:5};f.share=function(e,t){e.text=e.text||"";e.image=e.image||"";e.shareType=h[e.shareType];if(typeof e.shareType==="undefined"){e.shareType=-1}e.url=e.url||"";e.title=e.title||"";if(!e["share-scene"]){delete e["share-scene"]}if(parseFloat(f.appinfo.ver)>=5){e["all-link"]=e.url;if(e.image){e["pc-image"]=e["mobile-image"]=e.image}e["share-title"]=e.title;e["share-intro"]=e.text;if(parseFloat(f.appinfo.ver)>=5.15){if(f.isIOS){e={item:e}}f.callWindVane("TMShare.doShare",e,t)}else{o("Share.newShare",[e],t)}return}var n=[e.text,e.image,e.shareType,e.url,e.title];o("Share.share",n);t&&t({})};function g(e,t){if(!t||!e){return}var n=document.createElement("meta");n.setAttribute("content",t);n.setAttribute("name",e);document.head.appendChild(n)}var v={"share-scene":"","share-bizid":"","pc-image":"image","mobile-image":"image","iphone-link":"url","iphone-version":"","android-link":"url","android-version":"","tmallapp-link":"url","ipad-link":"url","ipad-version":"","apad-link":"url","apad-version":"","aliapp-link":"url","mobile-link":"url","pc-link":"url","all-link":"url","share-title":"title","share-intro":"text","share-bizlogo":"logo","require-tmall":""};f.setNavShare=function(e){var t={};for(var n in v){t[n]=e[n]||e[v[n]];if(t[n]){g(n,t[n])}}};f.scanCode=function(e,t){if(TMM.UA.os.android){o("Scancode.scan",[],t)}else{WindVane.call("Scancode","scan",e,function(e){t(e)},function(e){t({errorCode:1,errorMessage:e})})}};f.getUtdid=function(e){o("Application.getUtdId",[],e,e,function(e){e.utdid=e.utdId||e.data&&e.data.utdId;return e})}})(window);