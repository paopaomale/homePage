!function(a,b){var c=a.lazyload,d=a.env,e=window.WindVane,f=d.os,g=a.version(f.version),h=window.navigator.userAgent,i=h&&null!=h.match(/Nokia/g),j=document.getElementById("J_loading"),k=["a.tbcdn.cn","b.tbcdn.cn","gqrcode.alicdn.com","g.tbcdn.cn","m.alicdn.com","assets.alicdn.com","g.alicdn.com","ag.alicdn.com","a.dd.alicdn.com","uaction.alicdn.com","wwc.alicdn.com","osdes.alicdn.com","download.taobaocdn.com","gjusp.alicdn.com","cbu01.alicdn.com"],l=window.console||{},m=l.oldError,n=[].slice;l.error=function(){var a=n.call(arguments);m&&m.apply(l,a);for(var b,c="",d=0,f=a.length;f>d;d++){if(b=a[d],"string"!=typeof b&&"number"!=typeof b)try{b=JSON.stringify(b)}catch(g){}"string"==typeof b&&(b=b.replace(/</g,"&lt;").replace(/>/g,"&gt;")),0==d?c=b:c+=" "+b}window.navigator.userAgent.match(/WindVane/i)&&e.call("tlogBridge","loge",{tag:"detail.tuwenxiangqing",content:c},function(a){},function(a){})};var o={fireEvent:function(a,b,c){var d=document.createEvent("HTMLEvents");if(d.initEvent(b,!0,!0),"object"==typeof c)for(var e in c)d[e]=c[e];a.dispatchEvent(d)},renderFail:function(a){var b=a.type,c=a.title,d=a.content,e=a.btn,f=b&&"error"===b?!0:!1,g='<div class="errorMsg '+(a.extraCls||"")+'">';return(c||f)&&(g+='<p class="emg-tl">'+(c||"数据加载失败")+"</p>"),(d||f)&&(g+='<p class="emg-ct">'+(d||"请检查您的手机是否联网点击按钮尝试重新加载")+"</p>"),(e||f)&&(g+='<a class="emg-bt">'+(e||"重新加载")+"</a>"),g+="</div>"},loadHide:function(){j&&(j.style.display="none")},loadShow:function(){j&&(j.style.display="")},disposeUrl:function(a,b){if(a){var e=a.lastIndexOf("_."),h=-1!=e?a.slice(e+2):null;null!=a.match(/(http(s*):)?\/\/.*(?:alicdn|taobaocdn)\.com\/.*\.(?:jpg|jpeg|webp)$/gi)&&(f.isAndroid&&g.gte("4.0")&&!i&&"Windows Phone"!=d.aliapp.platform?h&&"webp"==h.toLowerCase()||(a+="_.webp"):h&&"webp"==h.toLowerCase()&&(a=a.slice(0,-6)));var j=a.match(/\/\/(.*?)\//);return a=a.replace(/(http(s*):)?\/\//,"//"),j&&-1==k.indexOf(j[1]),c.setImgSrc(a,b)}},aplus:function(a){a=a||{};var b=a.apname,c=a.apdata,d=[];if(c)for(var e in c)d.push(e+"="+c[e]);d.push("cache="+parseInt((Math.random()+1)*Date.now()));var f=new Image;f.onload=function(){f.onload=null,f=null},f.src=window.location.protocol+"//wgo.mmstat.com/"+b+"?"+d.join("&")},reload:function(){location.reload()},throttle:function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:new Date,g=null,f=a.apply(d,e)};return function(){var j=new Date;h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},escapeEntity:function(a){if(!a)return"";var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return(""+a).replace(/[&<>"']/g,function(a){return b[a]})},tracker:function(a,b,c,d){!function(){window.goldlog?window.goldlog.record(a,b,c,d):setTimeout(arguments.callee,200)}()}};b.Tool=o}(window.lib,window.detailNative||(window.detailNative={})),function(a,b,c){function d(a){if(!a)return"";var b=750;a=a.replace(/<img.+?>/gi,function(a){b=750;var c,d,e;a=a.replace(/style="(.*[;\s]+)?(width\:\s*(\d+\.?\d+)px\s*;).*?"/,function(a,c,d,e){return b=parseInt(e,10),a.replace(d,"")}),a=a.replace(/style="(.*[;\s]+)?(height\:\s*(\d+\.?\d+)px\s*;).*?"/,function(a,b,c,d){return a.replace(c,"")}),a=a.replace(/size="\d+x\d+"/,function(a){var f=a.slice(6,-1).split("x"),g=f[0],h=f[1];return g>b&&(h=Math.round(b/(g/h)),g=b,c="620x10000",d=!0),e={width:g},'width="'+g+'" height="'+h+'"'}),d&&(a=a.replace(/(width|height)+\=\"(\d*(%|px)?)+\"/g,function(a,b,c){return"width"==b&&c!=e.width||"height"==b&&c!=e.height?"":a})),a=a.replace(/class="(.*?)"/,function(a){var b=a.slice(7,-1);return"lb-lazy"===b?a:""});var f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=",g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAHlBMVEXo6Ojm5ubk5OTh4eHg4ODl5eXj4+Pe3t7f39////+KCHIDAAAAPUlEQVR42u3QqQEAMAhDUe6y/8Q9FmgkIk+gvglCNJnao/Lj4Uf4P7R7EwzLgLBWiSYSdkeYw2Pw9xANtgE5iQCzuXmRzAAAAABJRU5ErkJggg==";return null!=a.match(/data-ks-lazyload="(.+?)"/gi)?(a=a.replace(/src="(.+?)"/gi,function(a){return'src="'+g+'"'}),a=a.replace(/data-ks-lazyload="(.+?)"/gi,function(a){var b=j(a.slice(18,-1),c);return'data-img="'+b+'" class="lb-lazy"'})):null==a.match(/data-img="(.+?)"/)&&(a=a.replace(/src="(.+?)"/gi,function(a){var b=j(a.slice(5,-1),c);return'data-img="'+b+'" src="'+f+'" class="des-alimg lb-lazy"'})),a});var c=document.body.offsetWidth,d=document.createDocumentFragment(),e=document.createElement("div"),f=[];e.innerHTML=a,d.appendChild(e);for(var g=e.childNodes,h=0;h<g.length;h++){var i=g[h];if(i.outerHTML){var k=i.getAttribute("style");if(i.width&&Number(i.width)>c&&i.removeAttribute("width"),i.offsetWidth>c&&i.removeAttribute("width"),k&&k.indexOf("width")>=0){var l=k.match(/width:([^\}]+)\;/),m=l&&l[1]?l[1].replace("px",""):0;Number(m)>c&&(i.width="")}f.push('<div class="page_box">'+i.outerHTML+"</div>")}else f.push('<div class="page_box">'+i.textContent.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div>")}return f.join("")}function e(a){var c=(a.anchors,document.createElement("div"));c.className="des",c.setAttribute("id","J_des");var e=this,f=!0;e.addEvent=function(){var a=c.querySelector("#J_fullContent");a&&g.isIOS&&a.addEventListener("click",function(a){var b=a.target,c=b.parentNode;if("a"!==c.tagName.toLowerCase()&&"img"===b.tagName.toLowerCase()){var d=l.clearImgSrc(b.src);if(null!=d.match(/^http(s*):\/\/.+\.(jpg|png).*/)){var e={images:[d]};k.call("WVUIImagepreview","showImagepreview",e,function(a){},function(a){})}}},!1)},e.syncTemplate=function(){var g=e.data,h="";g&&(h+='<div id="J_fullContent">',h+=d(g),h+="</div>"),a.fromMobile||"TB-PD"!=b.env.aliapp.appname,c.innerHTML=h,i(c,"hm:render"),f&&(e.addEvent(),f=null)};var h;Object.defineProperty(e,"data",{get:function(){return h},set:function(a){if(!a)throw new Error("Non expected value");h=a,e.syncTemplate()}}),a.data&&(e.data=a.data),e.element=c}var f=a.document,g=b.env.os,h=c.Tool,i=h.fireEvent,j=h.disposeUrl,k=a.WindVane,l=b.lazyload;f.documentElement.clientWidth-8;c.Full=e}(window,window.lib,window.detailNative||(window.detailNative={})),function(a,b){function c(b){var c=b.itemId,i=(b.sellerId,b.title),j=b.api,k=b.version||"1.0",l=b.params,m=b.pageSize||20,n=b.isShowError,o=document.createElement("div");o.className="rmsp";var p=this;p.fetch=function(){n&&(o.innerHTML="",d.loadShow()),a.mtop.request({api:j,v:k,ecode:0,data:{albumId:"REC_SHOP",pageSize:m,currentPage:"1",param:l}},function(a,b){var c=a.data.model.result,e=c.recommedResult?c.recommedResult:null;c&&e&&0!==e.length?p.data=c:n&&p.syncFail(1),n&&d.loadHide()},function(a,b){if(o.className="",n){var c=(a.ret,0);p.syncFail(c),d.loadHide()}})},p.syncTemplate=function(){function a(a,b){i=a.groupTitle;var c,e=a.itemList,f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=",j="";i&&(o.className="rmsp rmsp-shop",j+="<div class=hr-box data-title="+i+"></div>"),j+='<div class="rmsp-ul">';for(var k=0,l=e.length;l>k;k++)if("3"==e[k].type)j+='<div class="rmsp-shop-banner"><a href='+e[k].targetUrl+'><img class="des-alimg lb-lazy" src="'+f+'" data-img="'+d.escapeEntity(g(e[k].picUrl,h))+'" /></a></div>';else{var m="";c=(e[k].tag||"").split(" ");for(var n=0;n<c.length;n++)if(b&&b[c[n]]){m='<img class="rmsp-s-icon" src="'+b[c[n]].picUrl+'" />';break}j+='<div class="rmsp-li"><a class="rmsp-a" href="'+e[k].targetUrl+'">',j+='<div class="rmsp-f"><img class="des-alimg lb-lazy" src="'+f+'" data-img="'+d.escapeEntity(g(e[k].picUrl,"320x320xz"))+'" /></div>',m?(j+='<div class="rmsp-uls is-act">',j+='<p class="rmsp-s">',j+=d.escapeEntity(e[k].title),j+="</p>",j+=m):(j+='<div class="rmsp-uls">',j+='<p class="rmsp-s">',j+=d.escapeEntity(e[k].title),j+="</p>"),j+='<p class="rmsp-t">',j+="<ins><small>&yen;</small>"+d.escapeEntity(e[k].marketPrice)+"</ins>",j+="<span>"+d.escapeEntity(e[k].recommendReason)+"</span>",j+="</p>",j+="</div>",j+="</a></div>",k%2!=0?(l-1>k&&(j+="</div>"),l-1>k&&(j+='<div class="rmsp-ul">')):k==l-1&&(j+='<div class="rmsp-lino"></div>')}return j+="</div>"}for(var b=p.data.recommedResult,f=p.data.tagMap,j=[],k=0,l=b.length;l>k;k++)j.push(a(b[k],f));if(o.innerHTML=j.join(""),e(o,"hm:render"),!n){var m=itemList.map(function(a){return a.itemId}),q="http://ac.mmstat.com/wxdetail.3.1?logtype=4&itemid="+c+"&rec_items="+m.join("_")+"&cache="+Date.now(),r=new Image;r.src=q}},p.syncFail=function(a){o.innerHTML=f({extraCls:"emg-remd",title:"店铺暂未做推荐喔~"})};var q;Object.defineProperty(p,"data",{get:function(){return q},set:function(a){if(!a)throw new Error("Non expected value");q=a,p.syncTemplate()}}),b.data?p.data=b.data:p.fetch(),p.element=o,o.addEventListener("click",function(a){var b=a.target;"emg-bt"===b.className&&p.fetch()},!1)}var d=(a.mtop,b.Tool),e=d.fireEvent,f=d.renderFail,g=d.disposeUrl,h="450x10000",i=window.devicePixelRatio;i>=2&&(h="620x10000"),b.ShopRecommend=c}(window.lib,window.detailNative||(window.detailNative={})),function(a,b){function c(b){var c=b.api,h=b.version,i=b.appId,j=b.params,k=b.isShowError,l=(j.itemId,document.createElement("div"));l.className="rmsp";var m=this;m.fetch=function(){k&&(l.innerHTML="",d.loadShow()),a.mtop.request({api:c,v:h,ecode:0,data:{appId:i,params:JSON.stringify(j)}},function(a,b){var c=a.data,e=c?c.result:null;c&&e&&0!==e.length?m.data=a.data:k&&m.syncFail(1),k&&d.loadHide()},function(a,b){if(l.className="",k){var c=a.ret,e=c&&"ABORT"===c[0]?0:1;m.syncFail(e),d.loadHide()}})},m.syncTemplate=function(){var a=m.data.result,b="";a.forEach(function(a,c){var e,f=a.itemList,h=a.text,i="2882",j="15303",k="99970",m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=";h&&(l.className=l.className+" rmsp-bl",b+="<div class=hr-box data-title="+h+"></div>"),b+='<div class="rmsp-ul">';for(var c=0,n=f.length;n>c;c++){var o=f[c].iconsAdapter,p="";o&&(p='<img class="rmsp-s-icon" src="'+o+'" />'),e=f[c].auctionTag||"",-1!==e.split(" ").indexOf(k)||-1!==e.split(" ").indexOf(i)||-1!==e.split(" ").indexOf(j),b+='<div class="rmsp-li"><a class="rmsp-a" href="'+f[c].url+'">',b+='<div class="rmsp-f"><img class="des-alimg lb-lazy" src="'+m+'" data-img="'+d.escapeEntity(g(f[c].picUrl,"320x320xz"))+'" /></div>',p?(b+='<div class="rmsp-uls is-act">',b+='<p class="rmsp-s">',b+=d.escapeEntity(f[c].title),b+="</p>",b+=p):(b+='<div class="rmsp-uls">',b+='<p class="rmsp-s">',b+=d.escapeEntity(f[c].title),b+="</p>"),b+='<p class="rmsp-t">',b+="<ins><small>&yen;</small>"+d.escapeEntity(f[c].salePrice)+"</ins>",b+="<span>"+d.escapeEntity(f[c].recommendReason)+"</span>",b+="</p>",b+="</div>",b+="</a></div>",c%2!=0?(n-1>c&&(b+="</div>"),n-1>c&&(b+='<div class="rmsp-ul">')):c==n-1&&(b+='<div class="rmsp-lino"></div>')}b+="</div>"}),l.innerHTML=b,e(l,"hm:render")},m.syncFail=function(a){a&&1==a?l.innerHTML=f({extraCls:"emg-remd",title:"没有同店推荐的商品"}):l.innerHTML=f({type:"error"})};var n;Object.defineProperty(m,"data",{get:function(){return n},set:function(a){if(!a)throw new Error("Non expected value");n=a,m.syncTemplate()}}),b.data?m.data=b.data:m.fetch(),m.element=l,l.addEventListener("click",function(a){var b=a.target;"emg-bt"===b.className&&m.fetch()},!1)}var d=(a.mtop,b.Tool),e=d.fireEvent,f=d.renderFail,g=d.disposeUrl;b.Recommend=c}(window.lib,window.detailNative||(window.detailNative={})),function(a,b,c){function d(){var b;b="true"===q?"q60s150":"q90",t=f({lazyWidth:1e3,lazyHeight:200,q:b,autoDestroy:!1,errorCallback:function(){this.style.display="none"},loadCallback:function(){this.style.background="none"}});var d=new c.Full({anchors:r.anchors,itemId:n,fromMobile:o}),g=d.element;if(e.body.appendChild(g),g.addEventListener("hm:render",function(){t&&t.fireEvent()},!1),d.data=s,u){var h=new c.Recommend({itemId:n,sellerId:u,title:"看了又看",api:"mtop.shop.getWapRelatedItems",version:"1.0",ecode:0,scm:"2003.5.1.0"});g.appendChild(h.element),k.hideBtmLine&&"true"===k.hideBtmLine||g.appendChild($('<h2 class="rmsp-hr"><span>已经到底啦</span></h2>')[0]),h.element.addEventListener("hm:render",function(){t&&t.fireEvent()},!1)}else k.hideBtmLine&&"true"===k.hideBtmLine||g.appendChild($('<h2 class="rmsp-hr"><span>已经到底啦</span></h2>')[0]);$(e.body).on("click",".J_errorMsg .emg-bt",function(){location.reload()}),setTimeout(function(){a.scrollTo(0,1)},100)}var e=a.document,f=(a.WindVane,b.lazyload),g=(b.env,c.Tool),h=location.search.slice(1).split("&"),i=location.hash.slice(2).split("&");h=h.concat(i);for(var j,k={},l=0,m=h.length;m>l;l++)j=h[l].split("="),k[j[0]]=j[1];var n=k.id,o=k.fromMobile;if(!n){g.loadHide();var p=e.createElement("div");return p.innerHTML=g.renderFail({title:"缺少参数"}),void e.body.appendChild(p)}var q,r,s,t,u=k.sellerId,v=k.f||"",w=(b.mtop.config.subDomain,k.sellerType||"",!1),x=k.network;!x||"weak"!==x&&"2"!==x||(w=!0);var y=b.mtop.request({api:"mtop.taobao.detail.getdesc",v:"6.0",data:{id:n,type:"1",f:v},ecode:0,type:"GET",dataType:"jsonp",timeout:2e4}),z=new Promise(function(a,b){y.then(function(b){a(b.data)},function(a){console.error(JSON.stringify(a)),b(a),document.body.innerHTML=g.renderFail({type:"error"}),document.getElementsByClassName("emg-bt")[0].addEventListener("click",function(){window.location.reload(!0)})})});if(w)q="true";else var A=new Promise(function(a){f.getNetWork(function(b){a(b)})});if(A)var B=Promise.all([z,A]);else B=Promise.all([z]);B.then(function(a){g.loadHide(),a[0]&&(r=a[0],s=r.pcDescContent,s+='<img src="//gw.alicdn.com/tfs/TB1k9XsQpXXXXXLXpXXXXXXXXXX-750-368.png" >'),q||(q=a[1]?a[1]:"false"),d()})["catch"](function(a){console.error(JSON.stringify(a))})}(window,window.lib,window.detailNative||(window.detailNative={}));