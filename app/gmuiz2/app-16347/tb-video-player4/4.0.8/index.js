define("mui/tb-video-player4/index",function(e,t,i){var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o)}}return function(t,i,o){if(i)e(t.prototype,i);if(o)e(t,o);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}e("mui/kissy-polyfill/index");var a=e("mui/zepto/zepto");var r=e("mui/tengine-detector/index");e("mui/zepto/event");var l=function(){function e(t){n(this,e);this.isUseVideoTag=false;this.config=Object.assign({loadMode:"click",autoplay:true,container:null,player:null},t);this.__init()}o(e,[{key:"__init",value:function t(){var e=this;this.isUseVideoTag=function(){if(r&&r.os&&r.os.name==="android"){return true}else if(/iPod touch/.test(navigator.userAgent)){return true}else{return false}}();this.__loadLib(function(){switch(e.config.loadMode){case"click":a("body").on("click",".J_actVideo",function(t){var i=a(t.currentTarget);e.__loadVideoPlayer(i)});break;case"load":e.config.container&&e.__loadVideoPlayer(a(e.config.container));break}})}},{key:"__extendZepto",value:function i(){var e=function t(e,i){var o=document.getElementsByTagName("head")[0],n=document.createElement("script");n.setAttribute("type","text/javascript");n.setAttribute("src",e);o.appendChild(n);var a=function r(){if(typeof i==="function"){i()}};if(document.all){n.onreadystatechange=function(){if(n.readyState=="loaded"||n.readyState=="complete"){a()}}}else{n.onload=function(){a()}}};a.getScript=e}},{key:"__loadLib",value:function l(e){this.__extendZepto();var t=this;if(window.tb_player_object){e()}a.getScript("//g.alicdn.com/tb/videocenter/1.2.1/js/tbvideo.js",function(){t.config.player=window.tb_player_object;e&&e.call(t)})}},{key:"__loadVideoPlayer",value:function d(e){var t=r.device&&r.device.type==="phone";var i=e.attr("id"),o=e.attr("data-video-url"),n=a("img",e),l={width:n.attr("width")||n.width(),height:n.attr("height")||n.height()},d=this.__urlResolved(o);if(t){l.width="100%"}if(!d){alert("\u975e\u89c6\u9891\u94fe\u63a5,\u89c6\u9891\u65e0\u6cd5\u64ad\u653e");return false}if(!i){alert("\u65e0\u6cd5\u83b7\u53d6DOM\u5bb9\u5668ID,\u89c6\u9891\u65e0\u6cd5\u64ad\u653e");return false}if(this.isUseVideoTag){var c="http://cloud.video.taobao.com/play/u/"+d.uid+"/p/1/e/6/t/"+d.tid+"/"+d.vid+".mp4";e.removeClass();e.html('<video style="background-color: rgb(34, 34, 34);" width="'+l.width+'" height="'+l.height+'" controls="controls" autoplay="autoplay" src="'+c+'"></video>')}else{this.config.player.embedPlayer({vid:d.vid,uid:d.uid,tid:d.tid,div:i,width:l.width,height:l.height},{autoplay:this.config.autoplay,showloadinglogo:"false"},{wmode:"transparent",allowScriptAccess:"always",allowFullScreen:"true"})}}},{key:"__urlResolved",value:function c(e){var t=void 0,i=void 0,o=void 0;var n=e.split("/");a.each(n,function(e,o){if(o==="u"){t=n[e+1]}if(o==="t"){i=n[e+1]}});o=n[n.length-1].split(".")[0];if(t&&i&&o){return{uid:t,tid:i,vid:o}}else{return false}}}]);return e}();i.exports=l});