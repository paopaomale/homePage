KISSY.add("mui/pushwindow/index",function(e,n,i,r){function a(e){var i='a[target="_blank"][href]';if(e&&e.filter){i=e.filter}KISSY.ready(function(){r.ready(function(){if(r.isTmall||r.isTaobao){var e=function(e){if(e&&(e.indexOf("detail.tmall.com")>-1||e.indexOf("detail.m.tmall.com")>-1)){return false}if(r.isTaobao&&r.ua.indexOf("iPhone")>-1&&r.appinfo&&r.appinfo.ver&&r.appinfo.ver<"5.2.8"){return false}return true};var a=false;n.one("body").delegate("click",i,function(n){n.preventDefault();var i=n.currentTarget.href;if(!e(i)){window.location.href=i;return false}if(i&&!a){a=true;r.pushWindow(i,function(e){if(e.errorCode){window.open(i)}})}setTimeout(function(){a=false},1e3);return false})}else{if(r.ua.indexOf("Safari")>-1&&r.ua.indexOf("iPhone")>-1){n.one("body").delegate("click",i,function(e){var n=e.currentTarget.href;if(n){window.location.href=n;e.preventDefault();return false}})}}})})}return a},{requires:["node","event","mui/hybrid"]});