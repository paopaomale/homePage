define("mui/zebra-brand-zhaocai/index",function(e,i,t){var a=function(){function e(e,i){for(var t=0;t<i.length;t++){var a=i[t];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(i,t,a){if(t)e(i.prototype,t);if(a)e(i,a);return i}}();function n(e,i){if(!(e instanceof i)){throw new TypeError("Cannot call a class as a function")}}e("mui/zepto/event");var r=e("mui/zepto/zepto");var s=e("mui/mtop/index");var o="bcTaskDone";var f=function(){function e(i,t){n(this,e);this.now=(new Date).getTime();this.cfg=t;this.initTask()}a(e,[{key:"initTask",value:function i(){var e=this;var i;if(window.localStorage){i=localStorage.getItem(o)}if(i){var t=new Date(this.now);t.setHours(0);t.setMinutes(0);t.setSeconds(0);t.setMilliseconds(0);this.finished=t.getTime()<=parseInt(i)}else{this.finished=false}var a=c();this.taskId=a.taskId||a["wh_taskId"];if(a.done&&a.done==1){this.finished=true}if(this.taskId&&!this.finished){r(this.cfg.moduleClass||".zebra-brand-celebration-card").on("click",this.cfg.fieldClass||".item-content,.item-wrapper",function(i){if(!e.finished&&!e.finishing){e.finishing=true;e.finishTask()}})}}},{key:"finishTask",value:function t(){var e=this;s.request({api:"mtop.tmw.mcity.finish",v:"1.0",data:{id:e.taskId,taskType:2},ecode:1},function(i){if(i&&i.data&&i.data.data&&i.data.data.prizeValue){location.href="poplayer://myStreet?origin=zebra-brandshinego&lotteryId="+i.data.data.prizeValue;if(window.localStorage){localStorage.setItem(o,e.now)}e.finished=true}e.finishing=false})}}]);return e}();function c(){var e={},i=window.location.search.replace("?","");i=i.split("&");r.each(i,function(i,t){var a=t.split("=");if(a.length>1){e[a[0]]=a[1]}});return e}t.exports=function(e,i){var t;try{t=JSON.parse(i)}catch(a){t={}}new f(e,t)}});