define("mui/zebra-hotspot-broadcast/index",function(i,t,a){"use strict";i("mui/babel-polyfill/index");i("mui/kissy-polyfill/index");var e=i("mui/zepto/zepto");var r=i("mui/mtop/index");var s=i("mui/xtemplate/index");var n=i("mui/slider-m/index");var o=i("mui/datalazyload/");var u=i("mui/crossimage/");var l=i("mui/dlp/index");var m=o.instance();var d=function f(){e(".zebra-hotspot-broadcast").hide()};var c=function g(i){var t=i&&i.data&&i.data.length;if(!t){return d()}if(i.exposureParam){var a=new Image;a.src=i.exposureParam}var r=e("#boxXtpl").html();var o=e(".J-broadcast-slider"),l=e(".J-broadcast-list",o);var c=0;var v="";var f="";var g=0;for(var b=t-1;b>=0;b--){var x=i.data[b];if(!x.imgUrl){i.data.splice(b,1);t--}else{x.startTimeStr=p.getHour(x.startTime,x.tag)}}i.data[t-1].lastClass="last-item";e.each(i.data,function(i,t){if(t.tag==="future"){return false}if(t.startTime!==f){c=i;v=t.tag;f=t.startTime;g=i}});if(t-c<=1){c=c-1}i.titleClass={"\u5929\u732b\u978b\u5c65":"use-img xielv","\u5929\u732b\u7bb1\u5305":"use-img xiangbao","\u5929\u732b\u7f8e\u5986":"use-img meizhuang","\u5929\u732b\u56fd\u9645":"use-img guoji","\u5929\u732b\u8d85\u5e02":"use-img chaoshi","\u670d\u9970\u7279\u5356":"use-img fushi","\u8d85\u503c\u8bd5\u7528":"use-img shiyong","\u54c1\u724c\u7279\u5356":"use-img temai","\u56e4\u5566":"use-img tunla","\u55b5\u9c9c\u751f":"use-img shengxian","\u5927\u724c\u5165\u9a7b":"use-img dapai","\u54c1\u724c\u5e97\u5e86":"use-img dianqing","\u54c1\u724c\u95ea\u8d2d":"use-img shangou"};var h=new s(r);var y=h.render(i);l.html(y);m.addStartListener(u.DatalazyPlugin(l));m.addElements(l);var w=e(window).width();var z=e(".slider-panel",o);var k=z.width();l.width(k*t);var T=Math.ceil(w/k);if(t>=T){var P=c+1;if(P+T-1>t){P=t-T+2}var S=k*.3;var C=-k*(P-1)+S;setTimeout(function(){var i=new n(".J-broadcast-slider",{scroller:".scroller",transitionDuration:800,hoverStop:true,autoSlide:true,timeout:3e3});var t=i.size;var a=i.flipsnap;a.element.addEventListener("fspointbeforemove",function(a){var e=this.index;if(a.currentPoint==t){i.go(t-1);return}if(a.currentPoint==t-T){i.stop()}},false);if(P>=t-T){i.stop()}var e=function r(){z.css({"-webkit-transform":"translateX("+S+"px)",visibility:"visible"});setTimeout(function(){z.css({"-webkit-transform":"translateX(0px)",visibility:"visible","-webkit-transition-property":"transform","-webkit-transition-timing-function":"cubic-bezier(0, 0, 0.25, 1)","-webkit-transition-duration":"500ms"})},200)};i.go(g,e(),0)},0)}else{z.css({visibility:"visible"})}};function v(i){lib.mtop.config.subDomain="m";l.mtop({dataType:"mtop",mtop:{api:"mtop.taobao.aladdin.service.tmall.redian",v:"1.0",ecode:0,data:{appId:"03623"}},localCacheType:"localStorage",multipleCallback:true,error:function t(i,a,e){d()},success:function a(i,t,e){var r=i.data&&i.data.resultValue&&i.data.resultValue["03623"];c(r)},complete:function e(i,t,a){}});Ali.ready(function(){Ali.autoPushWindow.open()})}var p={getHour:function b(i,t){var a=/(\d\d)\:(\d\d):\d\d/.exec(i);var e="\u5df2\u5f00\u62a2";if(t==="current"){e="\u5df2\u5f00\u62a2"}if(t==="future"){e="\u5373\u5c06\u5f00\u62a2"}return"<span class='time-box'>"+a[1]+":"+a[2]+e+"</span> "}};a.exports=v});