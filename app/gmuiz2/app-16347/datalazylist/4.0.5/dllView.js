define("mui/datalazylist/dllView",function(e,t,i){var n=e("mui/zepto/zepto"),o=e("mui/datalazylist/index"),r=e("mui/xtemplate/index");function a(e){return Array.isArray?Array.isArray(e):Object.prototype.toString.call(e)==="[object Array]"}function d(){return n.extend.apply(this,arguments)}function l(){var e=window,t=e.document,i=t.body,n=t.documentElement;return e.innerHeight||t.compatMode==="CSS1Compat"&&n.clientHeight||i&&i.clientHeight||n.clientHeight}function c(t){var i,c=t.loader.pageSize?o.FixedSizeDataLoader:o.RandomSizeDataLoader,u=t.viewPadding||9,f=t.viewRow||1,s=t.viewColumn||1,m=n(t.viewItemTpl).get(0),w=m.nodeName=="TEXTAREA"?m.value:m.innerHTML,g=t.render||{},h=t.loader||{},p=w.indexOf("lazyload")>0,v=window.ActiveXObject&&!window.XMLHttpRequest,M=window.ActiveXObject&&window.XMLHttpRequest&&(!document.documentMode||document.documentMode==7),x=l(),y=t.el.offsetWidth;function b(t){if(p){e(["mui/datalazyload/"],function(e){var i=e.instance?e.instance():new e;i.addElements(t.el)})}if(g.initDom)g.initDom.apply(this,arguments)}switch(t.viewType){case"cascade":var z="";for(var D=0;D<s;D++){var A=M||v?Math.floor((1-u*s/y)/s*1e4)/100:Math.floor(1/s*1e4)/100,H=M?"margin-left:"+Math.floor(D/s*1e4*u/y)/100+"%;margin-right:"+Math.floor(1e4*((s-D-1)/s)*u/y)/100+"%;width:"+A+"%":"box-sizing: border-box;padding-left:"+D/s*u+"px;padding-right:"+(s-D-1)/s*u+"px;width:"+A+"%";z+='<div class="dllView-cascade" style="float:left;'+H+'";></div>'}t.el.innerHTML=z;var L=new r(m.innerHTML);i=new o.MultiNodeRender(d(d({scrollBuffer:x*1},g),{els:t.el.childNodes,groupSize:f,createDom:function(e){return n(L.render(e.item)).get(0)},initDom:b}));break;case"grid":default:var A=M||v?Math.floor((1-u*(s-1)/y)/s*1e4)/100:Math.floor(1/s*1e4)/100,H=M?"margin-left:{{(_col / "+s+") * "+Math.floor(100*u/y)+"}}%;margin-right:{{(("+s+" - _col - 1) / "+s+") * "+Math.floor(1e4*u/y)/100+"}}%;width:"+A+"%":"box-sizing: border-box;padding-left:{{(_col / "+s+") * "+u+"}}px;padding-right:{{(("+s+" - _col - 1) / "+s+") * "+u+"}}px;width:"+A+"%";var L=new r('<div class="dllView-grid" style="float:left;'+H+'">'+w+"</div>");i=new o.NodeRender(d(d({scrollBuffer:x*1},g),{el:t.el,groupSize:s*f,createDom:function(e){e.item._col=e.index%s;return n(L.render(e.item)).get(0)},initDom:b}));break}if(!h.onData){h.onData=function(t,i){e(["mui/fetch/fetch"],function(e){e(h.url&&h.url+(t.page+1),d({method:"jsonp"},h)).then(function(e){return e.json()}).then(function(e){if(h.onList){return h.onList(e,i)}i(e&&(false||a(e)&&e||a(e.result)&&e.result||a(e.list)&&e.list||a(e.data)&&e.data))})})}}return new o(d({},t,{render:i,loader:new c(h)}))}c.initView=function(e,t,i,n){n(new c(d(true,{el:e},t)))};i.exports=c});