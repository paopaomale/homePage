define("mui/chaoshi-item-plugins/similar",function(i,e,t){var n=function(){function i(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(i,n.key,n)}}return function(e,t,n){if(t)i(e.prototype,t);if(n)i(e,n);return e}}();function o(i,e){if(!(i instanceof e)){throw new TypeError("Cannot call a class as a function")}}var u=i("mui/zepto/touch");var r=i("mui/prompt/indicator/index").getInstance();var m=function(){function e(i){o(this,e);i=i||{};this.config=Object.assign({needWatchAppend:true,attrId:"data-itemid",soldOutClass:"soldout"},i)}n(e,[{key:"bindEvent",value:function t(){var e=this;this.similars={};var t=".similar";u(this.el).on("tap",t,function(t){t.stopImmediatePropagation();t.preventDefault();r.show();var n=t.currentTarget;var o=n.getAttribute(e.config.attrId);i(["mui/chaoshi-similar/index"],function(i){r.hide();if(e.similars[o]){return e.similars[o].show()}e.similars[o]=new i({itemId:o,route:"similar-"+o}).show()});try{if(window.goldlog&&window.goldlog.record){window.goldlog.record("/tbchaoshi.456.100","","itemid="+o,"H46956128")}}catch(t){}}).on("touchend",t,function(i){i.preventDefault()});u(this.el).on("click",t,function(i){i.preventDefault()})}},{key:"plugInitializer",value:function m(i){var e=this;this.el=i.container;this.bindEvent();var t=function n(){var i=e.config;var t="."+i.soldOutClass;var n=e.itemList?e.itemList.filter(t):e.el.querySelectorAll(t);if(!n.length){return}for(var o=0,r=n.length;o<r;o++){var m=n[o];if(m._itemSimDone){continue}var a=m.getAttribute(i.attrId);if(a){var c='<div class="similar" data-itemid="'+a+'"></div>';u(m).find(".item-imp .j_AddCart").replaceWith(c);m._itemSimDone=true}}};i.on("append",function(i){e.itemList=i.appendeditemList?i.appendeditemList:null});i.on("syncFinish",t);if(this.config.needWatchAppend){i.on("append",t)}t()}}]);return e}();t.exports=m});