define("mui/zebra-brand-celebration-header/mods/banners",function(e,t,i){var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}e("mui/kissy-polyfill/index");var u=e("mui/zepto/zepto");var s=e("./banners.tpl");var l=e("./flipsnap");var m=e("mui/crossimage/index");var c=e("mui/datalazyload/index");var d=200,p=200*.89-200,f=document.body.clientWidth/3.75*1.8*.89*.53125;var h=c.instance();var g=function(e){o(t,e);function t(e,i){n(this,t);return a(this,Object.getPrototypeOf(t).call(this,e,i))}return t}(l);Object.assign(g.prototype,{initStyle:function z(){var e=this;this._setStyle({transformStyle:"preserve-3d",perspective:d+"px"});if(!this.items){this.items=u(this.element).find(".banner-item")}this._moveItems(true);this.items.addClass("banner-transition")},_setDist:function y(e){},_moveItems:function P(e){var t=this,i=this.currentPoint||0,r=this.items.length-1,n=i===0?r:i-1,a=i===r?0:i+1;this._stopAuto();u.each(this.items,function(e,r){if(e===i){t._moveItem(r,0,0);h.addElements(r)}else if(e===a){t._moveItem(r,f,p);h.addElements(r)}else if(e===n){t._moveItem(r,-f,p);h.addElements(r)}else{t._moveItem(r,0,-d)}});setTimeout(function(){t._startAuto()},400)},_moveItem:function x(e,t,i){this._setStyle({visibility:i<p?"hidden":"visible",opacity:i>p?1:.85,"z-index":i===p?2:i<p?1:3,transform:"translate3d("+t+"px, 0, "+i+"px)"},e)},calcNewPoint:function A(){return this.currentPoint},toNext:function w(){var e=this.currentPoint+1;if(e>this._maxPoint){e=0}return this.moveToPoint(e)}});function b(e,t,i){var r,n,a;var o=null;var u=0;if(!i)i={};var s=function l(){u=i.leading===false?0:(new Date).getTime();o=null;a=e.apply(r,n);if(!o)r=n=null};return function(){var l=(new Date).getTime();if(!u&&i.leading===false)u=l;var m=t-(l-u);r=this;n=arguments;if(m<=0||m>t){if(o){clearTimeout(o);o=null}u=l;a=e.apply(r,n);if(!o)r=n=null}else if(!o&&i.trailing!==false){o=setTimeout(s,m)}return a}}var v=function(){function e(t,i){n(this,e);this.$el=u(t);this.data=i;h.addStartListener(m.DatalazyPlugin(this.$el[0]));this.init()}r(e,[{key:"init",value:function t(){if(!this.data.banners||this.data.banners.length<3){this.$el.remove();return}if(this.data.banners.length>6){this.data.banners.length=6}this.$el.html(s(this.data));var e=this.$el.find(".banners-slider .scroller");var t=e.find(".item");var i=this,r=1e3;this.slider=new g(e[0],{transitionDuration:r,autoSlide:true,autoDelay:5e3,distance:f,circleRepeat:0});this.curPoint=0;this.slider._setDist=b(function(e){if(this.scrolling){this.currentPoint=this.currentPoint+(this.direction>0?1:-1);if(this.currentPoint<0){this.currentPoint=this.items.length-1}else if(this.currentPoint>this.items.length-1){this.currentPoint=0}this.startPageX=this.basePageX;this._moveItems();i.curPoint=this.currentPoint}else{if(i.curPoint!==this.currentPoint){this._moveItems();i.curPoint=this.currentPoint}}},400,{leading:true})}}]);return e}();i.exports=v});