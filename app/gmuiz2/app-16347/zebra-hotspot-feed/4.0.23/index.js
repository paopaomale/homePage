define("mui/zebra-hotspot-feed/index",function(e,t,n){e("mui/kissy-polyfill/index");var o=e("mui/zepto/zepto");var i=e("mui/zepto/event");var a=e("mui/zebra-hotspot-feed/mods/news");var r=e("mui/hybrid/index");var s=o("#toufang_config_data").html();s=s&&JSON.parse(s);s=s&&s[0]||{};var u={setTop:s["setTop"]||"201509295",sale:s["sale"]||"201509297",chat:s["chat"]||"2015092911",shopAlbumContent:s["shopAlbumContent"]||"05003",darenAlbumContent:s["darenAlbumContent"]||"201604141"};var c={time:1,firstTimeout:10*60*1e3,timeout:20*60*1e3,newsCache:null};var l={renderError:function p(e){var t=this;this.loadData(function(t){return e&&e(t)})},saveData:function w(e){},loadData:function v(e){feloader.use("mui/zebra-hotspot-feed/mods/redian-cache",function(t,n){var o;if(n){o=n}else{o=t}return e&&e(o)})}};var d;var f=function T(e){var t=document.body.scrollTop||document.documentElement.scrollTop;var n=t>e;if(d){clearInterval(d)}d=setInterval(function(){t=document.documentElement.scrollTop||document.body.scrollTop;var o=(e-t)/10;o=o>0?Math.ceil(o):Math.floor(o);if(t===e||n!==t>e){clearInterval(d)}else{window.scrollTo(0,t+o)}},20)};var m={showTip:function g(){o(".J-update").show()},updateFin:function y(){o(".J-update").hide();o(".J-update-fin").show();f(0);setTimeout(function(){o(".J-update-fin").hide()},1e3)},wait:function L(e){var t=this;o(".J-update").off("click.hot").on("click.hot",function(n){n.preventDefault();t.updateFin();return e&&e()})}};function h(e){var t=o("#top_hot_data").html();t=t&&JSON.parse(t);t=t||[];if(t.length){var n=a.sortData({zebra:t});a.immediatelyRenderNews(n.topRenderList,".j_zebranewsList")}var i=function d(e){c.newsCache=e;if(!e.topRenderList.length&&!e.normalRenderList.length){l.renderError(function(e){r(e)})}else{var t=e.topRenderList.concat(e.normalRenderList);a.datalazylistRenderNews(t,".j_newsList",e)}};var r=function f(e){window._linkType="1";var t=a.sortData(e);window.console&&console.log("sort fin "+ +new Date);var n=0;if(c.time===1){n=c.firstTimeout;o(".j_newsList").html("");i(t);setTimeout(function(){s()},n)}else{n=c.timeout;if(a.compareNews(t,c.newsCache)){m.showTip();m.wait(function(){o(".j_newsList").html("");i(t);setTimeout(function(){s()},n)})}else{setTimeout(function(){s()},n)}}c.time++};var s=function h(){window.console&&console.log("start time "+ +new Date);a.loadNews(u,function(e){window.console&&console.log("load time "+ +new Date);if(e.chat&&e.chat.data&&e.chat.data.length){l.saveData(e);r(e)}else{l.renderError(function(e){r(e)})}},function(e){l.renderError(function(e){r(e)})})};s();Ali.ready(function(){Ali.autoPushWindow.open()})}n.exports=h});