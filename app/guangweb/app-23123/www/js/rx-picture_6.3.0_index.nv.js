define("kg/rx-picture/index",["kg/rx/index","kg/rx-components/index","kg/image-optimizer/index","kg/rx-webp/index"],function(e,t,o){var r,i,n=e("kg/rx/index"),a=e("kg/rx-components/index"),s=e("kg/image-optimizer/index"),u=e("kg/rx-webp/index");r=function(e){function t(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){var t=[],o=[];return"string"==typeof e&&(o=e.split(",")),A(e)&&(o=e),o&&o[0]&&(t[0]=o[0]),o&&o[1]&&(t[1]=o[1]),t}function p(e,t){var o=l(t);return e?o[0]:o[1]}e={},Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),f=n,h=a,y=s,g=t(y),d=u,b=t(d),m="function"==typeof callNative,v={}.toString,A=Array.isArray||function(e){return"[object Array]"==v.call(e)},P=!1,T=!1;b["default"].isSupport(function(e){P=e}),b["default"].isSupport(function(e){T=e},"alpha");var x=function(e){function t(){var e,i,n,a;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return i=n=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.state={visible:!1},n.uri="",n.nstyle={},a=i,r(n,a)}return i(t,e),c(t,[{key:"componentWillUpdate",value:function(e){this.props.source.uri!==e.source.uri&&(this.uri="")}},{key:"shouldComponentUpdate",value:function(e,t){return!!this.props.forceUpdate||(this.props.source.uri!==e.source.uri||this.state.visible!==t.visible)}},{key:"render",value:function(){var e=this,t=this.props,o=t.children,r=t.style,i=void 0===r?{}:r,n=t.source,a=void 0===n?{}:n,s=t.resizeMode,u=t.width,l=t.height,c=t.defaultHeight,y=t.autoRemoveScheme,d=t.autoReplaceDomain,b=t.autoScaling,v=t.autoWebp,A=t.autoCompress,x=t.highQuality,S=t.compressSuffix,w=t.autoPixelRatio,O=t.lazyload,R=t.placeholder,z=t.ignoreGif,_=a.uri,j=s;if(!this.uri){var k=i.width,E=i.height;if(!E&&k&&u&&l){var Q=u/parseInt(k,10);E=parseInt(l/Q,10),"string"==typeof k&&k.indexOf("rem")>-1&&E&&(E+="rem")}m&&!E&&(E=c,j||(j="contain")),this.nstyle=Object.assign({height:E},i),this.uri=_,!m&&_&&(w&&window.devicePixelRatio>1&&"string"==typeof k&&k.indexOf("rem")>-1&&(k=2*parseInt(k.split("rem")[0])+"rem"),this.uri=(0,g["default"])(_,{ignoreGif:z,ignorePng:!0,removeScheme:y,replaceDomain:d,scalingWidth:b?k:0,webp:v&&P&&T,compressSuffix:A?p(x,S):""})),j&&(this.nstyle.resizeMode=j)}var U=R;if(!m&&O){var C=this.state.visible;C&&(U=this.uri)}else U=this.uri;return m?(0,f.createElement)(h.Image,{source:{uri:U},style:this.nstyle},o):o||s?(0,f.createElement)(h.View,{isonce:"1",onAppear:function(){return e.lazyLoad()},style:[this.nstyle,{backgroundImage:"url("+U+")",backgroundSize:s||"cover",backgroundRepeat:"no-repeat"},"cover"===s||"contain"===s?{backgroundPosition:"center"}:null,this.nstyle.height?null:{height:c}]},o):(0,f.createElement)(h.Image,{isonce:"1",onAppear:function(){return e.lazyLoad()},source:{uri:U},style:this.nstyle})}},{key:"lazyLoad",value:function(){this.setState({visible:!0})}}]),t}(f.Component);return x.defaultProps={placeholder:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",source:{uri:""},autoRemoveScheme:!0,autoReplaceDomain:!0,autoScaling:!0,autoWebp:!0,ignoreGif:!0,autoCompress:!0,highQuality:!0,compressSuffix:["Q75","Q50"],defaultHeight:"750rem",lazyload:!1,autoPixelRatio:!0},x.propTypes={style:f.PropTypes.object,source:f.PropTypes.object.isRequired,resizeMode:f.PropTypes.oneOf(["contain","cover","stretch"]),width:f.PropTypes.string,height:f.PropTypes.string,defaultHeight:f.PropTypes.string,autoRemoveScheme:f.PropTypes.bool,autoReplaceDomain:f.PropTypes.bool,autoScaling:f.PropTypes.bool,autoWebp:f.PropTypes.bool,autoCompress:f.PropTypes.bool,highQuality:f.PropTypes.bool,compressSuffix:f.PropTypes.array,lazyload:f.PropTypes.bool,placeholder:f.PropTypes.string,autoPixelRatio:f.PropTypes.bool,forceUpdate:f.PropTypes.bool,ignoreGif:f.PropTypes.bool},e["default"]=x,e=e["default"]}(),i=function(e){return e=r}(),o.exports=i});