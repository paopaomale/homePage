!function(a,b){var c="data-img",d="data-size",e="_(\\d+x\\d+(?:xz|xc)?|sum|m|b)((?:c[xy]\\d+i)?(?:co0)?)?([qQ]\\d+)?([sS]\\d+)?(g)?(\\.jpg)?",f="(_\\.webp)?",g=/_.webp$/,h=new RegExp(e+f+"$"),i=200,j=a.document,k=/(^https?:)?\/\/.*(?:alicdn|taobaocdn|taobao)\.(com|net)\/.*(?:\.(jpg|png|gif|jpeg|webp))?$/gi,l={extend:function(a,b){for(var c in b)a[c]=b[c]},filter:function(a){return a.filter(function(a){return!!a})},addEvent:function(a,b,c){a.addEventListener(b,c,!1)},removeEvent:function(a,b,c){a.removeEventListener(b,c,!1)},getTime:function(){return Date.now?Date.now():(new Date).getTime()},isJsonObject:function(a){return"object"==typeof a&&Object.getPrototypeOf(a)===Object.prototype},uaInTaobaoApp:function(){var a=navigator.userAgent;return null!=a.match(/WindVane/i)?!0:!1},getParamVal:function(b){var c=a.location.search.slice(1),d={};if(""!==c)for(var e,f=c.split("&"),g=0,h=f.length;h>g;g++)e=f[g].split("="),d[e[0]]=e[1]||"";return b?d[b]:d},getQ:function(a){var b=a?a:this.getParamVal("getStatus"),c="";switch(b){case"false":c="q90";break;case"true":c="q75";break;case"_noq":c="";break;default:c=b}return c},fetchVersion:function(){var a=navigator.appVersion.match(/(iPhone\sOS)\s([\d_]+)/),b=a&&!0||!1,c=b&&a[2].split("_");c=c&&parseFloat(c.length>1?c.splice(0,2).join("."):c[0],10);var d=b&&6>c;return this.fetchVersion=function(){return d},d},getOffset:function(b,c){if(b){if(c||(c={x:0,y:0}),b!=a)var d=b.getBoundingClientRect(),e=d.left,f=d.top,g=d.right,h=d.bottom;else e=0,f=0,g=e+b.innerWidth,h=f+b.innerHeight;return{left:e,top:f,right:g+c.x,bottom:h+c.y}}},compare:function(a,b){var c=b.right>a.left&&b.left<a.right,d=b.bottom>a.top&&b.top<a.bottom;return c&&d},setImgSrc:function(a,b,c,d){if(a){if(null==a.match(k))return a;c=c||"",b=b||"";var e=d?"_.webp":"",f=a,i=f.match(h),j=f.match(g);return i?f=f.replace(i,"_"+(i[1]||b)+(i[2]||"")+(i[1]||c)+(i[4]||"")+(i[5]||"")+(i[6]||"")+(i[7]||e)):j&&(b||c)?f=f.replace(j,"_"+b+c+"_.webp"):f+=b||c?"_"+b+c+e:e,f}},clearImgSrc:function(a){var b;if(a&&"string"==typeof a)return b=a.match(h),b?a.replace(h,b[7]||""):a}},m=function(b,c){b||c?l.isJsonObject(b)&&(c=b,b=a):b=a;var d="string"==typeof b?j.querySelector(b):b;d&&(this.Container=d,this.reset(c||{}),this.attachMethod(),this.getItem(),this.filterItem())};m.prototype={reset:function(b){var c={lazyHeight:400,lazyWidth:0,lazyClass:"lb-lazy",definition:!1,autoDestroy:!0,q:""},d=l.extend,e=this.defaultAttr;e&&d(b,e),d(c,b);var f=c.q;"Boolean"==typeof f&&(f=f.toString()),c.q=l.getQ(f);var g=a.devicePixelRatio;c.definition=c.definition&&g&&g>1||!1;var h=c.size;h&&(h="object"==typeof h?h[g]||h["default"]:h),c.size=h||"";var i=c.lazyClass;c.lazyClass="."!==i.charAt(0)?i:i.slice(1),c.lazyClassReg=new RegExp("(^|\\s)"+c.lazyClass+"(\\s|$)"),this.defaultAttr=b,this.attr=c},get:function(a){return a?this.attr[a]:null},fireEvent:function(a){var b=this;a&&b.reset(a),b.getItem(),b.filterItem()},handleEvent:function(a){var b=a.type;"scroll"===b?this.filterItem():"touchstart"===b?this.tstart():"touchend"===b&&this.tend()},tstart:function(){this._touchLazy={sy:a.pageYOffset,time:l.getTime()},this._timerPhone&&clearTimeout(this._timerPhone)},tend:function(){var b=this,c=b._touchLazy,d=Math.abs(a.pageYOffset-c.sy);if(d>5){var e=l.getTime()-c.time;b._timerPhone=setTimeout(function(){b.filterItem(),b.touchLazy={},clearTimeout(b._timerPhone),b._timerPhone=null},e>100?0:10)}},attachMethod:function(){var b=l.addEvent;b(a,"scroll",this);var c=l.fetchVersion();c&&(b(j,"touchstart",this),b(j,"touchend",this))},destroy:function(){var b=l.removeEvent;b(a,"scroll",this);var c=l.fetchVersion();c&&(b(j,"touchstart",this),b(j,"touchend",this))},getItem:function(){var b=this,c=b.Container,d=b.itemList;if(d)for(var e=0,f=d.length;f>e;e++)d[e]&&(d[e].onerror=d[e].onload=null);c=c===a?j:c;for(var g=c.querySelectorAll("."+b.get("lazyClass")),h=[],e=0,f=g.length;f>e;e++)h.push(g[e]);b.itemList=h},filterItem:function(){var b=this,c=l,d=(b.Container,{x:b.get("lazyWidth"),y:b.get("lazyHeight")}),e=b.itemList,f=c.filter(e);if(f&&f.length)for(var g=0,h=e.length;h>g;g++)e[g]&&c.compare(c.getOffset(a,d),c.getOffset(e[g]))&&b.fetchItem(e[g],g);else b.get("autoDestroy")&&b.destroy()},fetchItem:function(a,b){var e=this,f=a.getAttribute(c),g=a.getAttribute(d),h=e.get("q");f&&(e.get("definition")&&(g||(g=e.get("size"))),f=l.setImgSrc(f,g,h),a.removeAttribute(c),a.removeAttribute(d),"IMG"===a.tagName?a.src=f:a.style.backgroundImage="url("+f+")",a.onload||(a.onload=function(){e.loadItem(this,b)},a.onerror=function(){e.errorItem(this,b)}))},loadItem:function(a,b){this.removeItemAttr(a,b),this.get("loadCallback")&&this.get("loadCallback").call(a)},errorItem:function(a,b){this.removeItemAttr(a,b),this.get("errorCallback")&&this.get("errorCallback").call(a)},removeItemAttr:function(a,b){var c=this;a.className=a.className.replace(c.get("lazyClassReg")," "),a.onerror=a.onload=null,c.itemList[b]=null}},m.prototype.constructor=m,b.lazyload=function(a,b){return new m(a,b)},b.lazyload.setImgSrc=l.setImgSrc,b.lazyload.clearImgSrc=l.clearImgSrc,b.lazyload.getNetWork=function(b){var c=a.WindVane;l.uaInTaobaoApp()?c&&c.call("TBWeakNetStatus","getStatus","",function(a){b(a.WeakNetStatus)},function(a){b()},i):b()}}(window,window.lib||(window.lib={}));