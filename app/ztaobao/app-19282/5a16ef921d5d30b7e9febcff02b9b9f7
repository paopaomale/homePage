!function(a,b){function c(a,b){var c,d,e,f=null,g=0,h=function(){g=Date.now(),f=null,e=a.apply(c,d)};return function(){var i=Date.now(),j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(f),f=null,g=i,e=a.apply(c,d)):f||(f=setTimeout(h,j)),e}}function d(a){var b=null!=navigator.userAgent.match(/WindVane/i);b&&window.WindVane?WindVane.call("WVNetwork","getNetworkType",{},function(b){b&&b.type&&(E=b.type.toLowerCase()),a&&a()},function(b){a&&a()}):a&&a()}function e(a){try{var b=new Image;b.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",b.onload=function(){G=2===b.height?!0:!1,a&&a()},b.onerror=function(){G=!1,a&&a()}}catch(c){a&&a()}}function f(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function g(a,b){if(a){if(b||(b={x:0,y:0}),a!=window)var c=a.getBoundingClientRect(),d=c.left,e=c.top,f=c.right,g=c.bottom;else d=0,e=0,f=d+a.innerWidth,g=e+a.innerHeight;return{left:d,top:e,right:f+b.x,bottom:g+b.y}}}function h(a,b){var c=b.right>a.left&&b.left<a.right,d=b.bottom>a.top&&b.top<a.bottom;return c&&d}function i(){var a=document.createElement("canvas");a.getContext("2d");F=Array.prototype.slice.call(document.querySelectorAll("."+H["class"])),F.length&&F.forEach(function(a,b){"1"==a.getAttribute("data-cache")&&l(a)})}function j(){var a=H.dataSrc;F.length&&F.forEach(function(b,c){if("true"!=b.getAttribute("data-src-checked")){var d=b.getAttribute(a),e=b.getAttribute("data-size"),f=b.getAttribute("data-type"),g={};e&&(g.size=e),f&&(g.type=f),b.attributes["data-original"]&&(g.isOriginal=!0),d&&(b.setAttribute(a,I.getNewUrl(d,g)),b.setAttribute("data-src-checked","true"))}})}function k(){var a=H.dataSrc,b=g(window,{x:H.lazyWidth,y:H.lazyHeight});F.length&&F.forEach(function(c,d){function e(b){if(b.removeAttribute(a),"IMG"===b.tagName)if(1==b.getAttribute("data-cache")){var c=m(f);b.setAttribute("src",c||f)}else b.setAttribute("src",f);else b.style.backgroundImage="url("+f+")";b.className=b.className.replace(new RegExp("(^|\\s)"+H["class"]+"(\\s|$)"),"")}var f=c.getAttribute(a),i=g(c),j=h(b,i);f&&("wifi"==E&&t&&H.enalbeIOSWifiLoadMore?e(c):j&&e(c))})}function l(a){var b=!!window.localStorage&&!!document.createElement("canvas").getContext;if(b&&"data"!=a.src.substring(0,4)){var c=document.createElement("canvas"),d=c.getContext("2d");a.setAttribute("crossOrigin","anonymous"),a.onload=function(){if(!this.getAttribute(H.dataSrc)&&"data"!=a.src.substring(0,4)){var b=this.width,e=this.height;c.width=b,c.height=e,d.drawImage(this,0,0,b,e);var f=c.toDataURL(),g={},h=this.src;g[this.src]=f;var i=localStorage.getItem(h),j=localStorage.getItem("h5_lib_img_cached_list"),k=j?JSON.parse(j):[];if(!i){if(localStorage.setItem("h5_lib_img_cached_url_"+h,f),k.length>=200){var l=k.shift();localStorage.removeItem(l)}k.push("h5_lib_img_cached_url_"+h),localStorage.setItem("h5_lib_img_cached_list",JSON.stringify(k))}}}}}function m(a){var b=!!window.localStorage,c=localStorage.getItem("h5_lib_img_cached_url_"+a);return b&&c?c:null}function n(a,b){b=b||z;var c=D.square;if(!a||"string"!=typeof a&&"number"!=typeof a)throw new Error("wrong size type");switch("string"==typeof a&&a.match(/^\d+x\d+$/)&&(a=b==B?a.split("x")[1]:a.split("x")[0]),b){case A:c=D.widths;break;case B:c=D.heights;break;case C:c=D.xzs}var d=c[c.length-1],e=c[0],f=0,g=H.baseDpr;if(v||(a=parseInt(a/g)),a>=d)return d;if(e>=a)return e;for(var h=c.length;h>=0;h--)if(c[h]<=a){c[h]==a?f=a:h<c.length-1&&(f=c[h+1]);break}return f}function o(a){var b="",c="",d=H.q,e=H.sharpen,f=H.defaultSize,g=z;switch("[object Array]"==Object.prototype.toString.call(d)&&(d=d[0]),a&&(a.size&&(f=a.size),a.type&&a.type.match(new RegExp("^("+[z,A,B,C].join("|")+")$"))&&(g=a.type)),b=n(f,g),g){case z:b=b+"x"+b;break;case A:b+="x10000";break;case B:b="10000x"+b;break;case C:b=b+"x"+b+"xz"}return c="_"+b,c+=d+e+".jpg"}function p(){var a=c(k,100);window.addEventListener("scroll",a,!1)}function q(a){function b(){if("[object Array]"==Object.prototype.toString.call(H.q))if(v)H.q=E?"wifi"==E?H.q[0]:H.q[1]:H.q[0];else{var a=parseInt(H.q[0].slice(1)),b=parseInt(H.q[1].slice(1)),c=a+40>=90?"q90":"q"+(a+40),d=b+45>=75?"q75":"q"+(b+45);H.q=E?"wifi"==E?c:d:c}i(),e(function(){j(),H.enableLazyload&&(p(),k())})}a=a||{},H=f(H,a),a.filterDomains&&a.filterDomains.length&&(D.filterDomains=D.filterDomains.concat(a.filterDomains)),H["class"]="."!==H["class"].charAt(0)?H["class"]:H["class"].slice(1),H.size&&(H.defaultSize=n(H.size)),d(b)}var r=(window.document,navigator.userAgent),s=window.devicePixelRatio?window.devicePixelRatio:1,t=null!=r.match(/(iPhone\sOS)\s([\d_]+)/i),u=r.match(/(iPad)/),v=s>=2;u&&(v=!0);var w="gw.alicdn.com",x="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",y=/_(\d+x\d+|cy\d+i\d+|sum|m|b)?(xz|xc)?(q\d+)?(s\d+)?(\.jpg)?(_\.webp)?$/i,z="square",A="widthFixed",B="heightFixed",C="xz",D={};D.widths=[110,150,170,220,240,290,450,570,580,620,790],D.heights=[170,220,340,500],D.xzs=[72,80,88,90,100,110,120,145,160,170,180,200,230,270,290,310,360,430,460,580,640],D.square=[16,20,24,30,32,36,40,48,50,60,64,70,72,80,88,90,100,110,120,125,128,145,180,190,200,200,210,220,230,240,250,270,300,310,315,320,336,360,468,490,540,560,580,600,640,720,728,760,970],D.filterDomains=["a.tbcdn.cn","assets.alicdn.com","wwc.taobaocdn.com","wwc.alicdn.com"];var E,F,G=!1,H={"class":"lib-img",size:"320x320",sharpen:"s150",dataSrc:"data-src",q:["q50","q30"],enableLazyload:!0,lazyHeight:0,lazyWidth:0,enalbeIOSWifiLoadMore:!1,baseDpr:2,filterDomains:[]},I={getNewUrl:function(a,c){if(!a||"string"!=typeof a)return"";var d=H.defaultSize+"x"+H.defaultSize,e=H.q;"[object Array]"==Object.prototype.toString.call(e)&&(e=e[0]);var f="_"+d+e+H.sharpen+".jpg";try{var g=new b.httpurl(a)}catch(h){return console.log("[error]wrong img url:",a),a}var i=g.host,j=g.pathname;g.protocol;if(-1!=D.filterDomains.indexOf(i))return g.toString();var k=i.match(/(.+\.(?:alicdn|taobaocdn|taobao|mmcdn)\.com)/);if(k&&k[0]!=w&&(g.host=w),c&&c.isOriginal)return g.toString();var l=j.match(y),m=j.match(/-(\d+)-(\d+)\.(?:jpg|png|gif)/);if(m){var p,q;p=parseInt(m[1])<parseInt(H.defaultSize)?H.defaultSize:m[1]>760?760:m[1],q=n(p),f="_"+q+"x"+q+e+H.sharpen+".jpg"}return c&&"string"==typeof c?f=o({size:c}):c&&"object"==typeof c&&Object.keys(c).length>0&&(f=o(c)),/\.png/.test(j)&&(f=f.replace(/(q\d+)(s\d+)/,"")),G&&(f+="_.webp"),l?l[1]||l[2]||l[3]||l[4]?g.pathname=j.replace(y,f):l[0].match(/_\.(jpg|png|gif|jpef)/)&&(g.pathname+=f):j.match(/_\.webp$/g)?g.pathname=j.replace(/_\.webp$/g,f):g.pathname=j+f,g.protocol="",g.toString()},fireLazyload:function(){i(),j(),k()}};b.img=function(a){return q.apply(I,arguments),I},b.img.defaultSrc=x}(window,window.lib||(window.lib={}));