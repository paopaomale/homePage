!function(){function e(e,t){return(/string|function/.test(typeof t)?l:r)(e,t)}function t(e,i){return"string"!=typeof e&&(i=typeof e,"number"===i?e+="":e="function"===i?t(e.call(e)):""),e}function i(e){return p[e]}function a(e){return t(e).replace(/&(?![\w#]+;)|[<>"']/g,i)}function s(e,t){if(u(e))for(var i=0,a=e.length;a>i;i++)t.call(e,e[i],i,e);else for(i in e)t.call(e,e[i],i)}function n(e,t){var i=/(\/)[^/]+\1\.\.\1/,a=("./"+e).replace(/[^/]+$/,""),s=a+t;for(s=s.replace(/\/\.\//g,"/");s.match(i);)s=s.replace(i,"/");return s}function r(t,i){var a=e.get(t)||o({filename:t,name:"Render Error",message:"Template not found"});return i?a(i):a}function l(e,t){if("string"==typeof t){var i=t;t=function(){return new d(i)}}var a=c[e]=function(i){try{return new t(i,e)+""}catch(a){return o(a)()}};return a.prototype=t.prototype=m,a.toString=function(){return t+""},a}function o(e){var t="{Template Error}",i=e.stack||"";if(i)i=i.split("\n").slice(0,2).join("\n");else for(var a in e)i+="<"+a+">\n"+e[a]+"\n\n";return function(){return"object"==typeof console&&console.error(t+"\n\n"+i),t}}var c=e.cache={},d=this.String,p={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},u=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},m=e.utils={$helpers:{},$include:function(e,t,i){return e=n(i,e),r(e,t)},$string:t,$escape:a,$each:s},v=e.helpers=m.$helpers;e.get=function(e){return c[e.replace(/^\.\//,"")]},e.helper=function(e,t){v[e]=t},"function"==typeof define?define(function(){return e}):"undefined"!=typeof exports?module.exports=e:this.template=e,e.helper("getDefaultPicUrl",function(){return lib.img.defaultSrc}),e.helper("getPicUrl",function(e,t){return e?app.imgHelper.getNewUrl(e,t):""}),e.helper("dateFormat",function(e,t){e=new Date(parseInt(e));var i={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),q:Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};return t=t||"MM月dd日hh:mm",t=t.replace(/([yMdhmsqS])+/g,function(t,a){var s=i[a];return void 0!==s?(t.length>1&&(s="0"+s,s=s.substr(s.length-2)),s):"y"===a?(e.getFullYear()+"").substr(4-t.length):t}),t.toString()}),e.helper("numberWithCommas",function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}),e("banner",function(e){"use strict";var t=this,i=t.$helpers,a=e.i,s=e.banners,n=t.$escape,r=i.getPicUrl,l=i.getDefaultPicUrl,o="";o+='<div class="slider banner" data-spm="banner"> <div class="slider-outer"> <ul class="slider-wrap"> ';for(var a=0;a<s.length;a++)o+=' <li> <a href="',o+=n(s[a].link),o+='"> <img class="lazyimg" dataimg="',o+=n(r(s[a].pic,"750x750")),o+='" src="',o+=n(l()),o+='"/> </a> </li> ';return o+=' </ul> </div> <div class="slider-status"></div> </div>',new d(o)}),e("card",function(e){"use strict";var t=this,i=(t.$helpers,t.$escape),a=e.title,s=e.showCard,n=e.list,r=e.i,l="";if(l+='<div class="topic-header ',l+=i(a.length?"":"none"),l+='">',l+=i(a),l+='</div> <ul class="topic-items clearfix ',l+=i(s?"":"none"),l+='"> ',3!=n.length)for(var r=0;r<n.length;r++)l+=' <li class="item ',0==r&&(l+=" item-1 "),l+='"> <a href="',l+=i(n[r].link),l+='"> <img class="lib-img" data-src="',l+=i(n[r].picUrl),l+='" alt=""> </a> </li> ';else{l+=' <div class="card-3"> ';for(var r=0;r<n.length;r++)l+=' <li class="item"> <a href="',l+=i(n[r].link),l+='"> <img class="lib-img" data-src="',l+=i(n[r].picUrl),l+='" alt=""> </a> </li> ';l+=" </div> "}return l+=" </ul>",new d(l)}),e("crowdFunding",function(e){"use strict";var t=this,i=t.$helpers,a=t.$escape,s=e.id,n=i.getDefaultPicUrl,r=e.picUrl,l=e.bizeType,o=e.tagClass,c=e.tagName,p=e.title,u=i.numberWithCommas,m=e.currentMoney,v=e.supportNum,g=e.styleWidth,h=e.rate,f="";return f+='<a href="//h5.m.taobao.com/dream/detail.html?pid=',f+=a(s),f+='"> <div class="item"> <div class="item-pic"> <img class="lib-img" src="',f+=a(n()),f+='" data-src="',f+=a(r),f+='"/> </div> <div class="item-info"> <p class="title"> ',l&&(f+='<span class="title-tag ',f+=a(o),f+='">',f+=a(c),f+="</span>"),f+=a(p),f+=' </p> <div class="desc"> <p class="count-money">已筹金额 <span class="price">',f+=a(u(m)),f+='</span></p> <p class="count-people">支持人数 <span class="fontnumber">',f+=a(v),f+='</span>人</p> <div class="progress"> <div class="bar-progress"> <div class="bar-progress-bg" style="width:',f+=a(g),f+='%"></div> <div class="bar-progress-text">达成',f+=a(h),f+="%</div> </div> </div> </div> </div> </div> </a> ",new d(f)}),e("debut",function(e,t){"use strict";var i=this,a=i.$helpers,s=e.banners,n=function(a,s){s=s||e;var n=i.$include(a,s,t);return h+=n},r=e.topData,l=i.$escape,o=a.getDefaultPicUrl,c=i.$string,p=a.dateFormat,u=e.sellingData,m=e.i,v=e.reservingData,g=e.pastData,h="";if(s&&s.length&&(h+=" ",n("./banner"),h+=" "),h+=' <div class="mod-debut-sec"> <div class="hd">品牌首发</div> ',r&&r.length&&(h+=' <div class="item item-first"> <a href="',h+=l(r[0].firstPage),h+='"> <div class="item-mainwrap"> <div class="pic"> <img class="lib-img" data-size="750x750" src="',h+=l(o()),h+='" data-src="',h+=l(r[0].picUrl),h+='"/> </div> <div class="item-text"> <div class="item-title">',h+=l(r[0].sellingPoint),h+="</div> ","top_pre"==r[0].bizType?(h+=' <div class="item-num"><span class="fontnumber">',h+=l(r[0].orderCount),h+="</span>人预约</div> "):r[0].uvsum&&"top_sell"==r[0].bizType&&(h+=' <div class="item-num"><span class="fontnumber">',h+=l(r[0].uvsum),h+="</span>件已售</div> "),h+=' </div> <div class="item-tag item-tag-selling">今日推荐</div> <div class="item-first-mask"></div> </div> <div class="item-subwrap"> <p class="item-desc">',h+=c(r[0].extendHtml),h+="<span>",h+=l(r[0].title),h+='</span></p> <p class="item-price">',h+=l(r[0].price),h+="<span>",h+=l(r[0].priceSub),h+='</span></p> <p class="item-time">',h+=l(p(r[0].sellTime)),h+='首发</p> <p class="item-btn">',h+=l(r[0].btnText),h+="</p> </div> </a> </div> "),h+=" ",u&&u.length){h+=" ";for(var m=0;m<u.length;m++)h+=' <div class="item"> <a href="',h+=l(u[m].firstPage),h+='"> <div class="item-mainwrap"> <div class="pic"> <img class="lib-img" data-size="750x750" src="',h+=l(o()),h+='" data-src="',h+=l(u[m].picUrl),h+='"/> </div> <div class="item-text"> <div class="item-title">',h+=l(u[m].sellingPoint),h+='</div> <div class="item-num"><span class="fontnumber">',h+=l(u[m].uvsum),h+='</span>件已售</div> </div> <div class="item-tag item-tag-selling">新品首发</div> </div> <div class="item-subwrap"> <p class="item-desc">',h+=c(u[m].extendHtml),h+="<span>",h+=l(u[m].title),h+='</span></p> <p class="item-price">',h+=l(u[m].price),h+="<span>",h+=l(u[m].priceSub),h+='</span></p> <p class="item-time">',h+=l(p(u[m].sellTime)),h+='首发</p> <p class="item-btn">马上体验</p> </div> </a> </div> ';h+=" "}if(h+=" ",v&&v.length){h+=" ";for(var m=0;m<v.length;m++)h+=' <div class="item"> <a href="',h+=l(v[m].firstPage),h+='"> <div class="item-mainwrap"> <div class="pic"> <img class="lib-img" data-size="750x750" src="',h+=l(o()),h+='" data-src="',h+=l(v[m].picUrl),h+='"/> </div> <div class="item-text"> <div class="item-title">',h+=l(v[m].sellingPoint),h+='</div> <div class="item-num"><span class="fontnumber">',h+=l(v[m].orderCount),h+='</span>人预约</div> </div> <div class="item-tag item-tag-reseving">新品预告</div> </div> <div class="item-subwrap"> <p class="item-desc">',h+=c(v[m].extendHtml),h+="<span>",h+=l(v[m].title),h+='</span></p> <p class="item-price">',h+=l(v[m].price),h+="<span>",h+=l(v[m].priceSub),h+='</span></p> <p class="item-time">',h+=l(p(v[m].sellTime)),h+='首发</p> <p class="item-btn">进入预约</p> </div> </a> </div> ';h+=" "}if(h+=' </div> <div class="mod-debut-sec"> ',g&&g.length){h+=' <div class="hd">往期回顾</div> ';for(var m=0;m<g.length;m++)h+=' <div class="item"> <a href="',h+=l(g[m].firstPage),h+='"> <div class="item-mainwrap"> <div class="pic"> <img class="lib-img" data-size="750x750" src="',h+=l(o()),h+='" data-src="',h+=l(g[m].picUrl),h+='"/> </div> <div class="item-text"> <div class="item-title">',h+=l(g[m].sellingPoint),h+='</div> <div class="item-num"><span class="fontnumber">',h+=l(g[m].uvsum),h+='</span>件已售</div> </div> </div> <div class="item-subwrap"> <p class="item-desc">',h+=c(g[m].extendHtml),h+="<span>",h+=l(g[m].title),h+='</span></p> <p class="item-price">',h+=l(g[m].price),h+="<span>",h+=l(g[m].priceSub),h+='</span></p> <p class="item-time">',h+=l(p(g[m].sellTime)),h+='首发</p> <p class="item-btn" style="background-color: #999;">首发回顾</p> </div> </a> </div> ';h+=" "}return h+=" </div>",new d(h)}),e("goods-tags",function(e){"use strict";var t=this,i=(t.$helpers,e.i),a=e.tags,s=t.$escape,n="";n+='<div class="item item-tag"> <div class="tag"> <p class="tag-title"> <span>发现更多</span> </p> <div class="tag-list"> ';for(var i=0;i<a.length;i++)n+=' <a class="tag-item-link" href="//h5.m.taobao.com/category/shuma/goodlist.html?tabid=',n+=s(a[i].tabId),n+='">',n+=s(a[i].tabName),n+="</a> ";return n+=" </div> </div> </div>",new d(n)}),e("goods",function(e){"use strict";var t=this,i=t.$helpers,a=t.$escape,s=e.itemId,n=e.scm,r=e.pvid,l=i.getDefaultPicUrl,o=e.picUrl,c=t.$string,p=e.extendHtml,u=e.title,m=e.priceMain,v=e.priceSub,g="";return g+='<div class="item"> <a href="//a.m.taobao.com/i',g+=a(s),g+=".htm?scm=",g+=a(n),g+="&pvid=",g+=a(r),g+='"> <div class="pic"> <img class="lib-img" src="',g+=a(l()),g+='" data-src="',g+=a(o),g+='"/> </div> <div class="item-info"> <p class="title">',g+=c(p),g+="<span>",g+=a(u),g+='</span></p> <div class="price-wrap"><span class="price">',g+=a(m),g+='</span><span class="price-sub">',g+=a(v),g+="</span></div> </div> </a> </div>",new d(g)}),e("info-detail",function(e){"use strict";var t=this,i=t.$helpers,a=t.$escape,s=e.title,n=e.time,r=e.source,l=e.i,o=e.list,c=i.getDefaultPicUrl,p="";p+='<div class="hd"> <p class="hd-title">',p+=a(s),p+='</p> <p class="hd-features"> <span class="time">',p+=a(n),p+='</span><span class="source">',p+=a(r),p+='</span> </p> </div> <div class="bd"> ';for(var l=0;l<o.length;l++)p+=" ",("img"==o[l].type||"pic"==o[l].type)&&(p+=' <div class="type-img"> <img class="lib-img" src="',p+=a(c()),p+='" data-size="640x640" data-src="//gw.alicdn.com/',p+=a(o[l].path),p+='"/> </div> '),p+=" ","text"==o[l].type&&(p+=' <div class="type-text ',l+1<o.length&&"text"==o[l+1].type&&(p+="type-text-mr"),p+='">',p+=a(o[l].description),p+="</div> "),p+=" ";return p+=" </div> ",new d(p)}),e("info",function(e){"use strict";var t=this,i=t.$helpers,a=t.$escape,s=e.id,n=e.title,r=e.picUrl,l=i.getDefaultPicUrl,o=e.summary,c=e.pointCount,p=e.commentCount,u="";return u+='<a href="//h5.m.taobao.com/category/shuma/infodetail.html?feedId=',u+=a(s),u+="&targetType=10&subType=99&accountId=-1&title=",u+=a(n),u+="&description=",u+=a(n),u+="&imageUrl=http:",u+=a(r),u+='"> <div class="item"> <div class="item-pic"> <img class="lib-img" data-type="xz" src="',u+=a(l()),u+='" data-src="',u+=a(r),u+='"/> </div> <div class="item-info"> <p class="title">',u+=a(n),u+='</p> <!--<p class="desc">',u+=a(o),u+='</p>--> <!--<div class="num"> <span class="favor">',u+=a(c),u+='</span> <span class="comment">',u+=a(p),u+="</span> </div>--> </div> </div> </a> ",new d(u)}),e("recommend",function(e){"use strict";var t=this,i=t.$helpers,a=t.$escape,s=e.targetUrl,n=e.title,r=e.subTitle,l=i.getDefaultPicUrl,o=e.picUrl,c=e.pointCount,p=e.commentCount,u="";return u+='<div class="item"> <a href="',u+=a(s),u+='"> <p class="title">',u+=a(n),u+='</p> <p class="desc">',u+=a(r),u+='</p> <div class="pic"> <img class="lib-img" data-size="750x750" src="',u+=a(l()),u+='" data-src="',u+=a(o),u+='"/> </div> <div class="num"> <span class="favor">',u+=a(c),u+='</span> <span class="comment">',u+=a(p),u+="</span> </div> </a> </div>",new d(u)}),e("yuyue",function(e){"use strict";var t=this,i=t.$helpers,a=t.$escape,s=e.pic,n=i.getPicUrl,r=e.picUrl,l=e.sellingPoint,o=e.orderCount,c=e.title,p=e.price,u=e.priceSub,m=i.dateFormat,v=e.sellTime,g=e.status,h=e.itemId,f=e.btnText,w="";return w+='<div class="item"> <div class="item-mainwrap"> <div class="pic"> <img src="',w+=a(s),w+='" data-src="',w+=a(n(r,"750x750")),w+='"/> </div> <div class="item-text"> <div class="item-title">',w+=a(l),w+='</div> <div class="item-num">已有<span class="fontnumber">',w+=a(o),w+='</span>人预约</div> </div> </div> <div class="item-subwrap"> <p class="item-desc">',w+=a(c),w+='</p> <p class="item-price">',w+=a(p),w+="<span>",w+=a(u),w+='</span></p> <p class="item-time">',w+=a(m(v)),w+='首发</p> <p class="item-btn btn-yuyue ',("3"==g||"4"==g)&&(w+="item-btn-disable"),w+='" data-time="',w+=a(v),w+='" data-id="',w+=a(h),w+='" data-status="',w+=a(g),w+='">',w+=a(f),w+="</p> </div> </div>",new d(w)})}(),function(e,t){t.shuma=t.shuma||{},t.imgHelper=lib.img({"class":"lib-img",dataSrc:"data-src",size:"320x320",sharpen:"s150",lazyHeight:window.innerHeight/2,q:["q50","q30"],enableLazyload:!0}),t.utils={getUtdid:function(t){lib.env.aliapp&&e.WindVane?e.WindVane.call("TBDeviceInfo","getUtdid",{},function(i){i.utdid&&(e.utdid=i.utdid,t&&t())},function(){t&&t()}):t&&t()},showToast:function(t){lib.env.aliapp&&e.WindVane?window.WindVane.call("WVUIToast","toast",{message:t},function(){},function(e){console.log("failure: "+JSON.stringify(e))}):console.log(t)},logger:function(e,t,i){!function(){window.goldlog?goldlog.record("/"+e,"",t,i):setTimeout(arguments.callee,200)}()},openByWindVane:function(t){t=location.protocol+t.replace(/^(http:|https:)/,""),lib.env.aliapp&&e.WindVane?window.WindVane.call("Base","openWindow",{url:t},function(){},function(){location.href=t}):location.href=t},showErrorTip:function(e){var t=new ctrl.error({title:"亲，您的手机网络不太顺畅喔~",action:function(){location.reload()}});e.appendChild(t.root)},mtopErrorHandler:function(e){var t=this,i=e.ret[0],a=i.split("::")[0];switch(a){case"FAIL_SYS_TRAFFIC_LIMIT":t.showToast("哎哟喂，被挤爆啦，请稍后重试");break;default:t.showToast("请求数据失败")}}}}(window,window.app||(window.app={})),function(e,t){var i={init:function(){var t=e.tmsData||null;this.currentPage=1,this.canLoad=!0,this.container=$(".mod-debut"),this.banners=[],t&&t.banners&&t.banners.length&&(this.banners=t.banners),t&&t.topItemId&&(this.topItemId=t.topItemId),this.loadData(),this.addEvent()},addEvent:function(){{var e=this;e.container.find(".mod-debut-sec")}},loadData:function(){var i=this,a={};i.topItemId&&(a.topId=i.topItemId),lib.mtop.request({api:"com.taobao.wireless.chanel.realTimeSearchItems",v:"1.0",data:{albumId:"SM_ONLINE_FIRST",pageSize:20,currentPage:i.currentPage,param:JSON.stringify(a)}},function(a){if(-1!=a.ret[0].indexOf("SUCCESS")){var s=a.data.model.result||null;if(i.isDouble11=window.isDouble11(a.data.model.currentTime),i.isDouble11){$(".tab-goods").addClass("flag-tab flag-d11"),$("#hot-d11-topic-header").removeClass("none");var n=t.shuma.tabheader;if(3!=n.curIndex&&!e.d11check)return $(".tab").eq(n.curIndex).attr("data-isInit","no"),$(".tab").eq(3).click(),void(e.d11check=!0)}else $(".tab-recommend").addClass("flag-tab hot-flag");i.parseData(s)}else i.container.html(""),t.utils.showErrorTip(i.container[0]),console.log(a)},function(e){i.container.html(""),t.utils.mtopErrorHandler(e),console.log(e)})},parseData:function(e){function t(e,t,i){var s=e.price.split(".");e.priceSub="",s[1]&&(e.price=s[0],e.priceSub="."+s[1]),e.orderCount=parseInt(e.orderCount)>=1e4?(parseInt(e.orderCount)/1e4).toFixed(2)+"万":parseInt(e.orderCount),e.uvsum&&(e.uvsum=parseInt(e.uvsum)>=1e4?(parseInt(e.uvsum)/1e4).toFixed(2)+"万":parseInt(e.uvsum)),i==a&&(e.btnText="top_pre"==e.bizType?"进入预约":"马上体验",window.tmsData.topItemPic&&(e.picUrl=window.tmsData.topItemPic))}if(!e)return void console.log("shoufa result data is null");var i=this,a=e.top||null,s=e.selling,n=e.reserving,r=e.past;a&&a.forEach(t),s.forEach(t),n.forEach(t),r.forEach(t),i.render({topData:a,sellingData:s,reservingData:n,pastData:r,banners:i.banners})},render:function(e){var i=this;if(i.container.html(template("debut",e)),i.banners.length){new lib.Slider($(".banner")[0],{trigger:".slider-status",lazy:".lazyimg"})}else i.container.find(".banner").remove();t.imgHelper.fireLazyload()}};t.shuma.debut=i}(window,window.app||(window.app={})),function(e,t){var i={init:function(){this.currentPage=1,this.maxPageNum=3,this.canLoad=!0,this.container=$(".mod-info"),this.listView=new ctrl.list({separate:1,loadMoreBottom:window.innerHeight/3,loadingEl:'<div class="loading">加载中...</div>'}),this.container.append(this.listView.root),this.addEvent(),this.loadData()},addEvent:function(){},loadData:function(){var e=this;e.listView.loadingEl.show(),e.canLoad=!1,lib.mtop.request({api:"com.taobao.wireless.chanel.realTimeSearchItems",v:"1.0",data:{albumId:"SM_ONLINE_NEWS",pageSize:100,currentPage:1}},function(i){if(-1!=i.ret[0].indexOf("SUCCESS")){var a=i.data.model,s=parseInt(a.totalItem)/parseInt(a.pageSize);s&&s<e.maxPageNum&&(e.maxPageNum=s),e.parseData(a),e.currentPage++,e.listView.loadingEl.hide(),e.canLoad=!0}else console.log(i),e.container.html(""),t.utils.showErrorTip(e.container[0])},function(i){console.log(i),e.container.html(""),t.utils.showErrorTip(e.container[0])})},parseData:function(e){var i=this,a=e.result;if(!a.length)return void console.log("info list data is null");var s=[];a.forEach(function(e){s.push({html:template("info",e)})}),i.listView.viewModel=i.listView.viewModel.concat(s),t.imgHelper.fireLazyload()}};t.shuma.info=i}(window,window.app||(window.app={})),function(e,t){var i={init:function(){this.currentPage=1,this.canLoad=!0,this.container=$(".mod-recommend"),this.maxPageNum=2,this.listView=new ctrl.list({separate:1,loadingEl:'<div class="loading">加载中...</div>'}),this.container.append(this.listView.root),this.loadData()},loadData:function(){var e=this;e.listView.loadingEl.show(),e.canLoad=!1,lib.mtop.request({api:"com.taobao.wireless.chanel.realTimeSearchItems",v:"1.0",data:{albumId:"SM_ONLINE_REC",pageSize:20,currentPage:e.currentPage}},function(i){if(-1!=i.ret[0].indexOf("SUCCESS")){var a=i.data.model;e.parseData(a),e.listView.loadingEl.hide()}else e.container.html(""),t.utils.showErrorTip(e.container[0]),console.log(i)},function(i){e.container.html(""),t.utils.showErrorTip(e.container[0]),console.log(i)})},parseData:function(e){var i=this,a=e.result;if(!a.length)return void console.log("recommend list data is null");var s=[];a.length=a.length>20?20:a.length,a.forEach(function(e){e.picUrl=t.imgHelper.getNewUrl(e.picUrl),s.push({html:template("recommend",e)})}),i.listView.viewModel=i.listView.viewModel.concat(s),t.imgHelper.fireLazyload(),i.listView.element.appendChild($('<div class="no-more"> <div class="text">亲，宝贝就这么多了~</div> </div>')[0])}};t.shuma.recommend=i}(window,window.app||(window.app={})),function(e,t){var i={init:function(){function i(){a.canLoad&&(a.currentPage<=a.maxPageNum?a.loadData():(console.log("remove goodlist eventListener"),a.listView.element.appendChild($('<div class="no-more"> <div class="text">亲，宝贝就这么多了~</div> </div>')[0]),a.listView.removeEventListener("loadmore",i,!1)))}var a=this;this.currentPage=1,this.canLoad=!0,this.container=$(".mod-goods"),this.maxPageNum=5;var s=new lib.httpurl(location.href);if(t.shuma.debut.isDouble11){var n=template("card",e.tmsData.card);$(".card").html("").append(n)}this.tabId=s.params.tabid||null,lib.env&&lib.env.params.itemId&&(this.itemId=lib.env.params.itemId),this.listView=new ctrl.list({separate:2,loadMoreBottom:window.innerHeight/2,loadingEl:'<div class="loading">加载中...</div>'}),this.container.append(this.listView.root),this.listView.addEventListener("loadmore",i,!1),this.loadData(),this.addEvent()},addEvent:function(){var e=this;e.container.on("click",".tag-item-link",function(e){e.preventDefault();var i=$(e.currentTarget).attr("href");i&&t.utils.openByWindVane(i)})},loadData:function(){var e=this;e.listView.loadingEl.show(),e.canLoad=!1;var t={utdid:window.utdid?window.utdid:""};e.tabId&&(t.tab=e.tabId),e.itemId&&(t.itemId=e.itemId),lib.mtop.request({api:"com.taobao.wireless.chanel.realTimeSearchItems",v:"1.0",data:{albumId:"SM_ONLINE_GOOD",pageSize:20,currentPage:e.currentPage,param:JSON.stringify(t)}},function(t){if(-1!=t.ret[0].indexOf("SUCCESS")){var i=t.data.model,a=parseInt(i.totalItem)/parseInt(i.pageSize);a&&a<e.maxPageNum&&(e.maxPageNum=a),e.parseData(i),e.currentPage++,e.listView.loadingEl.hide(),e.canLoad=!0}else console.log(t)},function(t){console.log(t),e.canLoad=!0})},parseData:function(e){var i=this,a=e.result.itemList,s=e.result.tagInfo,n=e.result.scm||"",r=e.result.pvid||"";if(s&&s.length&&(s.length>=2&&s.shift(),s.length=s.length>6?6:s.length),!a.length)return void console.log("list data is null");var l=[];a.forEach(function(e,a){var o=e[window.d11Info.extKey],c="";if(o&&t.shuma.debut.isDouble11){var d=o.split(" ")[0];d&&window.d11Info.extValues[d]&&(c=window.d11Info.extValues[d])}e.extendHtml=c,e.picUrl=t.imgHelper.getNewUrl(e.picUrl),e.scm=n,e.pvid=r;var p=e.marketPrice.split(".");e.priceMain=p[0],e.priceSub="00"==p[1]?"":"."+p[1],l.push(1==i.currentPage&&!i.tabId&&s&&s.length?5!==a?{html:template("goods",e)}:{html:template("goods-tags",{tags:s})}:{html:template("goods",e)})}),l.length&&l.length>2&&l.length%2!=0&&(l.length=l.length-1),i.listView.viewModel=i.listView.viewModel.concat(l),t.imgHelper.fireLazyload()}};t.shuma.goods=i}(window,window.app||(window.app={})),function(e,t){var i={init:function(){this.currentPage=1,this.canLoad=!0,this.container=$(".mod-crowdfunding"),this.maxPageNum=1,this.listView=new ctrl.list({separate:1,loadingEl:'<div class="loading">加载中...</div>'}),this.container.append(this.listView.root),this.loadData(),this.addEvent()},addEvent:function(){var e=this;e.container.on("click","a",function(e){e.preventDefault();var i=$(e.currentTarget).attr("href");i&&t.utils.openByWindVane(i)})},loadData:function(){var e=this;e.listView.loadingEl.show(),e.canLoad=!1,lib.mtop.request({api:"com.taobao.wireless.chanel.realTimeSearchItems",v:"1.0",data:{albumId:"SM_ONLINE_CHOU",pageSize:20,currentPage:e.currentPage}},function(i){if(-1!=i.ret[0].indexOf("SUCCESS")){var a=i.data.model;e.parseData(a),e.currentPage++,e.listView.loadingEl.hide()}else e.container.html(""),t.utils.showErrorTip(e.container[0]),console.log(i)},function(i){console.log(i),e.container.html(""),t.utils.showErrorTip(e.container[0])})},parseData:function(e){var i=this,a=e.result;if(!a.length)return void console.log("zhongchou list data is null");a.length=a.length>20?20:a.length;var s=[];a.forEach(function(e){e.picUrl=t.imgHelper.getNewUrl(e.picUrl);var i=(100*parseFloat(e.rate)).toFixed(2);e.tagClass="",e.tagName="",i>100?(e.rate=parseInt(i),e.styleWidth=100):(e.rate=i,e.styleWidth=i);var a=e.currentMoney.split(".");switch(a[1]&&"00"==a[1]&&(e.currentMoney=a[0]),e.bizeType){case"new":e.tagClass="title-tag-new",e.tagName="最新";break;case"hot":e.tagClass="title-tag-hot",e.tagName="最热"}s.push({html:template("crowdFunding",e)})}),i.listView.viewModel=i.listView.viewModel.concat(s),t.imgHelper.fireLazyload(),i.listView.element.appendChild($('<div class="no-more"> <div class="text">亲，宝贝就这么多了~</div> </div>')[0])}};t.shuma.crowdFunding=i}(window,window.app||(window.app={})),function(e,t){var i=t.shuma||{};e.d11check=!1,i.tabheader={init:function(){this.container=$(".tabheader"),this.tabs=this.container.find(".tab"),this.contents=$(".wrap .mod"),this.scrollPosRecorder={},this.addEvent();var e=this.getDefaultTabIndex();this.container.find(".tab").eq(e).trigger("click")},addEvent:function(){var i=this;i.container.on("click",".tab",function(a){a.preventDefault();var s=$(a.currentTarget),n=s.index();i.curIndex=n;var r=s.attr("data-mod");if(!s.hasClass("cur")){var l=i.container.find(".cur").index();if(i.scrollPosRecorder[l]=e.pageYOffset,i.tabs.removeClass("cur"),s.addClass("cur"),i.contents.addClass("none").eq(n).removeClass("none"),i.scrollPosRecorder[n]?window.scrollTo(0,i.scrollPosRecorder[n]):window.scrollTo(0,0),t.utils.logger("wap.888.11","tabname="+n,"H46747592"),t.imgHelper.fireLazyload(),"true"!==s.attr("data-isInit")){switch(r){case"sf":t.shuma.debut.init();break;case"zx":t.shuma.info.init();break;case"tj":t.shuma.recommend.init();break;case"hh":t.utils.getUtdid(function(){t.shuma.goods.init()});break;case"zc":t.shuma.crowdFunding.init()}i.tabs.eq(n).attr("data-isInit","true")}}})},getDefaultTabIndex:function(){if(!e.sessionStorage)return 0;var t=e.sessionStorage.getItem("h5_app_hysc_shuma_tabindex");return t?parseInt(t):0}},$(function(){i.tabheader.init()})}(window,window.app||(window.app={}));