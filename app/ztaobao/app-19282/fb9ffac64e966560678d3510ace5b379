!function(){function a(){if(lib.env.os.isIPhone&&lib.env.taobaoApp){var a,b,c=document.documentElement.clientWidth;document.addEventListener("horizontalpanstart",function(b){a=b.touchEvent.touches[0].pageX},!1),document.addEventListener("horizontalpan",function(d){b=d.displacementX,a>0&&b>0&&c/10>a&&b>.3*c&&(document.removeEventListener("horizontalpan"),WindVane.call("WVNative","nativeBack",{}))},!1)}}var b={isSupportWebp:function(){window.isHasWebp=!1;var a=new Image;a.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",a.onload=function(){2===a.height?window.isHasWebp=!0:window.isHasWebp=!1},a.onerror=function(){window.isHasWebp=!1}},convertImgCdn:function(a){if(!a||"string"!=typeof a)return"";var b=["wimg.taobao.com","alicdn.com","taobaocdn.com"],c=document.createElement("a");c.href=a;for(var d=0;d<b.length;d++)if(-1!=c.host.indexOf(b[d])){c.host="gw.alicdn.com";break}return c.href},getNetWorkInfo:function(a){lib.env.taobaoApp?window.WindVane&&WindVane.call("TBDeviceInfo","getInfo",{},function(b){"wifi"!=b.network&&(window.WeakNetStatus=!0),a&&a()},function(b){a&&a()}):a&&a()},openLinkByWv:function(a){a.preventDefault();var b=a.currentTarget,c=$(a.currentTarget),d=c.attr("href"),e="",f=!0;if(d){if(lib.httpurl){var g=new lib.httpurl(d);if(window.g_SPM&&window.g_SPM.spm){var h=window.g_SPM.spm(b);g.params.spm=h}e=g.toString()}else e=d;-1!=e.indexOf("openwindow=false")&&(f=!1),lib.env&&lib.env.taobaoApp&&window.WindVane&&f?window.WindVane.call("Base","openWindow",{url:e},function(){},function(){location.href=e}):location.href=e}},getUtdid:function(a){window.localStorage&&window.localStorage.getItem("h5_app_hysc_utdid")?(window.utdid=window.localStorage.getItem("h5_app_hysc_utdid"),a&&a()):lib.env&&lib.env.taobaoApp?window.WindVane.call("TBDeviceInfo","getUtdid",{},function(b){b.utdid&&(window.utdid=b.utdid,window.localStorage&&window.localStorage.setItem("h5_app_hysc_utdid",b.utdid)),a&&a()},function(b){a&&a()}):a&&a()},initNavBar:function(){var a=$(".hytpl-navbar");a.length&&a.on("click","a",function(a){a.preventDefault();var b=$(a.currentTarget),c=b.attr("href");b.hasClass("cur")||(c&&-1==c.indexOf("http://hichao.uz.m.jaeapp.com/d/wuxian/women")&&(c=c.replace(/^(http:|https:)/,location.protocol)),window.location.replace(c))})},getUrlParams:function(){if(lib.httpurl){var a=new lib.httpurl(location.href);return a.params}return null},mtopErrorHandler:function(a){var b=this,c=a.ret[0],d=c.split("::")[0];switch(d){case"FAIL_SYS_TRAFFIC_LIMIT":b.showToast("哎哟喂，被挤爆啦，请稍后重试");break;default:b.showToast("请求数据失败")}},showToast:function(a){null!=navigator.userAgent.match(/WindVane/i)?window.WindVane.call("WVUIToast","toast",a,function(a){},function(a){console.log(JSON.stringify(a))}):console.log(a)}};window.utils=b,window.utils.getUtdid(),window.utils.isSupportWebp(),window.addEventListener("DOMContentLoaded",function(){b.initNavBar(),a()},!1)}(),function(){var a={};this.tmpl=function b(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[c]=a[c]||b(document.getElementById(c).innerHTML);return d?e(d):e}}(),function(){var a={init:function(){this.loadTabData(),this.addEvent(),this.imgLib=lib.img({"class":"lib-img",size:"300x300",dataSrc:"data-src",sharpen:"s150",q:["q50","q30"],enableLazyload:!1})},addEvent:function(){var a=this,b=$(".main-tab"),c=$(".subtab-list");b.on("click","li",function(c){c.preventDefault();var d=$(c.currentTarget),e=d.attr("data-id"),f=a.mainTabScroller.offset(d[0]),g=f.left,h=f.width,i=a.mainTabScroller.getViewWidth(),j=g-(i-h)/2;a.mainTabScroller.scrollTo(j,!0),d.hasClass("active")||(b.find("li").removeClass("active"),d.addClass("active"),$(".cate-list").addClass("none"),$(".cate-list-"+e).removeClass("none"),$(".cate-list-"+e).find(".cur").trigger("click"),a.subTabScroller&&a.subTabScroller.refresh())}),c.on("click","a",function(b){b.preventDefault();var c=$(b.currentTarget),d=$(".main-tab .active").attr("data-id"),e=c.attr("data-tabId");$(".cate-list-"+d).find("a").removeClass("cur"),c.addClass("cur"),$(".tab-cont").addClass("none"),$("#J-tab-cont-"+d+"-"+e).removeClass("none"),c.attr("data-isLoaded")||a.loadListData(d,e),setTimeout(function(){a.contScroller.scrollTo(0),a.contScroller.refresh()},0)})},createScroller:function(){var a=this,b=$(".subtab-list"),c=$(".cate-conts");a.mainTabScroller=lib.scroll({scrollWrap:document.querySelector(".main-tab"),direction:"x"}).init(),a.contScroller=lib.scroll({scrollElement:c[0],padding:{bottom:4.5*window.rem}}),a.contScroller.init(),a.subTabScroller=lib.scroll({scrollElement:b[0],padding:{bottom:4.5*window.rem}}),a.subTabScroller.init(),a.contScroller.addScrollendHandler(function(b){a.imgLib.fireLazyload()},!1)},loadListData:function(a,b){var c=this;b=b||"",lib.mtop.request({api:"com.taobao.wireless.chanel.realTimeSearchItems",v:"1.0",data:{albumId:"JD_ONLINE_TOP_SPU",pageSize:20,param:JSON.stringify({type:"list",topic:a,tab:b}),currentPage:1}},function(d){if(-1!=d.ret[0].indexOf("SUCCESS")){var e=d.data.model.result,f=e.itemList;c.scm=e.scm||"",c.pvid=e.pvid||"",f&&f.length&&(c.renderList(f,a,b),c.imgLib.fireLazyload(),$(".cate-list-"+a).find('a[data-tabId="'+b+'"]').attr("data-isLoaded","true"))}},function(a){console.log(a.ret[0])})},renderList:function(a,b,c){var d=this,e=$("#J-itemTmpl").html(),f=$("#J-tab-cont-"+b+"-"+c),g=(window.utils,"q90"),h="";window.WeakNetStatus&&(g="q75"),window.isHasWebp&&(h="_.webp");a.length>10&&(a.length=10);var i=[];d.scm&&i.push("scm="+d.scm),d.pvid&&i.push("pvid="+d.pvid);var j=lib.env.taobaoApp?"newSpuId":"spuid";a.forEach(function(a,b){var c=a[window.d11Info.extKey],e="";if(c&&d.isDouble11){var f=c.split(" ")[0];f&&window.d11Info.extValues[f]&&(e=window.d11Info.extValues[f])}a.extendHtml=e;var g=a.price.split(".");a.priceA=g[0],a.priceB=g[1],a.topIconHtm="",a.picUrl=d.imgLib.getNewUrl(a.pic),a.extraParams=i.length?i.join("&"):"",a.spuKeyName=j,3>b&&(a.topIconHtml='<span class="topicon topicon-'+(b+1)+'"></span>')});var k=tmpl(e,{list:a});f.html(k),d.contScroller&&d.contScroller.refresh()},loadTabData:function(){var a=this;lib.mtop.request({api:"com.taobao.wireless.chanel.realTimeSearchItems",v:"1.0",data:{albumId:"JD_ONLINE_TOP_SPU",pageSize:10,currentPage:1,param:JSON.stringify({type:"all"})}},function(b,c){if(-1!=b.ret[0].indexOf("SUCCESS")){var d=b.data.model,e=d.result.tagInfo;a.isDouble11=window.isDouble11(d.currentTime),a.isDouble11,e&&e.length&&(lib.env.os.isAndroid?setTimeout(function(){a.renderTabs(d.result)},400):a.renderTabs(d.result))}},function(a,b){console.log(a.ret[0])})},renderTabs:function(a){for(var b=this,c=a.tagInfo,d=$(".main-tab ul"),e=$(".subtab-list"),f=$(".cate-conts"),g=document.createDocumentFragment(),h=document.createDocumentFragment(),i="",j=0;j<c.length;j++){var k=c[j],l=k.subTab,m=k.tabId,n=k.tabName,o=$("<li/>",{"class":0==j?"active":"","data-tagname":n,"data-id":m,html:'<a href="#">'+n+"</a>"});g.appendChild(o[0]),i+='<ul class="cate-list cate-list-'+m+" "+(0==j?"":"none")+'" data-mainTabId="'+m+'">';for(var p=0;p<l.length;p++){var q=l[p],r=q.tabId,s=q.tabName;i+='<li><a href="#" data-tabId="'+r+'" '+(0==p?'class="cur"':"")+">"+s+"</a></li>";var t=$("<ul/>",{"class":"tab-cont none",id:"J-tab-cont-"+m+"-"+r,html:'<p class="loading">加载中...</p>'});h.appendChild(t[0])}i+="</ul>"}d.html("")[0].appendChild(g),e.html(i),f[0].appendChild(h),b.createScroller();var u=$(".main-tab .active").attr("data-id"),m=$(".subtab-list a").eq(0).attr("data-tabId"),v=a.spuList;b.scm=a.scm||"",b.pvid=a.pvid||"",v&&v.length&&($("#J-tab-cont-"+u+"-"+m).removeClass("none"),$(".cate-list-"+u).find('a[data-tabId="'+m+'"]').attr("data-isLoaded","true"),b.renderList(v,u,m),b.imgLib.fireLazyload())}};window.addEventListener("DOMContentLoaded",function(){a.init()},!1)}();