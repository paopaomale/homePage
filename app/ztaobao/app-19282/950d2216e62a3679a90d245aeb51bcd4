!function(a,b){function c(a){var b=Object.create(String.prototype);return b.toCapitalize=function(){return a?a.substring(0,1).toUpperCase()+a.substring(1):""},b}var d={x:"width",xstart:"left",xend:"right",xrange:"width",y:"height",ystart:"top",yend:"bottom",yrange:"height"},e=function(){var a="WebkitTransform"in document.documentElement.style?!0:!1;return a},f=function(a){var b,e=!1,f=document.createElement("div"),b=["&#173;",'<style id="smodernizr">',"@media (transform-3d),(-webkit-transform-3d){#modernizr{"+d[a+"start"]+":9px;position:absolute;"+d[a]+":3px;}}","</style>"].join(""),g=document.documentElement.style;return f.id="modernizr",f.innerHTML+=b,document.body.appendChild(f),"WebkitPerspective"in g&&"webkitPerspective"in g&&(e=9===f["offset"+new c(d[a+"start"]).toCapitalize()]&&3===f["offset"+new c(d[a]).toCapitalize()]),f.parentNode.removeChild(f),e},g=function(a,b){for(var c in b)a.style[c]=b[c]},h=function(a,b){a.className=a.className.replace(new RegExp("(?:^|\\s)"+b+"(?:\\s|$)","ig")," ").trim()},i=function(a,b){var c=new RegExp("(?:^|\\s)"+b+"(?:\\s|$)"),d=a.className;c.test(d)||(a.className=d+" "+b)},j=function(a,b){if(!a)return null;var c={steps:0,duration:300,loop:!1,play:!1,interval:5e3,direction:"x",wrap:null,panel:null,trigger:null,activeTriggerCls:"sel",hasTrigger:!1,start:0,visible:1,curIndex:0,lazy:"data-img",lazyIndex:1,callback:null,prev:null,next:null,activePnCls:"none",lazyBind:!1,degree:10};this.config=c;for(var d in b)this.config[d]=b[d];this.direction=this.config.direction,"string"==typeof a?this.container=document.querySelector(a):this.container=a,this.config.lazyBind?this.findEl()&&this.lazyBind():this.findEl()&&this.init()&&this.increaseEvent()};j.prototype={lazyBind:function(){function a(d){d.preventDefault(),c.removeEventListener("touchstart",a,!1),b.init()&&b.increaseEvent(),b.start(d)}var b=this,c=b.wrap;if(b.config.play)var d=setInterval(function(){b.panel.children.length&&(clearInterval(d),b.init()&&b.increaseEvent())},b.config.interval);c.addEventListener("touchstart",a,!1)},reset:function(a){this.config.loop&&(this._oldLoop=!0),a=a||{};for(var b in a)this.config[b]=a[b];this.init()},initEl:function(a){return"string"==typeof a?this.container.querySelector(a):a},findEl:function(){var a=this.container;return this.wrap=this.initEl(this.wrap||a.children[0]),this.panel=this.initEl(this.panel||this.wrap.children[0]),this.panel&&this.wrap?(this.trigger=this.initEl(this.config.trigger),this.prev=this.initEl(this.config.prev),this.next=this.initEl(this.config.next),this):null},init:function(){var a=this.wrap,b=this.panel,h=this.panel.children,i=this.trigger,j=this.len=h.length,k=this.direction,l=parseInt(getComputedStyle(h[0])["margin"+new c(d[k+"start"]).toCapitalize()])+parseInt(getComputedStyle(h[0])["margin"+new c(d[k+"endCap"]).toCapitalize()]),m=0,n=this.config.visible,o=f(k)&&e()?!0:!1,p=this.config.steps||a["offset"+new c(d[k]).toCapitalize()];this.useTransform=o,this.gv1=f(k)?"translate3d(":"translate(",this.gv2=f(k)?",0)":")",[].forEach.call(h,function(a){m+=a["offset"+new c(d[k+"range"]).toCapitalize()]}),l&&(m+=(j-1)*l,p+=l),this.config.steps=p,n>1&&(this.config.loop=!1),o&&(g(a,{"-webkit-transform":"translateZ(0)"}),g(b,{"-webkit-backface-visibility":"hidden"}));var q=this._pages=Math.ceil(j/n);if(this._minpage=0,this._maxpage=this._pages-1,this.updateArrow(),1>=q)return i&&(i.style.display="none"),this.loadImg(),null;if(this._oldLoop){var r=b.children;r.removeChild(r.length-2),r.removeChild(r.length-1)}if(this.config.loop){b.appendChild(h[0].cloneNode(!0));var s=h[j-1].cloneNode(!0);b.appendChild(s),s.style.cssText+="position:relative;"+d[k+"start"]+":"+-this.config.steps*(j+2)+"px;",m+=h[0]["offset"+new c(d[k+"range"]).toCapitalize()],m+=h[j-1]["offset"+new c(d[k+"range"]).toCapitalize()]}if(g(b,{width:m+"px"}),i){var t="",u=i.children;if(!u.length){for(var v=0;q>v;v++)t+="<span"+(v==this.config.curIndex?" class="+this.config.activeTriggerCls:"")+"></span>";i.innerHTML=t}this.triggers=i.children,this.triggerSel=this.triggers[this.config.curIndex]}else this.config.hasTrigger=!1;return this.slideTo(this.config.curIndex),this},increaseEvent:function(){var a=this,b=a.wrap,c=a.prev,d=a.next,e=a.triggers;b.addEventListener&&(b.addEventListener("touchstart",a,!1),b.addEventListener("touchmove",a,!1),b.addEventListener("touchend",a,!1),b.addEventListener("webkitTransitionEnd",a,!1),b.addEventListener("msTransitionEnd",a,!1),b.addEventListener("oTransitionEnd",a,!1),b.addEventListener("transitionend",a,!1)),a.config.play&&a.begin(),c&&(this.prevHandler=function(b){a.stop(),a.backward.call(a,b)},c.addEventListener("click",this.prevHandler,!1)),d&&(this.nextHandler=function(b){a.stop(),a.forward.call(a,b)},d.addEventListener("click",this.nextHandler,!1)),a.config.hasTrigger&&e.length&&(a.triggerHandler=[],[].forEach.call(e,function(b,c){var d=function(){a.slideTo(c)};a.triggerHandler.push(d),b.addEventListener("click",d,!1)}))},handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":case"touchcancel":this.end(a);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"transitionend":this.transitionEnd(a)}},loadImg:function(a){a=a||0;var b=this.panel.children;a<this._minpage?(this.getImg(b[b.length-1]),a=this._maxpage):a>this._maxpage&&(this.getImg(b[b.length-2]),a=this._minpage);for(var c=this.config.visible,d=this.config.lazyIndex,e=[a],f=this._maxpage+1,g=this,h=0;d>h;h++)e.push(a-h-1),e.push(a+h+1);e.forEach(function(a,b){0>a?e[b]=a+f:a>g._maxpage&&(e[b]=a-f)}),e.forEach(function(a){var d=a*c;if(g.config.loop)var e=Math.min(d+c,b.length-2);else var e=Math.min(d+c,b.length);for(var f=d;e>f;f++)g.getImg(b[f])})},getImg:function(a){if(!a.getAttribute("l")){var b=this,c=b.config.lazy,d="img["+c+"]";[].forEach.call(a.querySelectorAll(d),function(a){var b=a.getAttribute(c);a.setAttribute("src",b),a.removeAttribute(c)}),a.setAttribute("l","1")}},start:function(a){var b=a.touches[0];this._movestart=void 0,this._distance=0,this._coord={x:b.pageX,y:b.pageY}},move:function(a){var b=this.direction;if(!(a.touches.length>1||a.scale&&1!==a.scale)){var c,e=a.touches[0],f=this._distance=e["page"+b.toUpperCase()]-this._coord[b],g=this.config[d[b+"start"]];"undefined"==typeof this._movestart&&(this._movestart=!!(this._movestart||Math.abs(f)<Math.abs(e["page"+b.toUpperCase()]-this._coord[b]))),this._movestart||(a.preventDefault(),this.stop(),this.config.loop||(f/=!this.config.curIndex&&f>0||this.config.curIndex==this._maxpage&&0>f?Math.abs(f)/this.config.steps+1:1),c=g-this.config.curIndex*this.config.steps+f,this.setCoord(this.panel,c),this._distance=f)}},end:function(a){if(!this._movestart){var b=this._distance;b<0-this.config.degree?(a.preventDefault(),this.forward()):b>this.config.degree&&(a.preventDefault(),this.backward()),b=null}},backward:function(a){a&&a.preventDefault&&a.preventDefault();var b=this.config.curIndex,c=this._minpage;b-=1,c>b&&(b=this.config.loop?c-1:c),this.slideTo(b),this.config.callback&&this.config.callback(Math.max(b,c),-1);var d=document.createEvent("HTMLEvents");d.initEvent("SliderBackward",!0,!0),this.container.dispatchEvent(d)},forward:function(a){a&&a.preventDefault&&a.preventDefault();var b=this.config.curIndex,c=this._maxpage;b+=1,b>c&&(b=this.config.loop?c+1:c),this.slideTo(b),this.config.callback&&this.config.callback(Math.min(b,c),1);var d=document.createEvent("HTMLEvents");d.initEvent("SliderForward",!0,!0),this.container.dispatchEvent(d)},setCoord:function(a,b){var c=this.direction,d=this.gv1,e=this.gv2;"x"==c?this.useTransform?g(a,{"-webkit-transform":d+b+"px,0"+e}):g(a,{left:b+"px"}):this.useTransform?g(a,{"-webkit-transform":d+"0,"+b+"px"+e}):g(a,{top:b+"px"})},slideTo:function(a){var a=a||0;this.direction;this.config.curIndex=a;var b=this.panel,c=b.style,d=this.config.start-a*this.config.steps;c.webkitTransitionDuration=c.MozTransitionDuration=c.msTransitionDuration=c.OTransitionDuration=c.transitionDuration=this.config.duration+"ms",this.setCoord(b,d),this.loadImg(a)},transitionEnd:function(){var a=this.panel,b=a.style,c=this.config.loop,d=this.config.curIndex;c&&(d>this._maxpage?this.config.curIndex=0:d<this._minpage&&(this.config.curIndex=this._maxpage),this.setCoord(a,this.config.start-this.config.curIndex*this.config.steps)),c||d!=this._maxpage?this.begin():(this.stop(),this.config.play=!1),this.update(),this.updateArrow(),b.webkitTransitionDuration=b.MozTransitionDuration=b.msTransitionDuration=b.OTransitionDuration=b.transitionDuration=0},update:function(){var a=this.triggers,b=this.config.activeTriggerCls,c=this.config.curIndex;a&&a[c]&&(this.triggerSel&&(this.triggerSel.className=""),a[c].className=b,this.triggerSel=a[c])},updateArrow:function(){if(!this.config.loop){var a=this.prev,b=this.next;if(a&&a.length&&b&&b.length){var c=this.config.curIndex,d="none";0>=c?i(a,d):h(a,d),c>=this._maxpage?i(b,d):h(b,d)}}},begin:function(){var a=this;a.config.play&&!a._playTimer&&(a.stop(),a._playTimer=setInterval(function(){a.forward()},a.config.interval))},stop:function(){var a=this;a.config.play&&a._playTimer&&(clearInterval(a._playTimer),a._playTimer=null)},destroy:function(){var a=this,b=a.wrap[0],c=a.prev,d=a.next,e=a.triggers;b.removeEventListener&&(b.removeEventListener("touchstart",a,!1),b.removeEventListener("touchmove",a,!1),b.removeEventListener("touchend",a,!1),b.removeEventListener("webkitTransitionEnd",a,!1),b.removeEventListener("msTransitionEnd",a,!1),b.removeEventListener("oTransitionEnd",a,!1),b.removeEventListener("transitionend",a,!1)),c&&c.removeEventListener("click",this.prevHandler,!1),d&&d.removeEventLIstener("click",this.nextHandler,!1),a.config.hasTrigger&&e.length&&[].forEach.call(e,function(b,c){b.removeEventListener("click",a.triggerHandler.shift(),!1)})},attachTo:function(a,b){[].forEach.call(a,function(a,c){a.getAttribute("l")||(a.setAttribute("l",!0),j.cache.push(new j(a,b)))})}},j.cache=[],j.destroy=function(){var a=j.cache,b=a.length;if(!(1>b)){for(var c=0;b>c;c++)a[c].destroy();j.cache=[]}},b.Slider=j}(window,window.lib||(window.lib={}));