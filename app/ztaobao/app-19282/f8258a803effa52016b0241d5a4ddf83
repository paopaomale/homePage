!function(){var a={};this.tmpl=function b(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[c]=a[c]||b(document.getElementById(c).innerHTML);return d?e(d):e}}(),function(){function a(){if(lib.env.os.isIPhone&&lib.env.taobaoApp){var a,b,c=document.documentElement.clientWidth;document.addEventListener("horizontalpanstart",function(b){a=b.touchEvent.touches[0].pageX},!1),document.addEventListener("horizontalpan",function(d){b=d.displacementX,a>0&&b>0&&c/10>a&&b>.3*c&&(document.removeEventListener("horizontalpan"),WindVane.call("WVNative","nativeBack",{}))},!1)}}var b={isSupportWebp:function(){window.isHasWebp=!1;var a=new Image;a.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",a.onload=function(){2===a.height?window.isHasWebp=!0:window.isHasWebp=!1},a.onerror=function(){window.isHasWebp=!1}},convertImgCdn:function(a){if(!a||"string"!=typeof a)return"";var b=["wimg.taobao.com","alicdn.com","taobaocdn.com"],c=document.createElement("a");c.href=a;for(var d=0;d<b.length;d++)if(-1!=c.host.indexOf(b[d])){c.host="gw.alicdn.com";break}return c.href},getNetWorkInfo:function(a){lib.env.taobaoApp?window.WindVane&&WindVane.call("TBDeviceInfo","getInfo",{},function(b){"wifi"!=b.network&&(window.WeakNetStatus=!0),a&&a()},function(b){a&&a()}):a&&a()},openLinkByWv:function(a){a.preventDefault();var b=a.currentTarget,c=$(a.currentTarget),d=c.attr("href"),e="",f=!0;if(d){if(lib.httpurl){var g=new lib.httpurl(d);if(window.g_SPM&&window.g_SPM.spm){var h=window.g_SPM.spm(b);g.params.spm=h}e=g.toString()}else e=d;-1!=e.indexOf("openwindow=false")&&(f=!1),lib.env&&lib.env.taobaoApp&&window.WindVane&&f?window.WindVane.call("Base","openWindow",{url:e},function(){},function(){location.href=e}):location.href=e}},getUtdid:function(a){window.localStorage&&window.localStorage.getItem("h5_app_hysc_utdid")?(window.utdid=window.localStorage.getItem("h5_app_hysc_utdid"),a&&a()):lib.env&&lib.env.taobaoApp?window.WindVane.call("TBDeviceInfo","getUtdid",{},function(b){b.utdid&&(window.utdid=b.utdid,window.localStorage&&window.localStorage.setItem("h5_app_hysc_utdid",b.utdid)),a&&a()},function(b){a&&a()}):a&&a()},initNavBar:function(){var a=$(".hytpl-navbar");a.length&&a.on("click","a",function(a){a.preventDefault();var b=$(a.currentTarget),c=b.attr("href");b.hasClass("cur")||(c&&-1==c.indexOf("http://hichao.uz.m.jaeapp.com/d/wuxian/women")&&(c=c.replace(/^(http:|https:)/,location.protocol)),window.location.replace(c))})},getUrlParams:function(){if(lib.httpurl){var a=new lib.httpurl(location.href);return a.params}return null},mtopErrorHandler:function(a){var b=this,c=a.ret[0],d=c.split("::")[0];switch(d){case"FAIL_SYS_TRAFFIC_LIMIT":b.showToast("哎哟喂，被挤爆啦，请稍后重试");break;default:b.showToast("请求数据失败")}},showToast:function(a){null!=navigator.userAgent.match(/WindVane/i)?window.WindVane.call("WVUIToast","toast",a,function(a){},function(a){console.log(JSON.stringify(a))}):console.log(a)}};window.utils=b,window.utils.getUtdid(),window.utils.isSupportWebp(),window.addEventListener("DOMContentLoaded",function(){b.initNavBar(),a()},!1)}();var HYSprotsRank=function(){this.cache={},this.imgLib=lib.img({"class":"lazy",size:"240x240",dataSrc:"data-src",sharpen:"s150",q:["q50","q30"],enableLazyload:!1}),this.firstRequest(),this.initScroller(),this.bind()};HYSprotsRank.prototype={firstRequest:function(){var a=this;lib.mtop.request({api:"com.taobao.wireless.chanel.comboData",v:"1.0",data:{tabId:"yd_top",pageSize:40,currentPage:1,extendParam:JSON.stringify({utdid:window.utdid?window.utdid:""})}},function(b){var c=b.data.model;if(!(b&&c&&c.items&&c.items.result))return void a.dataError();a.isDouble11=window.isDouble11(c.currentTime),a.isDouble11,a.cache.tagInfo=c.items.result.tagInfo,a.scm=c.items.result.scm||"";var d=a.cache.tagInfo[0].tabId,e=c.sex,f=d+"_"+e;a.cache[f]||(a.cache[f]=c.items.result.itemList),a.renderTab(),a.renderList(d,e)})},renderTab:function(){var a=tmpl("tmpl_tab",{list:this.cache.tagInfo});$("#J-tab .tab-in").html(a)},renderList:function(a,b){function c(a){a=e.parseData(a);var c=tmpl("tmpl_list",a);$(".con-wrap .top3").html(c),"1"==b?$(".gender-toggle-btn").addClass("male"):$(".gender-toggle-btn").removeClass("male"),e.pageScroller&&e.pageScroller.refresh(),e.imgLib&&e.imgLib.fireLazyload()}var d=a+"_"+b,e=this;this.cache[d]?c(this.cache[d]):lib.mtop.request({api:"com.taobao.wireless.chanel.realTimeSearchItems",v:"1.0",data:{pageSize:40,albumId:"YD_ONLINE_TOP",currentPage:1,param:JSON.stringify({tab:a,sex:b,utdid:window.utdid?window.utdid:""})}},function(a){var b=a.data.model;e.cache[d]=b.result.itemList,e.scm=b.result.scm||"",c(e.cache[d])})},parseData:function(a){var b=this,c={},d="_240x240q90.jpg";window.WeakNetStatus&&(d="_240x240q75.jpg"),window.isHasWebp&&(d+="_.webp"),b.scm&&(c.scm="scm="+b.scm),a.forEach(function(a){var c=a[window.d11Info.extKey],d="";if(c&&b.isDouble11){var e=c.split(" ")[0];e&&window.d11Info.extValues[e]&&(d=window.d11Info.extValues[e])}a.extendHtml=d;var f=parseFloat(a.marketPrice).toFixed(2).split(".");a.priceInt=f[0],a.priceFix=f[1],a.hasImgRule||(a.picUrl=b.imgLib.getNewUrl(a.picUrl),a.hasImgRule=!0)}),c.no1=a[0],c.more=[];for(var e=a.length-1,f=1;e>f;f++)c.more.push(a[f]);return c.more.length%2!=0&&(c.more.length=c.more.length-1),c},dataError:function(){$(".error-tip").html("数据加载失败").show()},initScroller:function(){var a=this,b=$("#J-page-scroll");a.pageScroller=lib.scroll({scrollElement:b[0]}).init(),a.pageScroller.addScrollendHandler(function(b){a.imgLib.fireLazyload()},!1)},bind:function(){var a=this;$(".tab-holder").on("click","li",function(b){var c=$(b.currentTarget);if(a.pageScroller.scrollTo(0),!c.hasClass("cur")){$(".tab-holder li").removeClass("cur"),c.addClass("cur");var d=c.attr("data-tabid");"1"==d||"2"==d?$(".gender-toggle-btn").removeClass("disable"):$(".gender-toggle-btn").addClass("disable");var e=$(".gender-toggle-btn").hasClass("male")?1:0;a.renderList(d,e)}}).on("click",".gender-toggle-btn",function(b){var c=$(b.currentTarget),d=$(".tab-holder li.cur").attr("data-tabid");if(a.pageScroller.scrollTo(0),!c.hasClass("disable")){var e=$(".gender-toggle-btn").hasClass("male")?0:1;a.renderList(d,e)}}),lib.env.taobaoApp&&(window.WindVane.call("WebAppInterface","enableStatusBarClicked","",null,null),document.addEventListener("TBStatusBar.clicked",function(b){a.pageScroller.scrollTo(0,!0)},!1))}},window.addEventListener("DOMContentLoaded",function(){new HYSprotsRank},!1);