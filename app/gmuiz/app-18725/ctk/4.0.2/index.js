!function(){function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t.call(e,e[n],n)}function t(){for(var e,t=document.getElementsByTagName("meta"),n=t.length;n--&&"spm-id"!==t[n].name;);if(t=t[n])return t=t.content.split("/")[0],document.body&&(e=document.body.getAttribute("data-spm"))&&(t=t+"."+e),t}function n(e){var t,n,o,u=[];for(t=0,n=e.length;t<n;t++)o=e[t],"object"==typeof o?u.push(JSON.stringify(o)):null===o||void 0===o?u.push(""):u.push(o+"");for(t=u.length;t--;)u[t]=u[t].replace("|","\uff5c").replace(";","\uff1b");return u}function o(){for(var e=0,t=new Array(256),n=0;256!==n;++n){e=n;for(var o=8;o--;)e=1&e?-306674912^e>>>1:e>>>1;t[n]=e}return"undefined"!=typeof Int32Array?new Int32Array(t):t}function u(e){for(var t,n,o=-1,u=0,i=e.length;u<i;)t=e.charCodeAt(u++),t<128?o=o>>>8^v[255&(o^t)]:t<2048?(o=o>>>8^v[255&(o^(192|t>>6&31))],o=o>>>8^v[255&(o^(128|63&t))]):t>=55296&&t<57344?(t=(1023&t)+64,n=1023&e.charCodeAt(u++),o=o>>>8^v[255&(o^(240|t>>8&7))],o=o>>>8^v[255&(o^(128|t>>2&63))],o=o>>>8^v[255&(o^(128|n>>6&15|(3&t)<<4))],o=o>>>8^v[255&(o^(128|63&n))]):(o=o>>>8^v[255&(o^(224|t>>12&15))],o=o>>>8^v[255&(o^(128|t>>6&63))],o=o>>>8^v[255&(o^(128|63&t))]);return o^-1}function i(e){var t=this;this.name=e.name||"none",this.api=e.api||c,this.sender=e.sender||function(){},this.windowOnLoaded=!1,this.queueName=e.name+"_queue",this.fullQueueName=e.name+"_full_queue",this.sendingTask=null,this.listenWindowOnload(),this.startSendPool(),this.setQueue(window[this.queueName]||[]),this.setFullQueue([].concat(r?JSON.parse(window.localStorage.getItem(this.fullQueueName))||[]:[]).concat(window[this.fullQueueName]||[])),window[e.name+"Track"]=function(){t.sender.apply(t,Array.prototype.slice.call(arguments))},window[e.name+"TrackIme"]=function(){t.sender.apply(t,Array.prototype.slice.call(arguments)),t.sendingTask&&clearTimeout(t.sendingTask),t.sendQueue(),t.startSendPool()}}var a=window.interval_before_onload||5e3,s=window.interval_after_onload||2500,r=!!(window.localStorage&&window.localStorage.setItem&&window.localStorage.getItem),l=1900,c="//gm.mmstat.com/codetrack.1.1",h="//gm.mmstat.com/codetrack.1.2",d="//gm.mmstat.com/codetrack.1.3",p=encodeURIComponent,m=+new Date,f=t()||"",w="",g={},y=0,v=o();i.prototype.push=function(e){this.queue.push(e)},i.prototype.pushFull=function(e){this.fullQueue.push(e)},i.prototype.setQueue=function(e){window[this.queueName]=this.queue=e},i.prototype.setFullQueue=function(e){window[this.fullQueueName]=this.fullQueue=e,r&&window.localStorage.setItem(this.fullQueueName,JSON.stringify(e))},i.prototype.listenWindowOnload=function(){function e(){t.windowOnLoaded=!0,window.detachEvent?window.detachEvent("onload",e):window.removeEventListener("load",e,!1)}var t=this;window.attachEvent?window.attachEvent("onload",e):window.addEventListener("load",e,!1)},i.prototype.startSendPool=function(){var e=this;e.sendingTask=setTimeout(function(){e.sendQueue(),e.sendingTask=null,e.startSendPool()},e.windowOnLoad?s:a)},i.prototype.sendQueue=function(){this.setQueue(this.formatQueue(this.queue)),this.setFullQueue(this.formatQueue(this.fullQueue)),this.sendNormalQueue(),this.sendFullQueue()},i.prototype.formatQueue=function(e){for(var t=[],n=0,o=e.length;n<o;n++){var u=e[n];"[object array]"===Object.prototype.toString.call(u).toLowerCase()?t.push({length:1,point:u}):t.push(u)}return t},i.prototype.mergeQueue=function(t){var n,o,u,i,a=[],s={};for(n=0,o=t.length;n<o;n++)i=t[n],u=i.point[0],s[u]=s[u]||{point:null,length:0},s[u].length+=i.length,Math.random()*s[u].length<=i.length&&(s[u].point=i.point);return e(s,function(e){a.push(e)}),a},i.prototype.sendNormalQueue=function(){var e,t=[],o=[],u=0;for(t=this.mergeQueue(this.queue),t.sort(function(){return Math.random()-.5}),e=t.length;e--;){var i=p(n([].concat(t[e].point.slice(1)).concat([1e3])).join("|")).length;if(u+i>l)break;o.push(t[e]),u+=i}for(e=o.length;e--;)o[e]=n([].concat(o[e].point.slice(1)).concat([o[e].length*Math.round(t.length/o.length)])).join("|");this.send(o.join(";")),this.setQueue([])},i.prototype.sendFullQueue=function(){var e,t=[],o=[],u=0;for(t=this.mergeQueue(this.fullQueue),this.setFullQueue(t);t.length;){var i=t[0],a=p(n([].concat(i.point.slice(1)).concat([i.length])).join("|")).length;if(u+a>l)break;o.push(t.shift()),u+=a}for(e=o.length;e--;)o[e]=n([].concat(o[e].point.slice(1)).concat([o[e].length])).join("|");this.send(o.join(";"))},i.prototype.send=function(e){if(e){var t="__CT_image_"+y++,n=window[t]=new Image;n.onload=n.onerror=function(){window[t]=null},n.src=this.api+"?msg="+p(e)+"&hash="+u(e)+"&spm="+f}},new i({name:"spy",sender:function(e,t,n){t=t||"",n=n||!1,e&&(n?this.pushFull([e,t,+new Date-m]):this.push([e,t,+new Date-m]))},api:h}),new i({name:"tes",api:d,sender:function(e,t,n){t=t||[],n=n||!1,e&&(n?this.pushFull([].concat([e]).concat(t)):this.push([].concat([e]).concat(t)))}}),new i({name:"ctk",sender:function(e,t,n){if(t=t||"codetrack.init",n=n||{},n.module=n.module||"",n.type=n.type||"normal",n.msg=n.msg||"",n.version=n.version||"",e){w||(w=e);var o=+new Date;g[e]=o;var u=e===w?0:o-(g[t||w]||g[w]);"error"===n.type?this.pushFull([e+"_"+n.module,e,t,n.module,n.version,n.msg,Math.max(u,0),1]):this.push([e+"_"+n.module,e,t,n.module,n.version,n.msg,Math.max(u,0),0])}},api:c})}();