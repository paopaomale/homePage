define("mui/zebra-hk-slide/index",function(e,n,t){var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(n,t,r){if(t)e(n.prototype,t);if(r)e(n,r);return n}}();function i(e,n){if(!(e instanceof n)){throw new TypeError("Cannot call a class as a function")}}var o=e("mui/zepto/event");var s=e("mui/custom-event/index");var a="data-lazyload";var l=["left","current","right","next","prev"];var c=function(){function e(){i(this,e);this.el=document.querySelector("#m-banner");this.$el=o(this.el);this.$scroller=this.$el.find(".scroller");this.size=this.$scroller.find("a").length-1;this.index=0;this.syncUI();this.bindUI();this.initTimer()}r(e,[{key:"syncUI",value:function n(){var n=this.$scroller.find(".current");var t=this.getPrevIndex(this.index);var r=this.$scroller.find('[data-index="'+(t-1)+'"]').clone();this.$scroller.prepend(e.modifyClass(r,"prev"));if(!n.next().next().length){this.$scroller.append(e.modifyClass(n.clone(),"next"))}}},{key:"bindUI",value:function t(){var e=this;var n=void 0;var t=void 0;var r=30;this.$scroller.on("touchstart",function(e){n=e.touches[0].pageX}).on("touchmove",function(e){if(t||Math.abs(e.touches[0].pageX-n)>=5){t=true;e.preventDefault()}}).on("touchend",function(i){if(!t){return}var o=i.changedTouches[0].pageX;if(n-o>=r){e.next()}else if(o-n>=r){e.prev()}t=false});var i=this.$el.find("nav i");this.on("change",function(e){i.eq(e.prevIndex).removeClass("current");i.eq(e.index).addClass("current")});var o=function s(){var n=[];var t=e.$scroller.find(".current");n.push(t);n.push(t.next());n.push(t.prev());n.forEach(function(e){var n=e.find("img");var t=n.attr(a);if(t){n.removeAttr(a);var r=document.createElement("img");r.onload=function(){n.attr("src",t);r=null};r.src=t}})};this.on("change",o);window.addEventListener("load",function(){setTimeout(o,1e3)})}},{key:"initTimer",value:function s(){var n=this;var t=function r(){n.timer=setInterval(function(){if(e.isInViewPort(n.el,0)){n.next()}},5e3)};this.$scroller.on("touchstart",function(){clearInterval(n.timer)}).on("touchend",t);t()}},{key:"getPrevIndex",value:function c(e){e=e-1;return e<0?this.size-1:e}},{key:"getNextIndex",value:function d(e){e=e+1;return e>this.size-1?0:e}},{key:"prepend",value:function u(){this.$scroller.find("a:last-of-type").remove();var n=this.$scroller.find('[data-index="'+this.getPrevIndex(this.getPrevIndex(this.index))+'"]').eq(0);e.modifyClass(n.clone(),"prev").prependTo(this.$scroller)}},{key:"append",value:function f(){this.$scroller.find("a:first-of-type").remove();var e=this.$scroller.find('[data-index="'+this.getNextIndex(this.$scroller.find("a:last-of-type").attr("data-index")-0)+'"]').eq(0);e.clone().removeClass(l.join(" ")).appendTo(this.$scroller)}},{key:"next",value:function v(){var n=this;e.RAF(function(){var t=n.index;n.index=n.getNextIndex(t);n.append();var r=n.$scroller.find(".left");var i=n.$scroller.find(".current");var o=n.$scroller.find(".right");var s=n.$scroller.find(".next");e.modifyClass(s,"right");e.modifyClass(o,"current");e.modifyClass(i,"left");e.modifyClass(r,"prev");e.modifyClass(s.next(),"next");setTimeout(function(){n.trigger("change",{index:n.index,prevIndex:t})},350)})}},{key:"prev",value:function h(){var n=this;e.RAF(function(){var t=n.$scroller.find(".left");var r=n.$scroller.find(".current");var i=n.$scroller.find(".right");var o=n.$scroller.find(".prev");e.modifyClass(o,"left");e.modifyClass(t,"current");e.modifyClass(r,"right");e.modifyClass(i,"next");var s=n.index;n.index=n.getPrevIndex(s);n.prepend();setTimeout(function(){n.trigger("change",{index:n.index,prevIndex:s})},350)})}}],[{key:"modifyClass",value:function p(e,n){e.removeClass(l.join(" "));e.addClass(n);return e}},{key:"RAF",value:function m(e){var n=void 0;var t=window,r=["r","webkitR","mozR","msR","oR"];for(var i=0;i<r.length;i++){var o=r[i]+"equestAnimationFrame";if(o in t){n=t[o];break}}return n?n(e):setTimeout(e,16)}},{key:"isInViewPort",value:function x(e,n){var t=e.getBoundingClientRect();return!(!t.width&&!t.height||t.top-window.innerHeight>=n||t.bottom+n<=0||t.right<=0||t.left-window.innerWidth>=0)}}]);return e}();Object.assign(c.prototype,s);t.exports=function d(e){new c}});