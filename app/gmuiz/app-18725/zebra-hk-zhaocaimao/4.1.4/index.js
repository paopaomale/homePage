define("mui/zebra-hk-zhaocaimao/index",function(t,n,a){var i=t("mui/zepto/zepto");var e=t("mui/hybrid/index");function o(t){r.init()}function s(){var t=location.href.split("?")[1]||"";var n=t.split("taskId=")[1]||"";var a=n.indexOf("&")>-1?n.indexOf("&"):n.length;return n.substr(0,a)}var r={init:function(t){var n=this;var a=new Date;n.now=a.getFullYear()+"/"+a.getMonth()+"/"+a.getDate();e.ready(function(){if(!e.isWeb){n.taskId=s();if(!n.taskId){}else{e.isLogin(function(t){if(t.isLogin){n.checkTask()}else{location.href="http://login.tmall.com?redirectURL="+location.href}})}}})},checkTask:function(){var n=this;var a=t("mui/zebra-task-detail/detail");a(this.taskId,function(t){if(t[n.taskId]){if(t[n.taskId]["status"]!=13){n.showtask()}}else{}})},showtask:function(){var n=this;var a=t("mui/sticky/index");var e=i(".txt").html()||"\u6d4f\u89c810\u79d2\u5929\u732b\u56fd\u9645\u9996\u9875\u5373\u53ef\u8d62\u5b9d\u7bb1!";var o='<div class="task">'+'<p class="wellcome">'+e+'<span class="notice">(<span class="countdown">10</span>S)</span></p>'+'<img class="x" src="//gw.alicdn.com/tps/TB1a6F_KVXXXXXlXVXXXXXXXXXX-28-30.png">'+"</div>";i(document.body).prepend(o);new a({el:".task",offset:0});i(".task .x").on("tap",function(){window.clearInterval(n.int);i(".task").remove()});this.countdown()},countdown:function(){var t=this;var n=9;t.int=setInterval(a,1e3);function a(){i(".task .countdown").html(n);n--;if(n===-1){window.clearInterval(t.int);i(".task").remove();t.finish()}}},storage:function(){var t=this;if(window.localStorage){if(window.localStorage.getItem(t.now)){return 0}else{t.showtask()}}else{t.showtask()}},finish:function(){var n=this;var a={api:"mtop.tmw.mcity.finish",v:"1.0",post:"1",param:{id:n.taskId,taskType:2}};window.WindVane.call("MtopWVPlugin","send",a,function(t){var n=t.data||[];if(n.succ){var a=n.data||[];a=a.prizeValue;if(a.indexOf("_0")>-1){}else{var i="poplayer://myStreet?lotteryId="+a;location.href=i}}},function(n){var a=t("mui/popbox/index");var i=n.data||[];a.alert({content:i.msg,btns:{ok:"\u786e\u5b9a"}})})}};a.exports=o});