define("mui/zebra-task-main/task-count",function(a,t,e){var i=a("mui/zepto/zepto");a("mui/zepto/event");var o={bindEvent:function r(){var a=this;i(".pop-task-count .btn-close-counter, .pop-task-count .btn-pop-close").on("click",function(t){a.hideCounterLayer(i(".pop-task-count"))});i(".pop-task-no-count .btn-close-counter, .pop-task-no-count .btn-pop-close").on("click",function(t){a.hideCounterLayer(i(".pop-task-no-count"))});i(".show-pop-count").on("click",function(t){t.preventDefault();a.manualShow()})},hideCounterLayer:function n(a){i(a).addClass("hide-anim");i(".pop-content",a).css({top:i(".maochao-info-wrap").offset().top-i(window).scrollTop()+"px"});setTimeout(function(t){i(a).hide();i(".pop-content",a).css({top:"50%"});i(a).removeClass("hide-anim")},800)},refreshNum:function s(a){if(a&&a.plusChance){var t=a.plusChance;var e=t.addCart||0;var o=t.collect||0;var r=t.order||0;var n=a.todayLeftChance||0;var s=parseInt(a.todayTotalChance||0,10);var l=t.addCartCnt||0;var u=t.collectCnt||0;var p=t.orderCnt||0;var d=t.actCnt||0;var m=t.actName;i(".add-item-num").html(l);i(".add-fav-num").html(u);i(".add-order-num").html(p+"\u7b14");i(".add-cart-num").html(e);i(".shop-fav-num").html(o);i(".add-trade-num").html(r);i(".today-total-chance").html(s);var c=parseInt(e,10)+parseInt(r,10)+parseInt(o,10);i(".base-counter-num").html(s-c-parseInt(d,10));i(".add-counter-num").html(c);if(d!=0&&m){i(".act-counter-wrap").html(d+"\u6b21"+"("+decodeURIComponent(m)+") + ")}return c}return-1},autoShow:function l(a){var t=this.refreshNum(a);if(t===-1){i(".show-pop-count").hide();return}this.bindEvent();i(".pop-task-count, .pop-task-no-count").removeClass("pop-counter-show");if(t>0){i(".pop-task-count").addClass("pop-counter-show")}else{i(".pop-task-no-count").addClass("pop-counter-show")}var e=new Date;var o=""+e.getFullYear()+e.getMonth()+e.getDate();if(localStorage.getItem("add-counter-pop")===o){return}else{localStorage.setItem("add-counter-pop",o);i(".pop-counter-show").show()}},manualShow:function u(){i(".pop-counter-show").show()}};e.exports=o});