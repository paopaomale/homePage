KISSY.add("mui/brand-lib/utils",function(e,t,n){return function(r,i){var o={};var a=/^(\S+)\s*(.*)$/;o.delegateEvents=function(e,t,r){if(!e||!t){return}for(var i in e){var o=e[i];if(!(typeof o=="function")){o=r[e[i]]}if(!o){continue}var u=i.match(a);var f=u[1],l=u[2];if(l==""){n.on(t,f,o,r)}else{n.delegate(t,f,l,o,r)}}};o.undelegateEvents=function(e){n.detach(e)};o.circle=function(e,t){return(t+e%t)%t};o.throttle=function(t,n,r){var i,o=0,a=0,n=n||150;function u(){if(i){i.cancel();i=0}o=e.now();t.apply(r||this,arguments);a=e.now()}return e.mix(function(){if(!o||a>=o&&e.now()-a>n||a<o&&e.now()-o>n*8){u()}else{if(i){i.cancel()}i=e.later(u,n,0,null,arguments)}},{stop:function(){if(i){i.cancel();i=0}}})};o.buffer=function(e,t,n){var r=this;t=t||150;if(t===-1){return function(){e.apply(n||null,arguments)}}var i=null;function o(){o.stop();i=r.later(e,t,0,n||null,arguments)}o.stop=function(){if(i){i.cancel();i=0}};return o};o.later=function(e,t,n,r,i){if(!e){return}var o=Array.prototype.slice.call(i);t=t||0;if(typeof e==="string"){e=r[e]}var a=function(){e.apply(r,o)},u=n?setInterval(a,t):setTimeout(a,t);return{id:u,interval:n,cancel:function(){if(this.interval){clearInterval(u)}else{clearTimeout(u)}}}};o.getOffset=function(e){var t=e;var n=0,r=0;while(t!=null&&t!=i.body){n+=t.offsetLeft;r+=t.offsetTop;t=t.offsetParent}return{left:n,top:r}};o.isViewPort=function(e){var t=o.getOffset(e);return!(t.top+e.clientHeight<=r.scrollY)&&!(r.innerWidth+r.scrollX<=t.left)&&!(r.innerHeight+r.scrollY<=t.top)&&!(t.left+e.clientWidth<=r.scrollX)};var u=i.createElement("div"),f=["webkit","moz","MS","o",""];var l=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};var c=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n)){return true}}return false};var s=function(e){if(u.style[e]!==undefined){return e}else{var t;c(f,function(n){var r=l(n)+l(e);if(u.style[r]!==undefined){t="-"+n+"-"+e;return true}});return t}};var p=function(e){return c(e,function(e){return u.style[e]!==undefined})};var d=function(e,t){return c(t,function(t){u.style[e]=t;var n=u.style[e];return n===t})};o.some=c;o.getCSSVal=s;o.hasProp=p;o.supportProp=d;var g=function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)};var v=function(e){if(g(e)){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=t.exec(document.cookie);if(n){return n[2]||null}}return null};var m=function(e){var t=v(e);if("string"==typeof t){t=decodeURIComponent(t);return t}return null};var h=function(e,t,n){if(!g(e)){return}n=n||{};var r=n.expires;if("number"==typeof n.expires){r=new Date;r.setTime(r.getTime()+n.expires)}document.cookie=e+"="+t+(n.path?"; path="+n.path:"")+(r?"; expires="+r.toGMTString():"")+(n.domain?"; domain="+n.domain:"")+(n.secure?"; secure":"")};var b=function(e,t,n){h(e,encodeURIComponent(t),n)};var y=function(e,t){t=t||{};t.expires=new Date(0);h(e,"",t)};var w=function(e,t,n){try{r.localStorage.setItem(e,t)}catch(i){b(e,t,n)}};var S=function(e){try{return r.localStorage.getItem(e)}catch(t){return m(e)}};var x=function(e){try{r.localStorage.removeItem(e)}catch(t){y(e)}};o.cookieIsValidKey=g;o.cookieGetRaw=v;o.cookieGet=m;o.cookieSetRaw=h;o.cookieSet=b;o.cookieRemove=y;o.storageSet=w;o.storageGet=S;o.storageRemove=x;var A=r.Ali,I=r.location;o.login=function(e){if(A&&A.isTmall){A.login(function(e){if(!e.errorCode){I.reload()}})}else{I.href="//login.taobao.com/member/login.jhtml?redirectURL="+encodeURIComponent(I.href)}};o.getSearch=function(){var e=location.href.match(/\?(.*)$/),t={};if(e){e=e[1].split("&");var n=e.length,r;while(n--){r=e[n].split("=");t[r[0]]=r[1]}}return t};o.param=o.getSearch();var _=false;o.delegatePushwindow=function(e,o){if(_){return}if(!e){e=i.body}if(!o){o=".j_link"}var a=r.Ali;if(a&&!a.isWeb&&!/Windows Phone/gi.test(window.navigator.userAgent)){if(e==i.body){_=true}n.delegate(e,"click",o,function(e){e.preventDefault();var n=t.attr(e.currentTarget,"href");if(n){if(!/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/.test(n)){if(/\/\//.test(n)){n="http"+":"+n}else{n="http"+"://"+n}}a.pushWindow(n,function(e){if(e.errorCode){location.href=n}})}})}};return o}(window,document,undefined)},{requires:["dom","event"]});