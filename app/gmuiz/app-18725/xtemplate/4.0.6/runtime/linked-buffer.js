define("mui/xtemplate/runtime/linked-buffer",function(e,t,n){"use strict";var a=e("./util");function r(e,t,n){this.list=e;this.init();this.next=t;this.ready=false;this.tpl=n}r.prototype={constructor:r,isBuffer:1,init:function s(){this.data=""},append:function o(e){this.data+=e;return this},write:function u(e){if(e!==null&&e!==undefined){if(e.isBuffer){return e}this.data+=e}return this},writeEscaped:function f(e){if(e!==null&&e!==undefined){if(e.isBuffer){return e}this.data+=a.escapeHtml(e)}return this},insert:function l(){var e=this;var t=e.list;var n=e.tpl;var a=new r(t,e.next,n);var i=new r(t,a,n);e.next=i;e.ready=true;return i},async:function p(e){var t=this.insert();var n=t.next;e(t);return n},error:function c(e){var t=this.list.callback;var n=e;if(t){var a=this.tpl;if(a){if(!(n instanceof Error)){n=new Error(n)}var r=a.name;var i=a.pos.line;var s="XTemplate error in file: "+r+" at line "+i+": ";try{n.stack=s+n.stack;n.message=s+n.message}catch(o){}n.xtpl={pos:{line:i},name:r}}this.list.callback=null;t(n,undefined)}},end:function h(){var e=this;if(e.list.callback){e.ready=true;e.list.flush()}return e}};function i(e,t){var n=this;n.config=t;n.head=new r(n,undefined);n.callback=e;this.init()}i.prototype={constructor:i,init:function v(){this.data=""},append:function d(e){this.data+=e},end:function m(){this.callback(null,this.data);this.callback=null},flush:function b(){var e=this;var t=e.head;while(t){if(t.ready){this.data+=t.data}else{e.head=t;return}t=t.next}e.end()}};i.Buffer=r;n.exports=i});