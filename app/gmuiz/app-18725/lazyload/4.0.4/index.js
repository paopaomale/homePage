define("mui/lazyload/index",function(e,t,i){"use strict";e("mui/babel-polyfill/index");e("mui/kissy-polyfill/index");var n=e("mui/zepto/event");var o=function g(e){return typeof e=="function"};var a={addStyleSheet:function v(e){var t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css";if(i.styleSheet){i.styleSheet.cssText=e}else{i.appendChild(document.createTextNode(e))}t.appendChild(i)},debounce:function h(e,t,i){var n=void 0,o=void 0;return function(){var a=this,s=arguments;var r=function c(){n=null;if(!i)o=e.apply(a,s)};var l=i&&!n;clearTimeout(n);n=setTimeout(r,t);if(l)o=e.apply(a,s);return o}},throttle:function y(e,t){var i=void 0,n=void 0,o=void 0,s=void 0,r=void 0,l=void 0;var c=a.debounce(function(){r=s=false},t);return function(){i=this;n=arguments;var a=function u(){o=null;if(r){l=e.apply(i,n)}c()};if(!o)o=setTimeout(a,t);if(s){r=true}else{s=true;l=e.apply(i,n)}c();return l}}};var s=window,r=n(s),l=s.devicePixelRatio>1,c=void 0,u=void 0,f="mui-lazyload-fade",d=l?"data-src-retina":"data-src",m="onorientationchange"in s?"orientationchange":"resize";if(s.navigator&&s.navigator.userAgent){c=function(e){if(/Android (\d+\.\d+)/i.test(e)){if(parseFloat(RegExp["$1"])<4.3){return false}}return true}(s.navigator.userAgent,undefined)}function p(e,t){var i=this;if(!(i instanceof p)){return new p(e,t)}i.$el=e?e:n("body");i.options=Object.assign({images:null,cls:"mui-lazy",bgCls:"mui-bg-lazy",beforeResolveImg:function o(){},afterResolveImg:function s(){},threshold:50},t);if(c&&!u){u=true;a.addStyleSheet("@-webkit-keyframes ks-fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes ks-fadeIn{0%{opacity:0}100%{opacity:1}}."+f+"{-webkit-animation:ks-fadeIn 350ms linear 0ms 1 normal both;animation:ks-fadeIn 350ms linear 0ms 1 normal both}")}i.initializer()}Object.assign(p.prototype,{initializer:function b(){var e=this;e.cacheImgs=[];e.refresh();e._bindEvt()},refresh:function E(){var e=this;e.options.images=e.$el.find("img."+e.options.cls+(e.options.bgCls?",."+e.options.bgCls:""));e.load()},loadSrc:function C(e){var t=this;var i=e.attr(d);var n=e.hasClass(t.options.bgCls);var a=this.options;var s=a.beforeResolveImg;var r=a.afterResolveImg;i=i||e.attr("data-src");var l={type:n?"bgimg":"img",elem:e[0],src:n?"":i,bgimgSrc:n?i:""};if(i){o(s)&&s(l);i=n?l.bgimgSrc:l.src;var c=this.options.cls;if(n){e.css("background-image","url("+i+")").removeClass(t.options.bgCls)}else{e.addClass(f).attr("src",i).removeClass(c)}if(t.options&&t.options.callback){t.options.callback(e)}setTimeout(function(){e.removeClass(f)},360);o(r)&&r(l)}},inViewPort:function I(e){if(!e.offset().width&&e.css("display")=="none"){return false}var t=this.options.threshold,i=r.scrollTop(),n=i+r.height(),o=e.offset().top,a=o+e.height();return a>=i-t&&o<=n+t},_bindEvt:function S(){var e=this;var t=a.throttle(function(){e.load()},100);r.on("scroll touchmove "+m,t)},destroy:function x(){r.detach("scroll touchmove "+m)},pause:function A(){this.cacheImgs=this.options.images;this.options.images=[]},resume:function k(){if(this.cacheImgs.length>0){this.options.images=this.cacheImgs}},load:function Y(){var e=this,t=e.options.images,i=e.options.cls;if(!t.length)return;t.each(function(t,i){var o=n(i);var a=e.inViewPort(o);if(a){e.loadSrc(o)}});e.options.images=t.filter("."+i+(e.options.bgCls?",."+e.options.bgCls:""))}});i.exports=p});