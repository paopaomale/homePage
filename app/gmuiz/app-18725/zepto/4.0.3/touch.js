define("mui/zepto/touch",function(e,t,n){"use strict";var i=e("mui/zepto/zepto");var r=e("mui/zepto/event");(function(e){var t={},n,i,r,o,u=750,s;function a(e,t,n,i){return Math.abs(e-t)>=Math.abs(n-i)?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function f(){o=null;if(t.last){t.el.trigger("longTap");t={}}}function c(){if(o)clearTimeout(o);o=null}function l(){if(n)clearTimeout(n);if(i)clearTimeout(i);if(r)clearTimeout(r);if(o)clearTimeout(o);n=i=r=o=null;t={}}function p(e){return(e.pointerType=="touch"||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function d(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}e(document).ready(function(){var h,m,g=0,v=0,y,z;if("MSGesture"in window){s=new MSGesture;s.target=document.body}e(document).bind("MSGestureEnd",function(e){var n=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;if(n){t.el.trigger("swipe");t.el.trigger("swipe"+n)}}).on("touchstart MSPointerDown pointerdown",function(i){if((z=d(i,"down"))&&!p(i))return;y=z?i:i.touches[0];if(i.touches&&i.touches.length===1&&t.x2){t.x2=undefined;t.y2=undefined}h=Date.now();m=h-(t.last||h);t.el=e("tagName"in y.target?y.target:y.target.parentNode);n&&clearTimeout(n);t.x1=y.pageX;t.y1=y.pageY;if(m>0&&m<=250)t.isDoubleTap=true;t.last=h;o=setTimeout(f,u);if(s&&z)s.addPointer(i.pointerId)}).on("touchmove MSPointerMove pointermove",function(e){if((z=d(e,"move"))&&!p(e))return;y=z?e:e.touches[0];c();t.x2=y.pageX;t.y2=y.pageY;g+=Math.abs(t.x1-t.x2);v+=Math.abs(t.y1-t.y2)}).on("touchend MSPointerUp pointerup",function(o){if((z=d(o,"up"))&&!p(o))return;c();if(t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30)r=setTimeout(function(){t.el.trigger("swipe");t.el.trigger("swipe"+a(t.x1,t.x2,t.y1,t.y2));t={}},0);else if("last"in t)if(g<30&&v<30){i=setTimeout(function(){var i=e.Event("tap");i.cancelTouch=l;t.el.trigger(i);if(t.isDoubleTap){if(t.el)t.el.trigger("doubleTap");t={}}else{n=setTimeout(function(){n=null;if(t.el)t.el.trigger("singleTap");t={}},250)}},0)}else{t={}}g=v=0}).on("touchcancel MSPointerCancel pointercancel",l);e(window).on("scroll",l)});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})})(i);n.exports=i});