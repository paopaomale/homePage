KISSY.add("mui/lib/flipsnap",function(t,e){var n=document.createElement("div");var i=["webkit","moz","o","ms"];var r={};var o=y.support={};var a=false;var s=Math.abs,l=Math.round,c=Math.ceil,u=Math.floor,f=Math.acos,d=Math.sqrt,v=Math.pow;var m=5;var p=55;o.transform3d=_(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);o.transform=_(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]);o.transition=_(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","OTransitionProperty","msTransitionProperty"]);o.ease={quadratic:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",circular:"cubic-bezier(0.1, 0.57, 0.1, 1)",back:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",elastic:"cubic-bezier(0, 0, 0.25, 1)"};o.addEventListener="addEventListener"in window;o.mspointer=window.navigator.msPointerEnabled;o.cssAnimation=(o.transform3d||o.transform)&&o.transition;var h=["touch","mouse"];var g={start:{touch:"touchstart",mouse:"mousedown"},move:{touch:"touchmove",mouse:"mousemove"},end:{touch:"touchend",mouse:"mouseup"}};if(o.addEventListener){document.addEventListener("gesturestart",function(){a=true});document.addEventListener("gestureend",function(){a=false})}function y(t,e){return this instanceof y?this.init(t,e):new y(t,e)}y.prototype.init=function(t,n){var i=this;i.element=t;if(typeof t==="string"){i.element=document.querySelector(t)}if(!i.element){throw new Error("element not found")}if(o.mspointer){i.element.style.msTouchAction="pan-y"}n=n||{};i.distance=n.distance;i.maxPoint=n.maxPoint;i.disableTouch=n.disableTouch===e?false:n.disableTouch;i.disable3d=n.disable3d===e?false:n.disable3d;i.transitionDuration=n.transitionDuration===e?"350ms":n.transitionDuration+"ms";i.vertical=n.vertical===e?false:n.vertical;i.cssAnimation=n.cssAnimation===e?o.cssAnimation:n.cssAnimation;i.elemStyle=i.element.style;i.currentPoint=0;i.currentDist=0;i.animTimer=null;i.use3d=o.transform3d;if(i.disable3d===true){i.use3d=false}if(i.cssAnimation){i._setStyle({transitionProperty:x("transform"),transitionTimingFunction:o.ease[n.ease]||o.ease["elastic"],transitionDuration:"0ms",transform:i._getTranslate(0,0)})}else{i._setStyle({position:"relative",left:"0px",top:"0px"})}i.refresh();h.forEach(function(t){i.element.addEventListener(g.start[t],i,false)});return i};y.prototype.disable=function(){this.disabled=true};y.prototype.enable=function(){this.disabled=false};y.prototype.handleEvent=function(t){if(this.disabled){return}var e=this;switch(t.type){case g.start.touch:e._touchStart(t,"touch");break;case g.start.mouse:e._touchStart(t,"mouse");break;case g.move.touch:e._touchMove(t,"touch");break;case g.move.mouse:e._touchMove(t,"mouse");break;case g.end.touch:e._touchEnd(t,"touch");break;case g.end.mouse:e._touchEnd(t,"mouse");break;case"click":e._click(t);break}};y.prototype.refresh=function(){var t=this;t._maxPoint=t.maxPoint===e?function(){var e=t.element.childNodes,n=-1,i=0,r=e.length,o;for(;i<r;i++){o=e[i];if(o.nodeType===1){n++}}return n}():t.maxPoint;t.maxPoint=t._maxPoint;if(t.distance===e){if(t._maxPoint<0){t._distance=0}else{t._distance=t.element.scrollWidth/(t._maxPoint+1)}}else{t._distance=t.distance}t._maxDist=-t._distance*t._maxPoint};y.prototype.circlePoint=function(t){var e=this,n=e._maxPoint+1;return(n+t%n)%n};y.prototype.toNext=function(t){var e=this,n=e.circlePoint(e.currentPoint+1);e.moveToPoint(n,t)};y.prototype.toPrev=function(t){var e=this,n=e.circlePoint(e.currentPoint-1);e.moveToPoint(n,t)};y.prototype.moveToPoint=function(t,n){var i=this;t=t===e?i.currentPoint:parseInt(t,10);n=n===e?i.transitionDuration:n+"ms";var r=i.currentPoint;if(t<0){t=0}else if(t>i.maxPoint){t=i._maxPoint}i.currentPoint=t;if(r!==t){i._triggerEvent("fspointbeforemove",true,false,{currentPoint:t,beforePoint:r})}var o=-i._distance*t,a=i.vertical?[0,o]:[o,0];if(i.cssAnimation){i._setStyle({transitionDuration:n});i._setDist.apply(i,a)}else{i._animDist=i.currentDist;i._animate(o,n||i.transitionDuration)}if(r!==t){i._triggerEvent("fsmoveend",true,false);i._triggerEvent("fspointmove",true,false,{currentPoint:t,beforePoint:r})}};y.prototype._setDist=function(t,e,n){var i=this,o=i.elemStyle,a=i.vertical,s=a?e:t;if(i.cssAnimation){i.elemStyle[r.transform]=i._getTranslate(t,e)}else{if(a){o.top=s+"px"}else{o.left=s+"px"}}i.currentDist=s};y.prototype._touchStart=function(t,e){var n=this;if(n.disableTouch||n.scrolling||a){return}n.element.addEventListener(g.move[e],n,false);document.addEventListener(g.end[e],n,false);var i=t.target.tagName;if(e==="mouse"&&i!=="SELECT"&&i!=="INPUT"&&i!=="TEXTAREA"&&i!=="BUTTON"){t.preventDefault()}if(n.cssAnimation){n._setStyle({transitionDuration:"0ms"})}else{clearInterval(n.animTimer)}n.scrolling=true;n.moveReady=false;n.startPageX=P(t,"pageX");n.startPageY=P(t,"pageY");n.basePageX=n.startPageX;n.basePageY=n.startPageY;n.direction=0;n.startTime=t.timeStamp;n._triggerEvent("fstouchstart",true,false)};y.prototype._touchMove=function(t,e){var n=this;if(!n.scrolling||a){return}var i=P(t,"pageX");var r=P(t,"pageY");var o;var s;if(n.moveReady){t.preventDefault();o=n.vertical?r-n.basePageY:i-n.basePageX;s=n.currentDist+o;if(s>=0||s<n._maxDist){s=n.currentDist+o/3}n.direction=o===0?n.direction:o>0?-1:1;var l=!n._triggerEvent("fstouchmove",true,true,{delta:o,direction:n.direction});if(l){n._touchAfter({moved:false,originalPoint:n.currentPoint,newPoint:n.currentPoint,cancelled:true})}else{var c=n.vertical?[0,s]:[s,0];n._setDist.apply(n,c)}}else{var u=n.vertical?T(n.startPageY,n.startPageX,r,i):T(n.startPageX,n.startPageY,i,r);if(u.z>m){if(z(u)>p){t.preventDefault();n.moveReady=true;n.element.addEventListener("click",n,true)}else{n.scrolling=false}}}n.basePageX=i;n.basePageY=r};y.prototype._touchEnd=function(t,e){var n=this;n.element.removeEventListener(g.move[e],n,false);document.removeEventListener(g.end[e],n,false);if(!n.scrolling){return}var i=n.currentPoint;i=n.direction>0?i+1:n.direction<0?i-1:i;if(i<0){i=0}else if(i>n._maxPoint){i=n._maxPoint}n._touchAfter({moved:i!==n.currentPoint,originalPoint:n.currentPoint,newPoint:i,cancelled:false});n.moveToPoint(i)};y.prototype._click=function(t){var e=this;t.stopPropagation();t.preventDefault()};y.prototype._touchAfter=function(t){var e=this;e.scrolling=false;e.moveReady=false;setTimeout(function(){e.element.removeEventListener("click",e,true)},200);e._triggerEvent("fstouchend",true,false,t)};y.prototype._setStyle=function(t){var e=this;var n=e.element.style;for(var i in t){b(n,i,t[i])}};y.prototype._animate=function(t,e){var n=this,i=n.element,r=n.elemStyle,o=+new Date,a=parseInt(e,10),s=n._animDist;var l=function(t,e){return-(t/=e)*(t-2)};n.animTimer=setInterval(function(){var e=+new Date-o;var i;if(e>a){clearInterval(n.animTimer);s=t;n._animDist=t}else{i=l(e,a);s=i*(t-s)+s}if(n.vertical){r.top=s+"px"}else{r.left=s+"px"}n.currentDist=s},10)};y.prototype.destroy=function(){var t=this;h.forEach(function(e){t.element.removeEventListener(g.start[e],t,false)})};y.prototype._getTranslate=function(t,e){var n=this;return n.use3d?"translate3d("+t+"px, "+e+"px, 0)":"translate("+t+"px, "+e+"px)"};y.prototype._triggerEvent=function(t,e,n,i){var r=this;var o=document.createEvent("Event");o.initEvent(t,e,n);if(i){for(var a in i){if(i.hasOwnProperty(a)){o[a]=i[a]}}}return r.element.dispatchEvent(o)};function P(t,e){return t.changedTouches?t.changedTouches[0][e]:t[e]}function _(t){return E(t,function(t){return n.style[t]!==e})}function b(t,n,o){var a=r[n];if(a){t[a]=o}else if(t[n]!==e){r[n]=n;t[n]=o}else{E(i,function(i){var a=w(i)+w(n);if(t[a]!==e){r[n]=a;t[a]=o;return true}})}}function x(t){if(n.style[t]!==e){return t}else{var r;E(i,function(i){var o=w(i)+w(t);if(n.style[o]!==e){r="-"+i+"-"+t;return true}});return r}}function w(t){return t.charAt(0).toUpperCase()+t.substr(1)}function E(t,e){for(var n=0,i=t.length;n<i;n++){if(e(t[n],n)){return true}}return false}function T(t,e,n,i){var r=s(t-n);var o=s(e-i);var a=d(v(r,2)+v(o,2));return{x:r,y:o,z:a}}function z(t){var e=t.y/t.z;var n=f(e);return 180/(Math.PI/n)}return y},{requires:[]});