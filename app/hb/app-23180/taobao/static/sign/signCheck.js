webpackJsonp([6],{0:function(e,t,r){"use strict";r(101),r(6);var c=r(1),i=r(62),s=r(73),n=r(214),a=r(9),o=new i({model:n,successUrl:"index.htm",view:{constructor:s},enter:function(e){var t=this.model.get("trackerSrc"),r=this;this.view.set(e);var i=Ali.utils.isTM?"tm_sign_config":"tb_sign_config",s={filePath:i};this.model.fetch(s).then(function(e){if(!e.result.success)return a.reject({message:"\u7cfb\u7edf\u9519\u8bef"});var s=e.result.data,n=e.result.data.cms,o=e.result.data.spaceInfoList;if(n&&n[i]&&n[i].successTaobaoUrl){r.successUrl=n[i].successTaobaoUrl;var l=s.amountInfo||{};r.successUrl=c.addQuery(r.successUrl,{amount:l.creditAmount,billDate:l.billingDate,billedDate:l.billedDate})}try{if(o.length){var u=o[0].spaceObjectList[0];r.successUrl=c.addQuery(r.successUrl,{hrefUrl:u.hrefUrl,actionUrl:u.actionUrl})}}catch(d){console.error(d)}var f=r.model.get("res")||{};r.redirectUrl=f.redirectUrl&&decodeURIComponent(f.redirectUrl),c.tracker(t+"signSuccess"),s.signed&&r.redirect()},function(e){return e.resultCode&&257===parseInt(e.resultCode,10)?void Ali.alert("\u4f60\u5df2\u7ecf\u6210\u529f\u5f00\u901a\u4e86\u8682\u8681\u82b1\u5457"):void Ali.alert(e.message)})["catch"](function(e){console.error(e)})},redirect:function(){c.redirect(this.redirectUrl||this.successUrl)}});o.enter("#main")},101:function(e,t,r){e.exports=r.p+"signCheck.htm"},214:function(e,t,r){"use strict";var c=r(74).constructor,i=r(28),s=r(11),n=r(43),a=r(9),o={initialize:function(){c.prototype.initialize.call(this);var e=this.get("query");this.set("trackerSrc",e.hbsrc)},getSignCache:function(){return new a(function(e){n.get("resSign",function(t){try{t=JSON.parse(t)}catch(r){t={}}e(t)})})},getVerifyId:function(){return new a(function(e){n.get("verifyId",function(t){e(t)})})},fetch:function(e){var t=this;return a.all([t.getSignCache(),t.getVerifyId()]).then(function(r){var c=r[0],i=r[1],n=t.get("query"),a=t.get("trackerSrc")||"tbapp-index";t.set("res",c),a=decodeURIComponent(a);var o={};return o.parameterMap={},$.extend(o.parameterMap,n),a&&(o.parameterMap.hbsrc=a),o.parameterMap.verifyId||(o.parameterMap.verifyId=i),o.requestType="signVerifyCallBack",o.filePath=e.filePath||["tb_sign_config"],o.ad={spaceCode:["HUABEI_TAOBAO_CMS"],extInfo:""},s.request("taobao",o)})}},l=i.create(c,o);e.exports={constructor:l}}});