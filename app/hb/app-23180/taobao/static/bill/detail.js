webpackJsonp([5],{0:function(t,a,i){"use strict";i(96),i(112),i(6);var e=i(30),o=i(11),l=i(83),s=i(14).error,n="tb_notice",d=$(".page-wrap"),r=common.Formatter,m=i(1),c="http://tm.m.taobao.com/order/order_detail.htm?bizOrderId=",v={getData:function(){var t=this,a=new Date,i=r.dateFormat(a,"yyyyMM"),e=r.dateFormat(new Date(a.getFullYear(),a.getMonth()+1),"yyyyMM"),c=m.getQuery().year+m.getQuery().month;"string"==typeof c&&5===c.length&&(c=m.getQuery().year+"0"+m.getQuery().month),(6!==c.length||parseInt(c.substr(4,2),10)>12)&&(c=i);var v=new Date;o.request("taobao",{requestType:"billDetailQuery",filePath:n,billMonth:c}).then(function(a){if(Tracker.calc("billDetailQuery",new Date-v),a=a.result,!a.success)return void s(d);var o=a.billingDate&&a.billingDate.substr(4,2)||c.substr(4,2);d.html(l({result:a,isCurrentMonth:i===c,queryMonth:c,isNextMonth:e===c,month:parseInt(o,10),parseFloat:parseFloat,dateSection:t.dateSection,preDateCalculate:m.preDateCalculate,formatMoney:m.formatMoney,formatDate:m.formatDate,getRepayDate:t.getRepayDate})),t.bindEvent(c)})["catch"](function(t){s(d),console.log(t)})},dateSection:function(t){if(!t)return"";var a=t.substr(0,4),i=parseInt(t.substr(4,2),10),e=new Date(a,i,0).getDate();return i+"\u67081\u65e5-"+i+"\u6708"+e+"\u65e5"},getRepayDate:function(t){var a="";if(!t)return a;var i=t.split("-");return i[1]||a},bindEvent:function(t){$(".J-tb-item").on("tap",function(){window.location.href=c+$(this).attr("data-tbno")}),$("#J-goto-refund").attr("data-href",common.baseUrl+"repay.htm?year="+t.substr(0,4)+"&month="+t.substr(4,2))},init:function(){this.getData()}};Ali.ready(function(){v.init(),common.linkBind("#J-goto-refund"),(0,e.subscribePageRefresh)(e.SHOULD_REFRESH_PAGE.DETAIL,function(){v.init()})})},83:function(t,a){t.exports=function(t){return function(t,a,i,e,o,l,s,n,d,r,m){var c="";if(t.hasBill?(c+='<div class="money-detail"> <div class="title"> ',a?c+=" \u672c\u6708\u5269\u4f59\u5e94\u8fd8":(c+=i,c+="\u6708\u5269\u4f59\u5e94\u8fd8"),c+='\uff08\u5143\uff09 </div> <div class="money"><span>',c+=e(t.unclearAmount),c+='</span></div> <div class="pay-date color-gray">\u8fd8\u6b3e\u65e5 ',c+=o(t.repayDate,"yyyy-MM-dd"),c+='</div> <!-- <div class="icon-question J-goto-service"></div> --></div>'):(c+='<div class="money-detail"> <div class="title"> ',a?c+="\u672c\u6708\u8d26\u5355":i&&(c+=i,c+="\u6708\u8d26\u5355"),c+=' </div> <div class="no-bill"><span>',c+=a?" \u6ca1\u6709\u8d26\u5355":"\u6682\u65e0\u8d26\u5355",c+='</span></div> <div class="pay-date color-gray"></div></div>'),c+='<div class="bill-refund"> <div class="am-list" am-mode="flat chip"> <div class="am-list-body"> ',t.totalAmount&&l(t.totalAmount,10)>0&&(c+=' <div class="am-list-item"> <div class="am-list-content">\u8d26\u5355\u603b\u989d</div> <div class="am-list-extra"> <div class="am-list-extra-content">',c+=t.totalAmount,c+="</div> ",t.clear?t.ovd&&(c+=' <div class="am-list-extra-info color-red">\u542b\u903e\u671f\u5229\u606f',c+=t.totalPenaltyAmount,c+="</div> "):t.ovd?(c+=' <div class="am-list-extra-info color-red">\u542b\u903e\u671f',c+=t.ovdDays,c+="\u5929\u5229\u606f",c+=t.totalPenaltyAmount,c+="</div> "):t.expire&&(c+=' <div class="am-list-extra-info color-red">\u5df2\u8fc7\u671f',c+=t.overExpireDays,c+="\u5929</div> "),c+=" </div> </div> "),t.repayedAmount&&l(t.repayedAmount,10)>0&&(c+=' <div id="J-repay-link" seed="hb-accoDetail-repayDetail" class="am-list-item ',l(t.repayedAmount,10)<=0&&(c+="disabled"),c+='"> <div class="am-list-content">\u5df2\u8fd8\u6b3e</div> <div class="am-list-extra"> <div class="am-list-extra-content">-',c+=t.repayedAmount,c+="</div> ",t.hasRefund&&(c+=' <div class="am-list-extra-brief">\u6709\u9000\u6b3e</div> '),c+=" </div> </div> "),t.transfered&&(c+=' <div id="J-stage-link" seed="hb-accoDetail-phasedDetail" data-billno="',c+=t.billNo,c+='" class="am-list-item"> <div class="am-list-content">\u5df2\u5206\u671f</div> <div class="am-list-extra">-',c+=t.transferedAmount,c+="</div> </div> "),c+=" </div> </div></div>",t.monthBillLogList&&t.monthBillLogList.length>0){c+='<div class="detail-list"> <div class="am-list" am-mode="flat chip icon22"> <div class="am-list-header">\u8d26\u5355\u660e\u7ec6<span class="info-date">(',c+=s(n(t.billingDate)),c+='\u786e\u8ba4\u6536\u8d27\u7684\u82b1\u5457\u6d88\u8d39)</span></div> <div class="am-list-body"> ';for(var d=0;d<t.monthBillLogList.length;d++)"tmall"!==t.monthBillLogList[d].tradeExtInfo.platform&&"taobao"!==t.monthBillLogList[d].tradeExtInfo.platform||!t.monthBillLogList[d].tradeExtInfo.tbOrderNo?(c+=' <a seed="hb-accoDetail-detail" data-transmonth="',c+=t.monthBillLogList[d].transMonth,c+='" data-outbizNo="',c+=t.monthBillLogList[d].outBizNo,c+='" data-orderno="',c+=t.monthBillLogList[d].orderNo,c+='" data-pagetype="',c+=t.monthBillLogList[d].type,c+='" class="am-list-item J-bill-item"> '):(c+=' <a seed="hb-accoDetail-detail" data-transmonth="',c+=t.monthBillLogList[d].transMonth,c+='" data-outbizNo="',c+=t.monthBillLogList[d].outBizNo,c+='" data-orderno="',c+=t.monthBillLogList[d].orderNo,c+='" data-tbno="',c+=t.monthBillLogList[d].tradeExtInfo.tbOrderNo,c+='" data-pagetype="',c+=t.monthBillLogList[d].type,c+='" class="am-list-item J-bill-item J-tb-item" seed="tb-list-item:\u6dd8\u7cfb\u4ea4\u6613"> '),"CONSUME"===t.monthBillLogList[d].type||"CONSUME_FQ"===t.monthBillLogList[d].type?(c+=' <div class="am-list-thumb icon-',c+=t.monthBillLogList[d].tradeExtInfo.platform||"ap",c+='"> '):c+=' <div class="am-list-thumb icon-fenqi"> ',c+=' </div> <div class="am-list-content"> <div class="am-list-title">',c+=t.monthBillLogList[d].name,c+="</div> ","refund"==t.monthBillLogList[d].type?(c+=' <div class="am-list-brief">',c+=t.monthBillLogList[d].bizTime,c+="</div> "):(c+=' <div class="am-list-brief">',c+=t.monthBillLogList[d].desc?t.monthBillLogList[d].desc:t.monthBillLogList[d].bizTime,c+="</div> "),c+=' </div> <div class="am-list-extra"> <div class="am-list-extra-content">',c+=t.monthBillLogList[d].amount,c+="</div> ","refund"==t.monthBillLogList[d].type&&(c+=' <div class="am-list-extra-info">',c+=t.monthBillLogList[d].desc,c+="</div> "),c+=" </div> ","tmall"!==t.monthBillLogList[d].tradeExtInfo.platform&&"taobao"!==t.monthBillLogList[d].tradeExtInfo.platform||!t.monthBillLogList[d].tradeExtInfo.tbOrderNo||(c+=' <div class="am-list-arrow"><span class="am-icon" am-mode="arrow-horizontal"></span></div> '),c+=" </a> ";c+=" </div> </div></div>"}else c+='<div class="detail-list"> <div class="am-list" am-mode="flat chip icon22"> <div class="am-list-header empty-info"><span class="info-date">\u8d26\u5355\u4e3a',c+=s(n(t.billingDate||r+"01")),c+="\u786e\u8ba4\u6536\u8d27\u7684\u82b1\u5457\u6d88\u8d39</span></div> </div></div>";return t.clear===m||t.clear||(c+='<div class="bill-operation"> <div class="am-flexbox" am-mode="average"> ',t.clear||(c+=' <div class="am-flexbox-item" seed="hb-repayment" id="J-goto-refund"> <button type="button" class="am-button operation-btn" id="" data-url="" am-mode="" seed="detail-repay-btn:\u8d26\u5355\u8be6\u60c5\u8fd8\u6b3e">\u8fd8\u6b3e</button> </div> '),c+=" </div></div>"),c}(t.result,t.isCurrentMonth,t.month,t.formatMoney,t.formatDate,t.parseFloat,t.dateSection,t.preDateCalculate,t.i,t.queryMonth,t.undefined)}},96:function(t,a,i){t.exports=i.p+"detail.htm"},112:110});